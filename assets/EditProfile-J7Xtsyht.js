import{j as t}from"./query-vendor-DpGHCXpY.js";import{c as re,hk as ne,j as ae,G as oe,i as ce,gQ as de,o as me,p as fe,v as ee,hl as ue,hm as pe,b as xe,d as he,A as je,B as se,gW as Z,hn as ge,ho as be}from"./index-3wbD5lp1.js";import{a as _e,F as G,b as ve,u as De,c as H,d as L,e as Q,g as W,f as te}from"./form-pQZ4LpHo.js";import{f as Se}from"./react-vendor-DjlsVz29.js";import{a as Ne,S as Pe}from"./SocialShareButtons-BQ6WJ_cB.js";import{u as Fe}from"./i18n-vendor-DDmeScd6.js";import{S as Ie}from"./siren-BHIhN4nD.js";import"./charts-vendor-D-Ae2kUX.js";import"./supabase-vendor-CP3OYKhD.js";import"./ui-vendor-9yhwxkpr.js";import"./xlsx-vendor-De4COjWB.js";import"./index-5ziEWJdO.js";const we=()=>{const e=re.c(88),q=Se(),{data:o}=ne(),{data:r}=ae(),a=oe(),{isProfileDialogOpen:J,setIsProfileDialogOpen:c}=ce(),{toast:M}=de(),{t:s}=Fe("edit-profile");let d,R;if(e[0]!==s){const l=me({username:ee().min(2,{message:s("usernameTooShort")}),friend_id:ee().regex(/^\d{16}$/,{message:s("friendIdInvalid")}),is_public:fe().optional()});R=De,d=_e(l),e[0]=s,e[1]=d,e[2]=R}else d=e[1],R=e[2];const K=r?.username??"",V=r?.friend_id??"",X=r?.is_public??!1;let m;e[3]!==K||e[4]!==V||e[5]!==X?(m={username:K,friend_id:V,is_public:X},e[3]=K,e[4]=V,e[5]=X,e[6]=m):m=e[6];let U;e[7]!==d||e[8]!==m?(U={resolver:d,values:m},e[7]=d,e[8]=m,e[9]=U):U=e[9];const i=R(U);let $;e[10]!==r?.is_active_trading||e[11]!==s||e[12]!==M||e[13]!==a||e[14]!==o?.user.email?($=l=>{a.mutate({email:o?.user.email,username:l.username,friend_id:l.friend_id,is_public:l.is_public,is_active_trading:l.is_public===!1?!1:r?.is_active_trading},{onSuccess:()=>M({title:s("accountSaved"),variant:"default"}),onError:n=>{console.error("error saving account",n),M({title:s("accountSavingError"),variant:"destructive"})}})},e[10]=r?.is_active_trading,e[11]=s,e[12]=M,e[13]=a,e[14]=o?.user.email,e[15]=$):$=e[15];const Y=$;let f;e[16]!==s?(f=s("editProfile"),e[16]=s,e[17]=f):f=e[17];let u;e[18]!==f?(u=t.jsx(ue,{children:t.jsx(pe,{children:f})}),e[18]=f,e[19]=u):u=e[19];let w;e[20]===Symbol.for("react.memo_cache_sentinel")?(w=t.jsx(Ie,{className:"size-4"}),e[20]=w):w=e[20];let p;e[21]!==s?(p=s("updateProfile.title"),e[21]=s,e[22]=p):p=e[22];let x;e[23]!==p?(x=t.jsx(xe,{children:p}),e[23]=p,e[24]=x):x=e[24];let h;e[25]!==s?(h=s("updateProfile.description"),e[25]=s,e[26]=h):h=e[26];let j;e[27]!==h?(j=t.jsx(he,{children:h}),e[27]=h,e[28]=j):j=e[28];let g;e[29]!==x||e[30]!==j?(g=t.jsxs(je,{className:"mb-2",children:[w,x,j]}),e[29]=x,e[30]=j,e[31]=g):g=e[31];let b;e[32]!==q||e[33]!==c?(b=l=>{l.preventDefault(),c(!1),q("/trade/settings")},e[32]=q,e[33]=c,e[34]=b):b=e[34];let _;e[35]!==s?(_=s("openTradingSettings"),e[35]=s,e[36]=_):_=e[36];let v;e[37]!==b||e[38]!==_?(v=t.jsx(se,{onClick:b,children:_}),e[37]=b,e[38]=_,e[39]=v):v=e[39];let D;e[40]!==i||e[41]!==Y?(D=i.handleSubmit(Y),e[40]=i,e[41]=Y,e[42]=D):D=e[42];let S;e[43]!==s||e[44]!==o?.user.email?(S=t.jsx(G,{name:"email",render:()=>t.jsxs(H,{children:[t.jsx(L,{children:s("email")}),t.jsx(Q,{className:"mt-1",children:t.jsx(Z,{placeholder:s("email"),disabled:!0,value:o?.user.email})}),t.jsx(W,{children:s("registeredEmail")})]})}),e[43]=s,e[44]=o?.user.email,e[45]=S):S=e[45];let N;e[46]!==s?(N=l=>{const{field:n}=l;return t.jsxs(H,{children:[t.jsx(L,{children:s("username")}),t.jsx(Q,{className:"mt-1",children:t.jsx(Z,{placeholder:s("username"),...n})}),t.jsx(W,{children:s("usernameDescription")}),t.jsx(te,{})]})},e[46]=s,e[47]=N):N=e[47];let P;e[48]!==i.control||e[49]!==N?(P=t.jsx(G,{control:i.control,name:"username",render:N}),e[48]=i.control,e[49]=N,e[50]=P):P=e[50];let F;e[51]!==s?(F=l=>{const{field:n}=l;return t.jsxs(H,{children:[t.jsx(L,{children:s("friendID")}),t.jsx(Q,{className:"mt-1",children:t.jsx(Z,{placeholder:s("friendID"),...n})}),t.jsx(W,{children:s("friendIDDescription")}),t.jsx(te,{})]})},e[51]=s,e[52]=F):F=e[52];let I;e[53]!==i.control||e[54]!==F?(I=t.jsx(G,{control:i.control,name:"friend_id",render:F}),e[53]=i.control,e[54]=F,e[55]=I):I=e[55];let A;e[56]!==s?(A=l=>{const{field:n}=l;return t.jsxs(H,{className:"flex flex-col items-start",children:[t.jsx(Q,{className:"mt-2",children:t.jsxs(L,{className:"flex items-center",children:[s("isPublicToggle"),t.jsx(Pe,{className:"ml-2",checked:n.value,onCheckedChange:n.onChange})]})}),t.jsx(W,{children:s("isPublicDescription")})]})},e[56]=s,e[57]=A):A=e[57];let C;e[58]!==i.control||e[59]!==A?(C=t.jsx(G,{control:i.control,name:"is_public",render:A}),e[58]=i.control,e[59]=A,e[60]=C):C=e[60];const ie=a.isPending,le=a.isPending;let T;e[61]!==s?(T=s("save"),e[61]=s,e[62]=T):T=e[62];let E;e[63]!==T||e[64]!==a.isPending?(E=t.jsx(se,{type:"submit",className:"block ml-auto",disabled:ie,isPending:le,children:T}),e[63]=T,e[64]=a.isPending,e[65]=E):E=e[65];let k;e[66]!==D||e[67]!==S||e[68]!==P||e[69]!==I||e[70]!==C||e[71]!==E?(k=t.jsxs("form",{onSubmit:D,className:"space-y-8",children:[S,P,I,C,E]}),e[66]=D,e[67]=S,e[68]=P,e[69]=I,e[70]=C,e[71]=E,e[72]=k):k=e[72];let y;e[73]!==i||e[74]!==k?(y=t.jsx(ve,{...i,children:k}),e[73]=i,e[74]=k,e[75]=y):y=e[75];let B;e[76]!==r?.is_public?(B=r?.is_public&&t.jsx(Ne,{className:"mt-4"}),e[76]=r?.is_public,e[77]=B):B=e[77];let O;e[78]!==g||e[79]!==v||e[80]!==y||e[81]!==B||e[82]!==u?(O=t.jsxs(ge,{className:"border-1 border-neutral-700",children:[u,g,v,y,B]}),e[78]=g,e[79]=v,e[80]=y,e[81]=B,e[82]=u,e[83]=O):O=e[83];let z;return e[84]!==J||e[85]!==c||e[86]!==O?(z=t.jsx(be,{open:J,onOpenChange:c,children:O}),e[84]=J,e[85]=c,e[86]=O,e[87]=z):z=e[87],z};export{we as default};
