import{$ as ne,a0 as ie,j as e,u as T,a1 as q,a2 as de,B as N,a3 as O,J as ce,C as le,M as ee,N as oe,K as F,o as V,r as g,T as I,a4 as R,a5 as z,a6 as $,L as B,O as D,a7 as me,a8 as ue,A as U,a9 as fe,aa as xe,ab as pe,ac as he,ad as te,ae as ge,af as K,ag as je,ah as _e,ai as be,Z as W,G as ve,aj as Ne,H as ye,ak as Ce,al as w,am as Te}from"./index-B0DtsL4v.js";import{T as ke,a as Se,b as we,c as $e,d as A}from"./Filters-3LS3oxcQ.js";import{F as re}from"./friend-id-display-CxyAVd0_.js";import{C as L}from"./CardLine-C0FVmopf.js";import{C as Fe}from"./Card-wJiu42Z_.js";import{C as Ie,g as Le,u as Ae}from"./filters-BKIhYBaQ.js";import{f as Ee}from"./utils-DB8tms-g.js";import{A as se,a as Me,b as Pe}from"./alert-0Y1z1uRr.js";import{S as Oe}from"./index-KvLMheUb.js";import{S as Re}from"./SearchInput-Do4XU9vm.js";import{S as ae,u as ze,a as Ue,F as He,b as E,c as M,d as P,e as Ve,f as Be}from"./form--QWsclU7.js";import{M as H,C as Y}from"./react-tooltip.min-V__LOd_6.js";import"./FancyCard-DWgvcMpZ.js";import"./trash-2-oqXO5n6Q.js";import"./index-lqQLEeXa.js";function Z(t){return ne(ie,t)}const J=({cards:t,selected:i,setSelected:r})=>{const c=[...t].sort((f,n)=>{const l=x=>{const j=x.split("-"),h=j[0]||"",y=j.length>1?parseInt(j[1],10):0;return{setName:h,cardNumber:y}},o=l(f.card_id),m=l(n.card_id);return o.setName!==m.setName?o.setName.localeCompare(m.setName):o.cardNumber-m.cardNumber});function s(f){function n(){i?.card_id===f.card_id?r(null):r(f)}return e.jsx("li",{className:"rounded cursor-pointer",onClick:n,children:e.jsx(L,{className:`w-full ${i?.card_id===f.card_id&&"bg-green-900"} hover:bg-neutral-600`,card_id:f.card_id,rarity:"hidden"})},f.card_id)}return e.jsx("div",{className:"rounded-lg border-1 border-neutral-700 border-solid p-2 overflow-y-auto",children:e.jsx("ul",{className:"space-y-1",children:c.map(s)})})};function Q(t){return t?e.jsx(L,{card_id:t.card_id,details:"hidden"}):"—"}const De=({yourId:t,friendId:i,yourCard:r,friendCard:c,setYourCard:s,setFriendCard:f})=>{const{t:n}=T("trade-matches"),{toast:l}=q(),o=de(),m=r&&c&&r.rarity===c.rarity;async function x(){if(!m)return;const j={offering_friend_id:t,receiving_friend_id:i,offer_card_id:r.card_id,receiver_card_id:c.card_id,status:"offered"};try{o.mutate(j)}catch(h){console.log("TradeOffer: Error inserting trade",h),l({title:n("tradeFailed"),variant:"default"})}s(null),f(null),l({title:n("tradeOffered"),variant:"default"}),O("Offer trade")}return!r&&!c?e.jsx("div",{className:"sticky top-0 z-10 flex rounded-lg border-1 bg-neutral-900 border-neutral-700 border-solid p-2 w-full items-center justify-around text-center h-[166px] sm:h-[110px]",children:e.jsx("h4",{className:"text-lg font-medium",children:n("selectCardsToTrade")})}):e.jsxs("div",{className:"sticky top-0 z-10 bg-neutral-900 rounded-lg border-1 border-neutral-700 border-solid p-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-x-4 gap-y-1 p-1",children:[e.jsxs("div",{className:"w-full sm:w-1/2",children:[e.jsx("h4",{className:"text-lg font-medium",children:n("youGive")}),Q(r)]}),e.jsxs("div",{className:"w-full sm:w-1/2",children:[e.jsx("h4",{className:"text-lg font-medium",children:n("youReceive")}),Q(c)]})]}),e.jsx(N,{className:"block w-full sm:w-96 mx-auto mt-1 text-center",type:"button",variant:"outline",onClick:x,disabled:!m,children:n("offerTrades")})]})};function X(t,i){const r=new Set(i),c=t.filter(s=>r.has(s)).map(s=>I(s)).filter(s=>$.includes(s.rarity)&&me.includes(s.expansion));return Object.groupBy(c,s=>s.rarity)}function Ge(){const{t}=T(["trade-matches","common"]),{friendId:i}=ce(),[r]=le(),{data:c,isLoading:s,isError:f}=ee(i),{data:n=new Map,isLoading:l,isError:o}=oe(i),{data:m}=F(),{data:x=new Map}=V(),[j,h]=g.useState(null),[y,p]=g.useState(()=>{const d=r.get("friend_card");return d?I(Number(d))??null:null});if(g.useEffect(()=>{const d=r.get("friend_card");if(!d||!n||!x)return;const v=I(Number(d));if(!v)return;const C=document.getElementById(v.rarity);C&&C.scrollIntoView({behavior:"smooth"})},[r,n,x]),!m)return null;if(c===null)return e.jsx("p",{className:"text-xl text-center py-8",children:t("notFound")});if(f||o)return e.jsx("p",{className:"text-xl text-center py-8",children:t("common:error")});if(s||l)return e.jsx("div",{className:"mx-auto mt-12 animate-spin rounded-full size-12 border-4 border-white border-t-transparent"});if(!c?.is_active_trading)return e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-xl ",children:t("inActiveTradePage",{username:c?.username})}),e.jsx("p",{className:"text-sm text-gray-300 mt-2",children:t("inActiveTradeDescription")})]});const b=X(z(x,m.trade_rarity_settings),R(n,c.trade_rarity_settings)),a=X(z(n,c.trade_rarity_settings),R(x,m.trade_rarity_settings)),_=$.some(d=>(b[d]??[]).length>0&&(a[d]??[]).length>0);return e.jsxs("div",{className:"kap-4 justify-center w-full m-auto px-1 sm:px-2",children:[e.jsx("title",{children:`Trade with ${c.username} – TCG Pocket Collection Tracker`}),e.jsxs("div",{className:"mb-4 mx-1 flex justify-between",children:[e.jsxs("h1",{children:[e.jsx("span",{className:"text-2xl font-light",children:t("tradingWith")}),e.jsxs("span",{className:"text-2xl font-bold",children:[" ",c.username," "]}),e.jsx("span",{className:"block sm:inline text-sm",children:e.jsx(re,{friendId:c.friend_id})})]}),e.jsx(B,{to:`/collection/${i}`,children:e.jsxs(N,{children:["Collection",e.jsx(D,{})]})})]}),e.jsx(De,{yourId:m.friend_id,friendId:c.friend_id,yourCard:j,friendCard:y,setYourCard:h,setFriendCard:p}),!_&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-xl ",children:t("noPossibleTrades")}),e.jsx("p",{className:"text-sm text-gray-300 mt-2",children:t("noPossibleTradesDescription")})]}),$.map(d=>e.jsxs("div",{className:"mt-4",children:[e.jsxs("h3",{id:d,className:"text-xl font-semibold mb-2 text-center",children:["[ ",d," ]"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4",children:[e.jsxs("div",{className:"w-full sm:w-1/2",children:[e.jsx("h4",{className:"text-md font-medium mb-1 ml-2",children:t("youHave")}),b[d]?e.jsx(J,{cards:b[d],selected:j,setSelected:h}):e.jsx("div",{className:"text-center text-neutral-500 rounded-lg border-1 border-neutral-700 border-solid p-2",children:"No cards to trade"})]}),e.jsxs("div",{className:"w-full sm:w-1/2",children:[e.jsx("h4",{className:"text-md font-medium mb-1 ml-2",children:t("friendHas")}),a[d]?e.jsx(J,{cards:a[d],selected:y,setSelected:p}):e.jsx("div",{className:"text-center text-neutral-500  rounded-lg border-1 border-neutral-700 border-solid p-2",children:"No cards to trade"})]})]})]},d))]})}function Ke(){const{t}=T("pages/trade");return e.jsx("article",{className:"mx-auto grid max-w-4xl gap-5",children:e.jsxs(se,{className:"mb-8 border-1 border-neutral-700 shadow-none",children:[e.jsx(Oe,{className:"h-4 w-4"}),e.jsx(Me,{children:t("notLoggedIn.title")}),e.jsx(Pe,{children:t("notLoggedIn.description")})]})})}const We=["lookingFor","forTrade"];function Ye(){const{t}=T(["pages/trade","filters"]),{data:i}=ue(),{data:r,isLoading:c}=F(),{data:s,isLoading:f}=V(),[n,l]=g.useState([]),[o,m]=g.useState("lookingFor"),x=d=>(n.length===0?$:n).includes(d.rarity),j=d=>{if(!s)throw new Error("populateCards called before collection loaded");const v=I(d),C=s.get(d)?.amount_owned??0;return{...v,amount_owned:C}},h=g.useMemo(()=>r&&s&&R(s,r.trade_rarity_settings).map(j),[s,r]),y=g.useMemo(()=>h?.filter(x),[h,n]),p=g.useMemo(()=>r&&s&&z(s,r.trade_rarity_settings).map(j),[s,r]),b=g.useMemo(()=>p?.filter(x),[p,n]);if(c||f)return e.jsx("div",{className:"mx-auto mt-12 animate-spin rounded-full size-12 border-4 border-white border-t-transparent"});if(!i||!r)return e.jsx(Ke,{});if(!y||!b)return e.jsx("p",{className:"text-xl text-center py-8",children:"Something went wrong"});const a=()=>{let d="";r?.is_public&&(d+=`${t("publicTradePage")} https://tcgpocketcollectiontracker.com/#/trade/${r?.friend_id}
`),r?.username&&(d+=`${t("friendID")} ${r.friend_id} (${r.username})

`),d+=`${t("lookingForCards")}
`;const v=y.sort((u,S)=>{const G=u.expansion.localeCompare(S.expansion);return G!==0?G:u.rarity.localeCompare(S.rarity)});for(let u=0;u<v.length;u++)(u>0?v[u-1].expansion:"")!==v[u].expansion&&(d+=`
${v[u].set_details}:
`),d+=`${v[u].rarity} ${v[u].card_id} - ${v[u].name}
`;const C=y.map(u=>u.rarity);d+=`

${t("forTradeCards")}
`;const k=b.filter(u=>C.includes(u.rarity)).sort((u,S)=>u.rarity.localeCompare(S.rarity));for(let u=0;u<k.length;u++)(u>0?k[u-1].expansion:"")!==k[u].expansion&&(d+=`
${k[u].set_details}:
`),d+=`${k[u].rarity} ${k[u].card_id} - ${k[u].name}
`;return d},_=async()=>{const d=a();U({title:t("copiedInClipboard"),variant:"default",duration:3e3}),await navigator.clipboard.writeText(d)};return e.jsx(Ie,{cards:o==="lookingFor"?y:b,render:d=>e.jsx(Fe,{card:d,editable:!1}),children:e.jsxs("div",{className:"flex flex-wrap gap-2 mx-2 mb-2",children:[e.jsx(ke,{options:We,value:o,onChange:m,show:t}),e.jsx(Se,{options:$,value:n,onChange:l,show:Ee,asChild:!0}),e.jsx(N,{variant:"outline",onClick:_,children:t("copyToClipboard")})]})})}function Ze(){const{t}=T(["trade-matches","common"]),i=g.useRef(null),[r,c]=g.useState(""),[s,f]=g.useState(),[n,l]=g.useState(!1),o=g.useMemo(()=>Le({search:r,rarity:[...$]},new Map),[r]),{data:m,isLoading:x,isError:j}=fe(n,s),h=Ae({getScrollElement:()=>i.current,count:o.length,getItemKey:p=>o[p].card_id,estimateSize:()=>32});if(!n)return e.jsxs("div",{className:"sm:w-sm mx-auto",children:[e.jsx(Re,{setValue:c}),e.jsx("div",{ref:i,className:"my-2 h-96 rounded border border-neutral-700 px-1 overflow-y-auto",children:e.jsx("ul",{style:{height:`${h.getTotalSize()}px`},className:"relative",children:h.getVirtualItems().map(p=>{const b=o[p.index];return e.jsx("button",{type:"button",className:"absolute top-0 left-0 w-full cursor-pointer",style:{height:`${p.size}px`,transform:`translateY(${p.start}px)`},onClick:()=>f(a=>a===b.internal_id?void 0:b.internal_id),children:e.jsx(L,{className:`w-full ${s===b.internal_id&&"bg-green-900"} hover:bg-neutral-600`,card_id:b.card_id})},p.key)})})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{className:"w-1/2",disabled:!s,onClick:()=>{l(!0)},children:s?`Search ${I(s)?.name}`:"Select card to search"}),e.jsx(N,{className:"w-1/2",onClick:()=>{f(void 0),l(!0)},children:"Search all cards"})]})]});if(x)return e.jsxs("p",{className:"text-xl text-center py-8",children:[t("common:loading"),e.jsx("br",{}),t("longOperation")]});if(j||!m)return e.jsx("p",{className:"text-xl text-center py-8",children:t("common:error")});if(m.length===0)return e.jsx("p",{className:"text-xl text-center py-8",children:t("noTradePartners")});const y=s?`?friend_card=${s}`:"";return e.jsx("div",{className:"flex flex-col gap-4",children:m.map(p=>e.jsxs("div",{className:"max-w-md w-full flex justify-between items-center mx-auto px-4",children:[e.jsx("p",{className:"mr-2",children:p.username}),e.jsx(B,{to:`/trade/${p.friend_id}${y}`,children:e.jsxs(N,{variant:"outline",className:"my-auto",children:[t("viewTradePartner",{tradeMatches:p.trade_matches}),e.jsx(D,{})]})})]},p.friend_id))})}const Je=({row:t,selectedTradeId:i,setSelectedTradeId:r})=>{const{t:c}=T("trade-matches"),{data:s}=F();if(!s)return null;const f=t.offering_friend_id===s.friend_id?t.offer_card_id:t.receiver_card_id,n=t.offering_friend_id===s.friend_id?t.receiver_card_id:t.offer_card_id;function l(m){i===m.id?r(void 0):r(m.id)}const o=m=>{const x={offered:{icon:m.offering_friend_id===s.friend_id?"→":"←",color:"bg-amber-600"},accepted:{icon:"↔",color:"bg-lime-600"},declined:{icon:"X",color:"bg-stone-600"},finished:{icon:"✓",color:"bg-indigo-600"}};return e.jsxs("div",{className:"flex items-center",children:[e.jsx(H,{id:`tooltip-${m.id}`}),e.jsx("span",{className:`rounded-full text-center w-7 md:w-9 ${x[m.status].color}`,"data-tooltip-id":`tooltip-${m.id}`,"data-tooltip-content":c(`status.${m.status}`),children:x[m.status].icon})]})};return e.jsxs("li",{className:`flex cursor-pointer rounded gap-1 md:gap-4 p-1 ${i===t.id&&"bg-green-900"} hover:bg-neutral-500`,onClick:()=>l(t),children:[o(t),e.jsxs("div",{className:"flex flex-col sm:flex-row w-full justify-between gap-1 md:gap-4",children:[e.jsx(L,{className:"sm:w-1/2",card_id:f,increment:-1}),e.jsx(L,{className:"sm:w-1/2",card_id:n,increment:1})]})]})};function Qe({trades:t,viewHistory:i}){const{t:r}=T("trade-matches"),{toast:c}=q(),{data:s}=F(),{data:f=new Map}=V(),n=xe();function l(a){return a.offering_friend_id===s?.friend_id&&!a.offerer_ended||a.receiving_friend_id===s?.friend_id&&!a.receiver_ended}const o=i?t.filter(a=>!l(a)):t.filter(l),[m,x]=g.useState(void 0),j=pe();if(!s)return null;const h=(a,_)=>{const d=he(a);return{card_id:a,internal_id:d,amount_owned:(f.get(d)?.amount_owned??0)+_}},y=async a=>{if(a.offer_card_id!==a.receiver_card_id)if(a.offering_friend_id===s.friend_id){const _=[h(a.offer_card_id,-1),h(a.receiver_card_id,1)];n.mutate({updates:_}),c({title:r("collectionUpdated"),variant:"default"})}else if(a.receiving_friend_id===s.friend_id){const _=[h(a.offer_card_id,1),h(a.receiver_card_id,-1)];n.mutate({updates:_}),c({title:r("collectionUpdated"),variant:"default"})}else console.log(a,"can't match friend id")},p=a=>{const _=async C=>{j.mutate({id:a.id,trade:{status:C}}),x(a.id),O(`Updated trade: ${C}`)},d=async()=>{const C=a.offering_friend_id===s.friend_id?{offerer_ended:!0}:a.receiving_friend_id===s.friend_id?{receiver_ended:!0}:null;if(C===null){console.log(a," doesn't match your friend_id");return}j.mutate({id:a.id,trade:C}),x(void 0),O("Updated trade: ended")},v=a.offering_friend_id===s.friend_id&&a.offerer_ended||a.receiving_friend_id===s.friend_id&&a.receiver_ended;switch(a.status){case"offered":return e.jsxs(e.Fragment,{children:[a.receiving_friend_id===s.friend_id&&e.jsx(N,{type:"button",onClick:async()=>_("accepted"),children:r("actionAccept")}),e.jsx(N,{type:"button",onClick:async()=>_("declined"),children:a.receiving_friend_id===s.friend_id?r("actionDecline"):r("actionCancel")})]});case"accepted":return e.jsxs(e.Fragment,{children:[e.jsx(N,{type:"button",onClick:async()=>_("finished"),children:r("actionComplete")}),e.jsx(N,{type:"button",onClick:async()=>_("declined"),children:r("actionCancel")})]});case"declined":return v?null:e.jsx(N,{type:"button",onClick:d,children:r("actionHide")});case"finished":return v?null:e.jsxs(e.Fragment,{children:[e.jsx(N,{type:"button",onClick:async()=>{await y(a),await d()},children:r("actionUpdate")}),e.jsx(N,{type:"button",onClick:d,children:r("actionHide")})]});default:return console.log(`Unknown trade status ${a.status}`),null}},b=o.find(a=>a.id===m);return o.length===0?null:e.jsxs("div",{className:"rounded-lg border-1 border-neutral-700 border-solid p-1 sm:p-2",children:[e.jsxs("div",{className:"hidden sm:flex px-1",children:[e.jsx("div",{className:"w-9"}),e.jsx("h4",{className:"text-lg font-medium w-1/2 ml-8",children:r("youGive")}),e.jsx("h4",{className:"text-lg font-medium w-1/2 ml-8",children:r("youReceive")})]}),e.jsx("ul",{className:"flex flex-col gap-2 sm:gap-0",children:o.toSorted((a,_)=>a.created_at>_.created_at?-1:1).map(a=>e.jsx(Je,{row:a,selectedTradeId:m,setSelectedTradeId:x},a.id))}),b&&e.jsx("div",{className:"flex gap-4 text-center items-center mt-2",children:p(b)})]})}function Xe({friendId:t}){const{t:i}=T("trade-matches"),{data:r}=te(),{data:c}=ee(t),[s,f]=g.useState(!1);if(!r)return null;const n=r.filter(l=>l.offering_friend_id===t||l.receiving_friend_id===t);return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1 mx-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-md",children:i("tradingWith")}),e.jsxs("span",{className:"text-md font-bold",children:[" ",c?.username||"loading"," "]}),c&&e.jsx(re,{friendId:c.friend_id,showFriendId:!1,className:"ml-1"})]}),e.jsxs("span",{className:"flex gap-4",children:[e.jsxs("label",{htmlFor:`history-${t}`,className:"my-auto flex items-center",children:[i("viewHistory"),e.jsx(ae,{id:`history-${t}`,className:"ml-2 my-auto",checked:s,onCheckedChange:f})]}),e.jsx(B,{to:`/trade/${t}`,children:e.jsxs(N,{variant:"outline",className:"my-auto",children:[i("openTradeWith"),e.jsx(D,{})]})})]})]}),c!==null&&e.jsx(Qe,{trades:n,viewHistory:s})]})}function qe(){const{t}=T("trade-matches"),{data:i}=F(),{data:r}=te();if(!r||!i)return null;if(r.length===0)return e.jsx("p",{children:t("noTradeOffers")});const c=tt(r,i.friend_id),s=Object.fromEntries(Object.entries(c).map(([l,o])=>[l,+(et(o,i.friend_id).length===0)])),f=Object.fromEntries(Object.entries(c).map(([l,o])=>[l,Math.max(...o.map(m=>new Date(m.updated_at).getTime()))])),n=Object.keys(c).toSorted((l,o)=>s[l]!==s[o]?s[l]-s[o]:f[o]-f[l]);return e.jsx("div",{className:"flex flex-col items-center mx-auto gap-6 sm:px-4 mb-12 w-full",children:n.map(l=>e.jsx(Xe,{friendId:l},l))})}function et(t,i){return t.filter(r=>r.offering_friend_id===i?!r.offerer_ended:!r.receiver_ended)}function tt(t,i){return Object.groupBy(t,r=>r.offering_friend_id===i?r.receiving_friend_id:r.receiving_friend_id===i?r.offering_friend_id:(console.log("Fetched row does not match user friend_id",r),"undefined"))}function rt(){const{t}=T("trade-matches"),{data:i}=F(),r=ge(),c=K({is_active_trading:be(),trade_rarity_settings:je(K({rarity:_e(ve),to_collect:Z().min(0).max(100),to_keep:Z().min(0).max(100)}))}),s=ze({resolver:Ue(c),values:{is_active_trading:i?.is_active_trading||!1,trade_rarity_settings:i?.trade_rarity_settings||[]}}),f=async n=>{r.mutate({username:i?.username,is_active_trading:n.is_active_trading,trade_rarity_settings:n.trade_rarity_settings},{onSuccess:()=>U({title:t("accountSaved"),variant:"default"}),onError:l=>{console.error("error saving account",l),U({title:t("errorSavingAccount"),variant:"destructive"})}})};return!i||!i.username?e.jsx(se,{className:"mb-8 border-1 border-neutral-700 shadow-none",children:t("noAccount")}):e.jsxs("div",{children:[e.jsx(He,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(f),className:"rounded-md border-1 border-neutral-700 space-y-2 p-4 mx-auto max-w-xl",children:[e.jsx("h2",{className:"text-xl text-center mb-6",children:"Trading settings"}),e.jsx(E,{control:s.control,name:"is_active_trading",render:({field:n})=>e.jsx(M,{className:"flex flex-col items-start",children:e.jsx(P,{children:e.jsxs(Ve,{htmlFor:"active-trading",className:"flex",children:[t("isActiveTrading"),e.jsx(ae,{id:"active-trading",className:"ml-2",checked:n.value,onCheckedChange:n.onChange})]})})})}),e.jsxs("div",{className:"grid grid-cols-3 gap-y-2 gap-x-8 w-fit mt-6",children:[e.jsx("span",{children:t("rarity")}),e.jsxs("span",{className:"flex items-center",children:[t("toCollect"),e.jsx(H,{id:"to-collect"}),e.jsx(Y,{className:"size-4 ml-1","data-tooltip-id":"to-collect","data-tooltip-content":t("toCollectTooltip")})]}),e.jsxs("span",{className:"flex items-center",children:[t("toKeep"),e.jsx(H,{id:"to-collect"}),e.jsx(Y,{className:"size-4 ml-1","data-tooltip-id":"to-collect","data-tooltip-content":t("toKeepTooltip")})]}),s.watch("trade_rarity_settings").map((n,l)=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-1",children:n.rarity},`label-${n.rarity}`),e.jsx(E,{control:s.control,name:`trade_rarity_settings.${l}.to_collect`,render:({field:o})=>e.jsx(M,{className:"flex-1",children:e.jsx(P,{children:e.jsx(W,{className:"w-24",type:"number",...o})})})},`to-collect-${n.rarity}`),e.jsx(E,{control:s.control,name:`trade_rarity_settings.${l}.to_keep`,render:({field:o})=>e.jsx(M,{className:"flex-1",children:e.jsx(P,{children:e.jsx(W,{className:"w-24",type:"number",...o})})})},`to-keep-${n.rarity}`)]}))]}),e.jsxs(N,{type:"submit",className:"block ml-auto mt-4",disabled:r.isPending,children:[t("save"),r.isPending&&e.jsx("div",{className:"ml-2 inline-block animate-spin rounded-full size-4 border-2 border-black border-t-transparent"})]})]})}),e.jsx(Be,{className:"mt-4 mx-auto w-fit"})]})}function jt(){const{t}=T("trade-matches"),i=Ne(),r=ye(),c=i.pathname.split("/").pop()||"offers";return g.useEffect(()=>{i.pathname==="/trade"&&r("/trade/offers")},[i.pathname,r]),e.jsxs(we,{className:"flex flex-col mx-auto max-w-[900px]",value:c,onValueChange:s=>r(`/trade/${s}`),children:[e.jsxs($e,{className:"gap-4 mb-6 rounded-lg border-b-1 border-neutral-700 border-solid dark:bg-transparent pb-2",children:[e.jsx(A,{className:"text-md",value:"cards",children:t("tabCards")}),e.jsx(A,{className:"text-md",value:"offers",children:t("tabOffers")}),e.jsx(A,{className:"text-md",value:"matches",children:t("tabMatches")}),e.jsx(A,{className:"text-md",value:"settings",children:t("tabSettings")})]}),e.jsxs(Ce,{children:[e.jsx(w,{path:"/",element:e.jsx(Te,{to:"/trade/offers",replace:!0})}),e.jsx(w,{path:"cards",element:e.jsx(Ye,{})}),e.jsx(w,{path:"offers",element:e.jsx(qe,{})}),e.jsx(w,{path:"matches",element:e.jsx(Ze,{})}),e.jsx(w,{path:"settings",element:e.jsx(rt,{})}),e.jsx(w,{path:":friendId",element:e.jsx(Ge,{})})]})]})}export{jt as default};
