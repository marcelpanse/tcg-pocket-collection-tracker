import{e as y,r as n,U as k,C as v,j as e,f as I,t as _,q as E,B as u,M}from"./index-BhLyGxYW.js";import{F}from"./FancyCard-CvWz04Pq.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],B=y("plus",U),l={};function O({card:a,onImageClick:m,className:x,editable:p=!0}){const{user:r,setIsLoginDialogOpen:c}=n.use(k),{setSelectedCardId:C,updateCards:h}=n.use(v),[s,g]=n.useState(a.amount_owned||0),[f,w]=n.useState(0);n.useEffect(()=>{w(s)},[s]);const i=n.useCallback(async o=>{if(!r?.user.email)throw new Error("Card.tsx:updateCardCount: User not logged in");const t=a.card_id,d=Math.max(0,o);g(d),l[t]&&window.clearTimeout(l[t]),l[t]=window.setTimeout(async()=>{if(!r||!r.user.email)throw new Error("Card.tsx:updateCardCount: User not logged in");await h([{card_id:t,amount_owned:d}])},1e3)},[r,s]),j=n.useCallback(async()=>{if(!r){c(!0);return}await i(s+1)},[i]),N=n.useCallback(async()=>{if(!r){c(!0);return}await i(s-1)},[i]),b=async o=>{const t=o.target.value===""?0:Number.parseInt(o.target.value,10);!Number.isNaN(t)&&t>=0&&await i(t)};return a.linkedCardID?null:e.jsxs("div",{className:I("group flex flex-col items-center rounded-lg",x),children:[e.jsx("button",{type:"button",className:"cursor-pointer",onClick:()=>{C(a.card_id),m?.()},children:e.jsx(F,{card:a,selected:s>0})}),e.jsxs("p",{className:"w-full min-w-0 text-[12px] pt-2 text-center font-semibold leading-tight",children:[e.jsx("span",{className:"block md:inline",children:a.card_id}),e.jsx("span",{className:"hidden md:inline",children:" â€“ "}),e.jsx("span",{className:"block md:inline truncate",children:_(a,E.language)})]}),e.jsx("div",{className:"flex items-center gap-x-1",children:p?e.jsxs(e.Fragment,{children:[e.jsx(u,{variant:"ghost",size:"icon",onClick:N,className:"rounded-full",tabIndex:-1,children:e.jsx(M,{})}),e.jsx("input",{min:"0",max:"99",type:"text",value:f,onChange:b,className:"w-7 text-center border-none rounded",onFocus:o=>o.target.select()}),e.jsx(u,{variant:"ghost",size:"icon",className:"rounded-full",onClick:j,tabIndex:-1,children:e.jsx(B,{})})]}):e.jsx("span",{className:"mt-1",children:s})})]})}export{O as C,B as P};
