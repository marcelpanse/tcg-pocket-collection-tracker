import{e as be,j as e,t as $,q as I,f as ae,u as A,r as x,C as G,B as k,D as ne,v as re,x as le,y as ie,M as Ce,z as ye,A as oe,U as ve,E as Ne,F as ke,G as Se,s as R,H as Te,J as ce,K as Me,S as _e,L as Fe,N as Ae,O as Be,Q as Ie,T as De,V as Le}from"./index-WQKbG1Zw.js";import{E as Z,D as Ee,u as He}from"./index-CkN6G2Q2.js";import{T as de,a as ue,b as E,C as Pe}from"./tabs-CGxYSmpk.js";import{F as K}from"./FancyCard-Bx3WvU2i.js";import{A as xe,b as he,a as Re}from"./alert-BxXnbYc6.js";import{P as $e}from"./Card-BtNnxeXT.js";import{M as W,C as me,N as J}from"./NumberFilter-CejTz7Bi.js";import{T as ze,a as Y,P as Oe,b as Ue,c as qe,R as X,u as Ve}from"./useWindowDimensionsHook-ZrvhfW69.js";import{S as ee}from"./SearchInput-BdOeDb6y.js";import{S as We}from"./siren--Lf38VyI.js";import"./index-CLFRXTHx.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Ke=be("trophy",Ge);function Qe({card:a,onSelect:n,selected:t}){const l=()=>{n(a.card_id,!t)};return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(K,{card:a,selected:t,setIsSelected:l,size:"small"}),e.jsx("p",{className:"text-xs text-center mt-1",children:$(a,I.language)})]})}const Ze=({children:a,className:n})=>e.jsx("div",{className:ae("max-h-[300px] overflow-y-auto border border-gray-300 rounded-md",n),style:{maxHeight:"300px"},children:a});function Je({filteredCards:a}){const{t:n}=A("bulk-update"),{updateCards:t}=x.use(G),[l,d]=x.useState(!1),[r,u]=x.useState(0),[o,m]=x.useState({}),[_,g]=x.useState(!1),[y,C]=x.useState(!1),w=async(c,p)=>{await t(c.map(b=>({card_id:b,amount_owned:p})))},j=a.length===0,S=x.useMemo(()=>a.reduce((c,p)=>(c.some(b=>b.card_id===p.card_id)||c.push(p),c),[]),[a]);x.useEffect(()=>{if(l){const c=S.reduce((p,b)=>(p[b.card_id]=!0,p),{});m(c)}l||C(!1)},[l]);const T=(c,p)=>{m(b=>({...b,[c]:p}))},v=()=>{const c=S.reduce((p,b)=>(p[b.card_id]=!0,p),{});m(c)},D=()=>{const c=S.reduce((p,b)=>(p[b.card_id]=!1,p),{});m(c)},F=Object.values(o).filter(c=>c).length,P=()=>{r!==null&&(r>0?u(c=>(c||0)-1):r===0&&u(0)),C(!0)},z=()=>{u(c=>c?c+1:1),C(!0)},O=c=>{const p=c.target.value.trim();if(p==="")u(0);else{const b=Number(p);Number.isNaN(b)?u(0):u(b<0?0:b)}C(!0)},U=async()=>{g(!0);const c=Object.entries(o).filter(([p,b])=>b).map(([p])=>p);c.length>0&&(await w(c,r),d(!1),g(!1))};return e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"hidden sm:block",variant:"outline",onClick:()=>d(!0),disabled:j,children:n("buttonTitle")}),e.jsx(ne,{open:l,onOpenChange:d,children:e.jsxs(re,{className:"max-w-2xl",children:[e.jsx(le,{children:e.jsx(ie,{children:n("title")})}),e.jsx(xe,{variant:"destructive",children:e.jsxs(he,{children:[n("alert.beforeCount"),e.jsxs("strong",{children:[e.jsx("span",{style:{fontSize:"1.25rem",color:"#f3f4f6",padding:"0.25rem 0.5rem",borderRadius:"0.375rem",margin:"0 0.25rem"},children:F})," ",n("alert.cards")]})," ",n("alert.afterCount"),e.jsx("strong",{children:n("alert.warning")})]})}),e.jsxs("div",{className:"flex gap-2 justify-between",children:[e.jsx(k,{variant:"outline",onClick:D,children:n("deselectAll")}),e.jsx(k,{variant:"outline",onClick:v,children:n("selectAll")})]}),e.jsx(Ze,{className:"h-64 rounded-md border p-4",children:e.jsx("div",{className:"grid grid-cols-5 gap-2",children:S.map(c=>e.jsx(Qe,{card:c,onSelect:T,selected:o[c.card_id]},c.card_id))})}),e.jsxs("div",{className:"flex items-center gap-x-1 justify-center",children:[e.jsx(k,{variant:"ghost",size:"icon",onClick:P,disabled:r===null||r===0,className:"rounded-full",children:e.jsx(Ce,{size:14})}),e.jsx("input",{type:"text",min:"0",value:r??0,onChange:O,placeholder:n("enterAmount"),className:"w-7 text-center border-none rounded",onFocus:c=>c.target.select()}),e.jsx(k,{variant:"ghost",size:"icon",onClick:z,className:"rounded-full",children:e.jsx($e,{size:14})})]}),e.jsxs(ye,{children:[e.jsx(k,{variant:"outline",onClick:()=>d(!1),children:n("cancel")}),e.jsxs(k,{onClick:U,disabled:F===0||_||!y,variant:"default",children:[_&&e.jsxs("svg",{"aria-hidden":"true",className:"w-8 h-8 text-gray-200 animate-spin dark:text-gray-600 fill-blue-600",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),e.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),n(_?"batchProcessing":"batchUpdate")]})]})]})})]})}const te=({ownedFilter:a,setOwnedFilter:n,className:t})=>{const{t:l}=A("owned-filter");return e.jsx(de,{value:a,onValueChange:d=>n(d),className:t,children:e.jsxs(ue,{className:"w-full flex-wrap h-auto lg:h-10 bg-neutral-50 border-1 border-neutral-700 rounded-md",children:[e.jsx(E,{value:"all",children:l("all")}),e.jsx(E,{value:"missing",children:l("missing")}),e.jsx(E,{value:"owned",children:l("owned")})]})})},se=({value:a,onChange:n,expansion:t,className:l})=>{const{t:d}=A("common/packs");let r=oe(t)?.packs;const u=!(r===void 0||t==="P-A");return(r===void 0||r.length<=1)&&(r=[]),t==="all"||t==="P-A"?null:e.jsx(de,{value:a,onValueChange:n,className:ae("h-auto",l),children:e.jsxs(ue,{className:"h-full flex-wrap w-full border-1 border-neutral-700 rounded-md flex-row justify-start content-start",children:[e.jsx(E,{value:"all",children:d("all")}),r.filter(o=>o.name!=="everypack").map(o=>e.jsx(E,{value:o.name,children:d(o.name)},`tab_trigger_${o.name}`)),u&&e.jsx(E,{value:"missions",children:d("missions")})]})})};function Ye(a,n){if(a.length===0)return n.length;if(n.length===0)return a.length;let t=Array(a.length+1).fill(0).map((d,r)=>r),l=Array(a.length+1);for(let d=1;d<=n.length;d++){l[0]=d;for(let r=1;r<=a.length;r++){const u=a[r-1]===n[d-1]?0:1;l[r]=Math.min(t[r]+1,l[r-1]+1,t[r-1]+u)}[t,l]=[l,t]}return t[a.length]}const Xe=({allTextSearch:a,setAllTextSearch:n})=>{const{t}=A("search-input");return e.jsxs("div",{className:"flex items-center space-x-2 text-white/50",children:[e.jsx("input",{type:"checkbox",id:"checkbox",checked:a,onChange:()=>n(!a),className:"w-4 h-4"}),e.jsx("label",{htmlFor:"checkbox",className:"text-xs",children:t("allTextLabel")}),e.jsx(W,{id:"allTextSearch",style:{maxWidth:"300px",whiteSpace:"normal"},clickable:!0}),e.jsx(me,{className:"h-4 w-4","data-tooltip-id":"allTextSearch","data-tooltip-content":t("allTextTooltip")})]})},et=["grass","fire","water","lightning","psychic","fighting","darkness","metal","dragon","colorless","trainer",""],tt=({cardTypeFilter:a,setCardTypeFilter:n,collapse:t})=>{const{t:l}=A("card-type-filter"),d=x.useMemo(()=>e.jsxs(ze,{variant:"outline",type:"multiple",size:"sm",value:a,onValueChange:r=>{n(r)},className:`justify-center shadow-none border-1 border-neutral-700 rounded-md flex-wrap ${t?"flex-col":"flex-row"}`,children:[et.filter(r=>r!==""&&r!=="trainer").map(r=>e.jsx(Y,{value:r,"aria-label":r,className:"text-gray-400 hover:text-gray-500 px-1",children:e.jsx("img",{src:`/images/energy/${r}.webp`,alt:r,className:"h-4"})},r)),e.jsx(Y,{value:"trainer","aria-label":"trainer",className:"text-gray-400 hover:text-gray-500 px-1",children:"T"})]}),[a,t]);return t?e.jsxs(Oe,{children:[e.jsx(Ue,{asChild:!0,children:e.jsxs(k,{variant:"outline",children:[l("filters")," (",a.length,")"]})}),e.jsx(qe,{className:"w-32",children:d})]}):d},st=({sortBy:a,setSortBy:n})=>{const{t}=A("sort-by");return e.jsx("div",{className:"px-3 py-1 border-1 border-neutral-700 rounded-md",children:e.jsxs("label",{className:"flex items-center gap-x-2 text-white/50 text-sm",children:[e.jsx("h2",{children:t("sortBy")}),e.jsxs("select",{value:a,onChange:l=>n(l.target.value),className:"p-1",children:[e.jsx("option",{value:"default",className:"text-black",children:t("default")}),e.jsx("option",{value:"recent",className:"text-black",children:t("recent")}),e.jsx("option",{value:"expansion-newest",className:"text-black",children:t("expansion-newest")})]})]})})},at=({children:a,cards:n,filters:t,setFilters:l,onFiltersChanged:d,onChangeToMissions:r,visibleFilters:u,filtersDialog:o,batchUpdate:m,share:_})=>{const{t:g}=A(["pages/collection"]),{setIsProfileDialogOpen:y}=x.useContext(ve),[C,w]=x.useState(I.language),j=s=>l(h=>({...h,search:s})),S=s=>l(h=>({...h,allTextSearch:s})),T=s=>l(h=>({...h,expansion:s})),v=s=>l(h=>({...h,pack:s})),D=s=>l(h=>({...h,cardType:s})),F=s=>l(h=>({...h,rarity:s})),P=s=>l(h=>({...h,owned:s})),z=s=>l(h=>({...h,sortBy:s})),O=s=>l(h=>({...h,minNumber:s})),U=s=>l(h=>({...h,maxNumber:s})),c=s=>l(h=>({...h,deckbuildingMode:s})),[p,b]=x.useState(null),pe=s=>t.rarity.length===0?!0:s.rarity!==""&&t.rarity.includes(s.rarity),fe=s=>t.cardType.length===0?!0:s.card_type.toLowerCase()==="trainer"?t.cardType.includes("trainer"):s.energy!==""&&t.cardType.includes(s.energy.toLowerCase()),L=x.useMemo(()=>{if(!n)return null;let s=Ne;if(t.deckbuildingMode&&(s=s.filter(i=>ke.includes(i.rarity)||i.rarity===""||i.rarity==="P")),t.expansion!=="all"&&(s=s.filter(i=>i.expansion===t.expansion)),t.pack==="missions"){s=[];let i=Se.get(t.expansion)?.missions||null;i&&(t.owned==="owned"?i=i.filter(f=>f.completed):t.owned==="missing"&&(i=i.filter(f=>!f.completed))),b(i)}else b(null),t.pack!=="all"&&(s=s.filter(i=>i.pack===t.pack||i.pack==="everypack"));if(t.owned!=="all"&&(t.owned==="owned"?s=s.filter(i=>n.find(f=>f.card_id===i.card_id&&f.amount_owned>0)):t.owned==="missing"&&(s=s.filter(i=>!n.find(f=>f.card_id===i.card_id&&f.amount_owned>0)))),t.sortBy==="recent")s=[...s].sort((i,f)=>{const M=n.find(B=>B.card_id===i.card_id)?.updated_at,N=n.find(B=>B.card_id===f.card_id)?.updated_at;return M&&N?new Date(N).getTime()-new Date(M).getTime():M&&!N?-1:1});else if(t.sortBy==="expansion-newest"){const i=[...R].reverse().slice(1).concat(R[R.length-1]);s=[...s].sort((f,M)=>{const N=i.findIndex(H=>H.id===f.expansion),B=i.findIndex(H=>H.id===M.expansion);return N!==B?N-B:f.card_id.localeCompare(M.card_id,I.language||"en",{numeric:!0})})}s=s.filter(pe),s=s.filter(fe),t.search&&(s=s.filter(f=>{const M=$(f,I.language).toLowerCase(),N=t.search.toLowerCase();let B=!1;if(t.allTextSearch){const q=f.ability.name?.toLowerCase(),je=f.ability.effect?.toLowerCase();B=q&&q!=="no ability"&&(q.includes(N)||je.includes(N))||f.attacks.some(V=>V.name?.toLowerCase().includes(N)||V.effect?.toLowerCase()!=="no effect"&&V.effect?.toLowerCase()?.includes(N))}const H=M.includes(N),ge=Ye(M,N)<=2,we=f.card_id.toLowerCase().includes(N);return B||H||ge||we}));const h=new Map((n||[]).map(i=>[i.card_id,i.amount_owned]));for(const i of s)i.linkedCardID?i.amount_owned=0:t.deckbuildingMode?i.amount_owned=i.alternate_versions.reduce((f,M)=>f+(h.get(M.card_id)||0),0):i.amount_owned=h.get(i.card_id)||0;return s=s.filter(i=>(i.amount_owned||0)>=t.minNumber),t.maxNumber!==100&&(s=s.filter(i=>(i.amount_owned||0)<=t.maxNumber)),s},[n,t,C]);x.useEffect(()=>{d(L);const s=h=>{w(h)};return I.on("languageChanged",s),()=>{I.off("languageChanged",s)}},[L]),x.useEffect(()=>{r(p)},[p]);function Q(s){T(s),v("all")}return e.jsxs("div",{id:"filterbar",className:"flex flex-col gap-x-2 flex-wrap",children:[a,u?.expansions&&e.jsxs("div",{className:"flex gap-x-2 px-4 mb-2",children:[e.jsx(Z,{value:t.expansion,onChange:Q}),e.jsx(se,{className:"w-[440px]",value:t.pack,onChange:v,expansion:t.expansion})]}),e.jsxs("div",{className:"gap-2 flex-row gap-y-1 px-4 flex",children:[u?.search&&e.jsx(ee,{className:"w-full sm:w-32",setSearchValue:j}),u?.owned&&e.jsx(te,{ownedFilter:t.owned,setOwnedFilter:P}),u?.rarity&&e.jsx(X,{rarityFilter:t.rarity,setRarityFilter:F,collapse:!0}),o&&e.jsxs(ne,{children:[e.jsx(Te,{asChild:!0,children:e.jsx(k,{variant:"outline",children:g("filters.allFilters")})}),e.jsxs(re,{className:"border-1 border-neutral-700 shadow-none max-h-[90vh] overflow-y-auto content-start",children:[e.jsx(le,{children:e.jsx(ie,{children:g("filters.filtersCount",{count:(L||[]).filter(s=>!s.linkedCardID).length})})}),e.jsxs("div",{className:"flex flex-col gap-3",children:[o.search&&e.jsx(ee,{className:"w-full",setSearchValue:j}),o.allTextSearch&&e.jsx(Xe,{allTextSearch:t.allTextSearch,setAllTextSearch:S}),o.expansions&&e.jsx(Z,{value:t.expansion,onChange:Q}),o.pack&&e.jsx(se,{className:"w-full",value:t.pack,onChange:v,expansion:t.expansion}),o.rarity&&e.jsx(X,{rarityFilter:t.rarity,setRarityFilter:F}),o.cardType&&e.jsx(tt,{cardTypeFilter:t.cardType,setCardTypeFilter:D}),o.owned&&e.jsx(te,{className:"w-full",ownedFilter:t.owned,setOwnedFilter:P}),o.sortBy&&e.jsx(st,{sortBy:t.sortBy,setSortBy:z}),o.amount&&e.jsxs(e.Fragment,{children:[e.jsx(J,{numberFilter:t.minNumber,setNumberFilter:O,options:[0,1,2,3,4,5,6,7,8,9],labelKey:"minNum"}),e.jsx(J,{numberFilter:t.maxNumber,setNumberFilter:U,options:[0,1,2,3,4,5,6,7,8,9,10,100],labelKey:"maxNum"})]}),o.deckBuildingMode&&e.jsx(Ee,{deckbuildingMode:t.deckbuildingMode,setDeckbuildingMode:c}),e.jsx(k,{variant:"outline",className:"!text-red-700",onClick:()=>l({search:"",expansion:"all",pack:"all",cardType:[],rarity:[],owned:"all",sortBy:"expansion-newest",minNumber:0,maxNumber:100,deckbuildingMode:!1,allTextSearch:!1}),children:g("filters.clear")})]})]})]}),m&&e.jsx(Je,{filteredCards:L||[],disabled:!L||L.length===0}),_&&e.jsx(k,{variant:"outline",onClick:()=>y(!0),children:g("filters.share")})]})]})};function nt({mission:a}){const{width:n}=Ve(),{t}=A("common/packs"),{ownedCards:l,setSelectedCardId:d,setSelectedMissionCardOptions:r}=x.use(G);let u=5,o=Math.min(n,890)/5+120;n>600&&n<800?(u=4,o=n/3+50):n<=600&&(u=3,o=n/3+100);const m=x.useMemo(()=>{let g=!0;const y=a.requiredCards.flatMap(w=>{let j=l.reduce((T,v)=>{const D=w.options.find(F=>F===v.card_id);if(D)for(let F=0;F<v.amount_owned;F++)T.push({cardId:D,owned:!0,missionCardOptions:w.options});return T},[]);j.length>w.amount&&(j=j.slice(0,w.amount));const S=w.amount-j.length;for(let T=0;T<S;T++)j.push({cardId:w.options[0],owned:!1,missionCardOptions:w.options});return g=g&&S===0,j});a.completed=g;const C=[];for(let w=0;w<y.length;w+=u)C.push(y.slice(w,w+u));return C},[u]),_=o*m.length+72;return e.jsxs("div",{style:{height:`${_}px`},className:"relative w-full",children:[e.jsx("div",{style:{height:`${_}px`},className:"relative w-full",children:m.map((g,y)=>e.jsx("div",{style:{height:`${o}px`,transform:`translateY(${o*y+72}px)`},className:"absolute top-0 left-0 w-full",children:e.jsx("div",{className:"flex justify-start gap-x-3",children:g.map((C,w)=>{const j=ce(C.cardId);return j&&e.jsxs("div",{className:"group flex w-fit max-w-32 md:max-w-40 flex-col items-center rounded-lg cursor-pointer",children:[e.jsx("button",{type:"button",onClick:()=>C.owned?d(C.cardId):r(C.missionCardOptions),children:e.jsx(K,{card:j,selected:C.owned})}),e.jsxs("p",{className:"max-w-[130px] overflow-hidden text-ellipsis whitespace-nowrap font-semibold text-[12px] pt-2",children:[C.cardId," - ",$(j,I.language)]})]},`${a.name}__${w}`)})})},y))}),e.jsx("div",{style:{height:"72px"},className:"absolute top-0 left-0 w-full",children:e.jsxs("h2",{className:"flex items-center gap-x-4 mx-auto mt-10 w-full max-w-[900px] scroll-m-20 border-b-2 border-slate-600 pb-2 font-semibold text-md sm:text-lg md:text-2xl tracking-tight transition-colors first:mt-0",children:[a.name,e.jsx(W,{id:`rewardDescription${a.name}`,style:{maxWidth:"300px",whiteSpace:"normal",fontSize:16},clickable:!0}),e.jsx(Ke,{className:"h-6 w-6","data-tooltip-id":`rewardDescription${a.name}`,"data-tooltip-html":a.reward}),e.jsx(W,{id:`probability${a.name}`,style:{maxWidth:"300px",whiteSpace:"normal",fontSize:16},clickable:!0}),e.jsx(me,{className:"h-6 w-6","data-tooltip-id":`probability${a.name}`,"data-tooltip-html":a.completed?"Completed!":Me(a,m).filter(([g,y])=>g!=="everypack"&&y>0).map(([g,y])=>`${t(g)}: ${y.toFixed(2)}%`).join("<br/>")})]})},"header")]})}function rt({missions:a,resetScrollTrigger:n}){const t=x.useRef(null),[l,d]=x.useState("auto");return x.useLayoutEffect(()=>{const r=()=>{if(t.current){const u=document.querySelector("#header")?.offsetHeight||0,o=document.querySelector("#filterbar")?.offsetHeight||0,m=window.innerHeight-u-o;d(`${m}px`)}};return r(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}},[]),x.useEffect(()=>{t.current&&(t.current.scrollTop=0)},[n]),e.jsx("div",{ref:t,className:"overflow-y-auto mt-2 sm:mt-4 px-4 flex flex-col justify-start",style:{scrollbarWidth:"none",height:l},children:a.map(r=>e.jsx(nt,{mission:r},r.name))})}function lt({missionCardOptions:a,onClose:n}){const{t}=A(["common/sets","common/packs","pages/collection"]),l=a[0]||"",d=l.length>0?l.split("-")[0]:"Unknown",r=oe(d)||R[0],u=r.name;return e.jsx(_e,{open:!!a.length,onOpenChange:o=>{o||n()},children:e.jsxs(Fe,{className:"transition-all duration-300 ease-in-out border-slate-600 overflow-y-auto",children:[e.jsx(Ae,{children:e.jsx(Be,{children:a.length===1?t("missionDetail.eligibleCards-singular",{ns:"pages/collection",options:1}):t("missionDetail.eligibleCards-plural",{ns:"pages/collection",options:a.length})})}),t(u),a.map(o=>{const m=ce(o);return m&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"px-10 py-4 w-full",children:e.jsx(K,{card:m,selected:!1})}),e.jsxs("p",{className:"max-w-[130px] whitespace-nowrap font-semibold text-[12px] pt-2",children:[o," - ",$(m,I.language),e.jsx("br",{}),t("missionDetail.chanceFrom",{ns:"pages/collection",pack:t(m.pack,{ns:"common/packs"}),chance:Ie(r,m.pack,m).toFixed(2)})]})]})})]})})}function wt(){const{friendAccount:a,friendCollection:n}=De(),t=Le(),{t:l}=A(["pages/collection"]),d=He({query:"(max-width: 767px)"}),{ownedCards:r,selectedMissionCardOptions:u,setSelectedMissionCardOptions:o}=x.useContext(G),[m,_]=x.useState({search:"",expansion:"all",pack:"all",cardType:[],rarity:[],owned:"all",sortBy:"expansion-newest",minNumber:0,maxNumber:100,deckbuildingMode:!1,allTextSearch:!1}),[g,y]=x.useState(!1),[C,w]=x.useState(null),[j,S]=x.useState(null),T=n??r;return x.useEffect(()=>{y(!0);const v=setTimeout(()=>y(!1),100);return()=>clearTimeout(v)},[m]),e.jsxs("div",{className:"flex flex-col gap-y-1 mx-auto max-w-[900px]",children:[e.jsx(at,{cards:T,filters:m,setFilters:_,onFiltersChanged:v=>w(v),onChangeToMissions:v=>S(v),visibleFilters:{expansions:!d,allTextSearch:!d,search:!0,owned:!d,rarity:!d},filtersDialog:{expansions:!0,pack:!0,search:!0,owned:!0,sortBy:!0,rarity:!0,cardType:!0,amount:!0,deckBuildingMode:!0,allTextSearch:!0},batchUpdate:!!a,share:!0,children:e.jsx("div",{children:a&&e.jsxs(xe,{className:"mb-4 border-1 border-neutral-700 shadow-none",children:[e.jsx(We,{className:"h-4 w-4"}),e.jsx(Re,{children:l("publicCollectionTitle",{username:a?.username})}),e.jsx(he,{children:e.jsxs("div",{className:"flex items-center",children:[l("publicCollectionDescription"),e.jsx(k,{className:"mb-4",onClick:()=>t(`/trade/${a?.friend_id}`),children:l("showPossibleTrades")})]})})]})})}),e.jsx("div",{children:C&&!j&&e.jsx(Pe,{cards:C,resetScrollTrigger:g,showStats:!m.deckbuildingMode,extraOffset:24,editable:!m.deckbuildingMode&&!a})}),e.jsx("div",{children:j&&e.jsx(rt,{missions:j,resetScrollTrigger:g})}),j&&e.jsx(lt,{missionCardOptions:u,onClose:()=>o([])})]})}export{wt as default};
