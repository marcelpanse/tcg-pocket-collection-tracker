import{j as t}from"./query-vendor-DpGHCXpY.js";import{c as re,hg as ne,j as ae,v as oe,i as ce,gN as me,g6 as de,ff as fe,gq as ee,hh as ue,hi as pe,b as he,d as xe,A as je,B as se,gT as Z,hj as ge,hk as be}from"./index-MBvA3LEt.js";import{a as _e,F as z,b as De,u as Se,c as H,d as L,e as G,g as J,f as te}from"./form-C_pzOF83.js";import{f as Ne}from"./react-vendor-DjlsVz29.js";import{a as ve,S as Pe}from"./SocialShareButtons-BKDlL99B.js";import{u as Fe}from"./i18n-vendor-DDmeScd6.js";import{S as Ie}from"./siren-qn44L9sk.js";import"./charts-vendor-D-Ae2kUX.js";import"./supabase-vendor-CP3OYKhD.js";import"./ui-vendor-9yhwxkpr.js";import"./xlsx-vendor-De4COjWB.js";import"./index-5ziEWJdO.js";const qe=()=>{const e=re.c(87),K=Ne(),{data:a}=ne(),{data:o}=ae(),n=oe(),{isProfileDialogOpen:Q,setIsProfileDialogOpen:c}=ce(),{toast:M}=me(),{t:s}=Fe("edit-profile");let m,R;if(e[0]!==s){const l=de({username:ee().min(2,{message:s("usernameTooShort")}),friend_id:ee().regex(/^\d{16}$/,{message:s("friendIdInvalid")}),is_public:fe().optional()});R=Se,m=_e(l),e[0]=s,e[1]=m,e[2]=R}else m=e[1],R=e[2];const V=o?.username??"",W=o?.friend_id??"",X=o?.is_public??!1;let d;e[3]!==V||e[4]!==W||e[5]!==X?(d={username:V,friend_id:W,is_public:X},e[3]=V,e[4]=W,e[5]=X,e[6]=d):d=e[6];let U;e[7]!==m||e[8]!==d?(U={resolver:m,values:d},e[7]=m,e[8]=d,e[9]=U):U=e[9];const i=R(U);let $;e[10]!==s||e[11]!==M||e[12]!==n||e[13]!==a?.user.email?($=l=>{n.mutate({email:a?.user.email,username:l.username,friend_id:l.friend_id,is_public:l.is_public},{onSuccess:()=>M({title:s("accountSaved"),variant:"default"}),onError:r=>{console.error("error saving account",r),M({title:s("accountSavingError"),variant:"destructive"})}})},e[10]=s,e[11]=M,e[12]=n,e[13]=a?.user.email,e[14]=$):$=e[14];const Y=$;let f;e[15]!==s?(f=s("editProfile"),e[15]=s,e[16]=f):f=e[16];let u;e[17]!==f?(u=t.jsx(ue,{children:t.jsx(pe,{children:f})}),e[17]=f,e[18]=u):u=e[18];let q;e[19]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsx(Ie,{className:"size-4"}),e[19]=q):q=e[19];let p;e[20]!==s?(p=s("updateProfile.title"),e[20]=s,e[21]=p):p=e[21];let h;e[22]!==p?(h=t.jsx(he,{children:p}),e[22]=p,e[23]=h):h=e[23];let x;e[24]!==s?(x=s("updateProfile.description"),e[24]=s,e[25]=x):x=e[25];let j;e[26]!==x?(j=t.jsx(xe,{children:x}),e[26]=x,e[27]=j):j=e[27];let g;e[28]!==h||e[29]!==j?(g=t.jsxs(je,{className:"mb-2",children:[q,h,j]}),e[28]=h,e[29]=j,e[30]=g):g=e[30];let b;e[31]!==K||e[32]!==c?(b=l=>{l.preventDefault(),c(!1),K("/trade/settings")},e[31]=K,e[32]=c,e[33]=b):b=e[33];let _;e[34]!==s?(_=s("openTradingSettings"),e[34]=s,e[35]=_):_=e[35];let D;e[36]!==b||e[37]!==_?(D=t.jsx(se,{onClick:b,children:_}),e[36]=b,e[37]=_,e[38]=D):D=e[38];let S;e[39]!==i||e[40]!==Y?(S=i.handleSubmit(Y),e[39]=i,e[40]=Y,e[41]=S):S=e[41];let N;e[42]!==s||e[43]!==a?.user.email?(N=t.jsx(z,{name:"email",render:()=>t.jsxs(H,{children:[t.jsx(L,{children:s("email")}),t.jsx(G,{className:"mt-1",children:t.jsx(Z,{placeholder:s("email"),disabled:!0,value:a?.user.email})}),t.jsx(J,{children:s("registeredEmail")})]})}),e[42]=s,e[43]=a?.user.email,e[44]=N):N=e[44];let v;e[45]!==s?(v=l=>{const{field:r}=l;return t.jsxs(H,{children:[t.jsx(L,{children:s("username")}),t.jsx(G,{className:"mt-1",children:t.jsx(Z,{placeholder:s("username"),...r})}),t.jsx(J,{children:s("usernameDescription")}),t.jsx(te,{})]})},e[45]=s,e[46]=v):v=e[46];let P;e[47]!==i.control||e[48]!==v?(P=t.jsx(z,{control:i.control,name:"username",render:v}),e[47]=i.control,e[48]=v,e[49]=P):P=e[49];let F;e[50]!==s?(F=l=>{const{field:r}=l;return t.jsxs(H,{children:[t.jsx(L,{children:s("friendID")}),t.jsx(G,{className:"mt-1",children:t.jsx(Z,{placeholder:s("friendID"),...r})}),t.jsx(J,{children:s("friendIDDescription")}),t.jsx(te,{})]})},e[50]=s,e[51]=F):F=e[51];let I;e[52]!==i.control||e[53]!==F?(I=t.jsx(z,{control:i.control,name:"friend_id",render:F}),e[52]=i.control,e[53]=F,e[54]=I):I=e[54];let T;e[55]!==s?(T=l=>{const{field:r}=l;return t.jsxs(H,{className:"flex flex-col items-start",children:[t.jsx(G,{className:"mt-2",children:t.jsxs(L,{className:"flex items-center",children:[s("isPublicToggle"),t.jsx(Pe,{className:"ml-2",checked:r.value,onCheckedChange:r.onChange})]})}),t.jsx(J,{children:s("isPublicDescription")})]})},e[55]=s,e[56]=T):T=e[56];let A;e[57]!==i.control||e[58]!==T?(A=t.jsx(z,{control:i.control,name:"is_public",render:T}),e[57]=i.control,e[58]=T,e[59]=A):A=e[59];const ie=n.isPending,le=n.isPending;let C;e[60]!==s?(C=s("save"),e[60]=s,e[61]=C):C=e[61];let E;e[62]!==C||e[63]!==n.isPending?(E=t.jsx(se,{type:"submit",className:"block ml-auto",disabled:ie,isPending:le,children:C}),e[62]=C,e[63]=n.isPending,e[64]=E):E=e[64];let k;e[65]!==S||e[66]!==N||e[67]!==P||e[68]!==I||e[69]!==A||e[70]!==E?(k=t.jsxs("form",{onSubmit:S,className:"space-y-8",children:[N,P,I,A,E]}),e[65]=S,e[66]=N,e[67]=P,e[68]=I,e[69]=A,e[70]=E,e[71]=k):k=e[71];let y;e[72]!==i||e[73]!==k?(y=t.jsx(De,{...i,children:k}),e[72]=i,e[73]=k,e[74]=y):y=e[74];let B;e[75]!==o?.is_public?(B=o?.is_public&&t.jsx(ve,{className:"mt-4"}),e[75]=o?.is_public,e[76]=B):B=e[76];let O;e[77]!==g||e[78]!==D||e[79]!==y||e[80]!==B||e[81]!==u?(O=t.jsxs(ge,{className:"border-1 border-neutral-700",children:[u,g,D,y,B]}),e[77]=g,e[78]=D,e[79]=y,e[80]=B,e[81]=u,e[82]=O):O=e[82];let w;return e[83]!==Q||e[84]!==c||e[85]!==O?(w=t.jsx(be,{open:Q,onOpenChange:c,children:O}),e[83]=Q,e[84]=c,e[85]=O,e[86]=w):w=e[86],w};export{qe as default};
