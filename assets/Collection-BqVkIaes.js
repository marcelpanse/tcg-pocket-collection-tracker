import{e as fe,j as e,v as $,s as E,f as te,u as F,r as g,x as ge,B as T,D as se,y as ae,z as ne,A as re,M as we,C as je,E as le,F as be,G as ye,H as Ce,J as ve,K as Ne,t as R,n as ie,L as ke,N as oe,O as Se,S as Te,Q as Me,T as _e,U as Fe,V as Ae,W as Be,X as Ie,Y as De,Z as Pe}from"./index-DLuvsuCK.js";import{E as Z,D as He,u as Ee}from"./index-B01zN17J.js";import{T as ce,a as de,b as D,C as Le}from"./tabs-MaDZcEud.js";import{F as W}from"./FancyCard-XNRek-MG.js";import{A as ue,b as xe,a as Re}from"./alert-BFtyrTkz.js";import{P as $e}from"./Card-zqABxbW6.js";import{M as V,C as he,c as ze,N as K}from"./index-D5CxpF4T.js";import{T as Oe,a as Q,P as Ue,b as qe,c as Ve,R as Y,u as We}from"./useWindowDimensionsHook-CS2spzNf.js";import{S as J}from"./SearchInput-DjsgIvPF.js";import{S as Ge}from"./siren-DX1tyswQ.js";import"./index-CN5USeAW.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Ke=fe("trophy",Ze);function Qe({card:a,onSelect:n,selected:t}){const i=()=>{n(a.card_id,!t)};return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(W,{card:a,selected:t,setIsSelected:i,size:"small"}),e.jsx("p",{className:"text-xs text-center mt-1",children:$(a,E.language)})]})}const Ye=({children:a,className:n})=>e.jsx("div",{className:te("max-h-[300px] overflow-y-auto border border-gray-300 rounded-md",n),style:{maxHeight:"300px"},children:a});function Je({filteredCards:a}){const{t:n}=F("bulk-update"),[t,i]=g.useState(!1),[c,l]=g.useState(0),[x,o]=g.useState({}),[j,N]=g.useState(!1),[y,b]=g.useState(!1),h=ge(),w=async(d,m)=>{h.mutate({updates:d.map(p=>({card_id:p,amount_owned:m}))})},C=a.length===0,v=g.useMemo(()=>a.reduce((d,m)=>(d.some(p=>p.card_id===m.card_id)||d.push(m),d),[]),[a]);g.useEffect(()=>{if(t){const d=v.reduce((m,p)=>(m[p.card_id]=!0,m),{});o(d)}t||b(!1)},[t]);const M=(d,m)=>{o(p=>({...p,[d]:m}))},A=()=>{const d=v.reduce((m,p)=>(m[p.card_id]=!0,m),{});o(d)},S=()=>{const d=v.reduce((m,p)=>(m[p.card_id]=!1,m),{});o(d)},B=Object.values(x).filter(d=>d).length,z=()=>{c!==null&&(c>0?l(d=>(d||0)-1):c===0&&l(0)),b(!0)},O=()=>{l(d=>d?d+1:1),b(!0)},U=d=>{const m=d.target.value.trim();if(m==="")l(0);else{const p=Number(m);Number.isNaN(p)?l(0):l(p<0?0:p)}b(!0)},L=async()=>{N(!0);const d=Object.entries(x).filter(([m,p])=>p).map(([m])=>m);d.length>0&&(await w(d,c),i(!1),N(!1))};return e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"hidden sm:block",variant:"outline",onClick:()=>i(!0),disabled:C,children:n("buttonTitle")}),e.jsx(se,{open:t,onOpenChange:i,children:e.jsxs(ae,{className:"max-w-2xl",children:[e.jsx(ne,{children:e.jsx(re,{children:n("title")})}),e.jsx(ue,{variant:"destructive",children:e.jsxs(xe,{children:[n("alert.beforeCount"),e.jsxs("strong",{children:[e.jsx("span",{style:{fontSize:"1.25rem",color:"#f3f4f6",padding:"0.25rem 0.5rem",borderRadius:"0.375rem",margin:"0 0.25rem"},children:B})," ",n("alert.cards")]})," ",n("alert.afterCount"),e.jsx("strong",{children:n("alert.warning")})]})}),e.jsxs("div",{className:"flex gap-2 justify-between",children:[e.jsx(T,{variant:"outline",onClick:S,children:n("deselectAll")}),e.jsx(T,{variant:"outline",onClick:A,children:n("selectAll")})]}),e.jsx(Ye,{className:"h-64 rounded-md border p-4",children:e.jsx("div",{className:"grid grid-cols-5 gap-2",children:v.map(d=>e.jsx(Qe,{card:d,onSelect:M,selected:x[d.card_id]},d.card_id))})}),e.jsxs("div",{className:"flex items-center gap-x-1 justify-center",children:[e.jsx(T,{variant:"ghost",size:"icon",onClick:z,disabled:c===null||c===0,className:"rounded-full",children:e.jsx(we,{size:14})}),e.jsx("input",{type:"text",min:"0",value:c??0,onChange:U,placeholder:n("enterAmount"),className:"w-7 text-center border-none rounded",onFocus:d=>d.target.select()}),e.jsx(T,{variant:"ghost",size:"icon",onClick:O,className:"rounded-full",children:e.jsx($e,{size:14})})]}),e.jsxs(je,{children:[e.jsx(T,{variant:"outline",onClick:()=>i(!1),children:n("cancel")}),e.jsxs(T,{onClick:L,disabled:B===0||j||!y,variant:"default",children:[j&&e.jsxs("svg",{"aria-hidden":"true",className:"w-8 h-8 text-gray-200 animate-spin dark:text-gray-600 fill-blue-600",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),e.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),n(j?"batchProcessing":"batchUpdate")]})]})]})})]})}const X=({ownedFilter:a,setOwnedFilter:n,className:t})=>{const{t:i}=F("owned-filter");return e.jsx(ce,{value:a,onValueChange:c=>n(c),className:t,children:e.jsxs(de,{className:"w-full flex-wrap h-auto lg:h-10 bg-neutral-50 border-1 border-neutral-700 rounded-md",children:[e.jsx(D,{value:"all",children:i("all")}),e.jsx(D,{value:"missing",children:i("missing")}),e.jsx(D,{value:"owned",children:i("owned")})]})})},ee=({value:a,onChange:n,expansion:t,className:i})=>{const{t:c}=F("common/packs");let l=le(t)?.packs;const x=!(l===void 0||t==="P-A");return(l===void 0||l.length<=1)&&(l=[]),t==="all"||t==="P-A"?null:e.jsx(ce,{value:a,onValueChange:n,className:te("h-auto",i),children:e.jsxs(de,{className:"h-full flex-wrap w-full border-1 border-neutral-700 rounded-md flex-row justify-start content-start",children:[e.jsx(D,{value:"all",children:c("all")}),l.filter(o=>o.name!=="everypack").map(o=>e.jsx(D,{value:o.name,children:c(o.name)},`tab_trigger_${o.name}`)),x&&e.jsx(D,{value:"missions",children:c("missions")})]})})};function Xe(a,n){if(a.length===0)return n.length;if(n.length===0)return a.length;let t=Array(a.length+1).fill(0).map((c,l)=>l),i=Array(a.length+1);for(let c=1;c<=n.length;c++){i[0]=c;for(let l=1;l<=a.length;l++){const x=a[l-1]===n[c-1]?0:1;i[l]=Math.min(t[l]+1,i[l-1]+1,t[l-1]+x)}[t,i]=[i,t]}return t[a.length]}const et=({allTextSearch:a,setAllTextSearch:n})=>{const{t}=F("search-input");return e.jsxs("div",{className:"flex items-center space-x-2 text-white/50",children:[e.jsx("input",{type:"checkbox",id:"checkbox",checked:a,onChange:()=>n(!a),className:"w-4 h-4"}),e.jsx("label",{htmlFor:"checkbox",className:"text-xs",children:t("allTextLabel")}),e.jsx(V,{id:"allTextSearch",style:{maxWidth:"300px",whiteSpace:"normal"},clickable:!0}),e.jsx(he,{className:"h-4 w-4","data-tooltip-id":"allTextSearch","data-tooltip-content":t("allTextTooltip")})]})},tt=({cardTypeFilter:a,setCardTypeFilter:n,collapse:t})=>{const{t:i}=F("card-type-filter"),c=g.useMemo(()=>e.jsxs(Oe,{variant:"outline",type:"multiple",size:"sm",value:a,onValueChange:l=>{n(l)},className:`justify-center shadow-none border-1 border-neutral-700 rounded-md flex-wrap ${t?"flex-col":"flex-row"}`,children:[ze.filter(l=>l!==""&&l!=="trainer").map(l=>e.jsx(Q,{value:l,"aria-label":l,className:"text-gray-400 hover:text-gray-500 px-1",children:e.jsx("img",{src:`/images/energy/${l}.webp`,alt:l,className:"h-4"})},l)),e.jsx(Q,{value:"trainer","aria-label":"trainer",className:"text-gray-400 hover:text-gray-500 px-1",children:"T"})]}),[a,t]);return t?e.jsxs(Ue,{children:[e.jsx(qe,{asChild:!0,children:e.jsxs(T,{variant:"outline",children:[i("filters")," (",a.length,")"]})}),e.jsx(Ve,{className:"w-32",children:c})]}):c},st=({sortBy:a,setSortBy:n})=>{const{t}=F("sort-by");return e.jsx("div",{className:"px-3 py-1 border-1 border-neutral-700 rounded-md",children:e.jsxs("label",{className:"flex items-center gap-x-2 text-white/50 text-sm",children:[e.jsx("h2",{children:t("sortBy")}),e.jsxs("select",{value:a,onChange:i=>n(i.target.value),className:"p-1",children:[e.jsx("option",{value:"default",className:"text-black",children:t("default")}),e.jsx("option",{value:"recent",className:"text-black",children:t("recent")}),e.jsx("option",{value:"expansion-newest",className:"text-black",children:t("expansion-newest")})]})]})})},at=({children:a,cards:n,filters:t,setFilters:i,onFiltersChanged:c,onChangeToMissions:l,visibleFilters:x,filtersDialog:o,batchUpdate:j,share:N})=>{const{t:y}=F(["pages/collection"]),{setIsProfileDialogOpen:b}=be(),h=s=>{i(u=>{const P={...u,...s},r=m(P);return c(r),P})},w=s=>h({search:s}),C=s=>h({allTextSearch:s}),v=s=>h({pack:s}),M=s=>h({cardType:s}),A=s=>{console.log("new rarity",s,t),h({rarity:s})},S=s=>h({owned:s}),B=s=>h({sortBy:s}),z=s=>h({minNumber:s}),O=s=>h({maxNumber:s}),U=s=>h({deckbuildingMode:s}),[L,d]=g.useState(null),m=s=>{if(!n)return null;let u=Ce;if(s.deckbuildingMode&&(u=u.filter(r=>ve.includes(r.rarity)||r.rarity===""||r.rarity==="P")),s.expansion!=="all"&&(u=u.filter(r=>r.expansion===s.expansion)),s.pack==="missions"){u=[];let r=Ne.get(s.expansion)?.missions||null;r&&(s.owned==="owned"?r=r.filter(f=>f.completed):s.owned==="missing"&&(r=r.filter(f=>!f.completed))),d(r)}else d(null),s.pack!=="all"&&(u=u.filter(r=>r.pack===s.pack||r.pack==="everypack"));if(s.owned!=="all"&&(s.owned==="owned"?u=u.filter(r=>n.find(f=>f.card_id===r.card_id&&f.amount_owned>0)):s.owned==="missing"&&(u=u.filter(r=>!n.find(f=>f.card_id===r.card_id&&f.amount_owned>0)))),s.sortBy==="recent")u=[...u].sort((r,f)=>{const _=n.find(I=>I.card_id===r.card_id)?.updated_at,k=n.find(I=>I.card_id===f.card_id)?.updated_at;return _&&k?new Date(k).getTime()-new Date(_).getTime():_&&!k?-1:1});else if(s.sortBy==="expansion-newest"){const r=[...R].reverse().slice(1).concat(R[R.length-1]);u=[...u].sort((f,_)=>{const k=r.findIndex(H=>H.id===f.expansion),I=r.findIndex(H=>H.id===_.expansion);return k!==I?k-I:f.card_id.localeCompare(_.card_id,E.language||"en",{numeric:!0})})}u=u.filter(r=>s.rarity.length===0?!0:r.rarity!==""&&s.rarity.includes(r.rarity)),u=u.filter(r=>s.cardType.length===0?!0:r.card_type.toLowerCase()==="trainer"?s.cardType.includes("trainer"):r.energy!==""&&s.cardType.includes(r.energy.toLowerCase())),s.search&&(u=u.filter(f=>{const _=$(f,E.language).toLowerCase(),k=s.search.toLowerCase();let I=!1;s.allTextSearch&&(I=f.ability&&(f.ability.name.toLowerCase().includes(k)||f.ability.effect.toLowerCase().includes(k))||f.attacks.some(q=>q.name?.toLowerCase().includes(k)||q.effect?.toLowerCase()!=="no effect"&&q.effect?.toLowerCase()?.includes(k)));const H=_.includes(k),me=Xe(_,k)<=2,pe=f.card_id.toLowerCase().includes(k);return I||H||me||pe}));const P=new Map((n||[]).map(r=>[r.card_id,r.amount_owned]));for(const r of u)r.linkedCardID?r.amount_owned=0:s.deckbuildingMode?r.amount_owned=r.alternate_versions.reduce((f,_)=>f+(P.get(_.card_id)||0),0):r.amount_owned=P.get(r.card_id)||0;return u=u.filter(r=>(r.amount_owned||0)>=s.minNumber),s.maxNumber!==100&&(u=u.filter(r=>(r.amount_owned||0)<=s.maxNumber)),u},p=g.useMemo(()=>m(t),[t,n]);g.useEffect(()=>{c(p)},[]),g.useEffect(()=>{l(L)},[L]);function G(s){h({expansion:s,pack:"all"})}return e.jsxs("div",{id:"filterbar",className:"flex flex-col gap-x-2 flex-wrap",children:[a,x?.expansions&&e.jsxs("div",{className:"flex gap-x-2 px-4 mb-2",children:[e.jsx(Z,{value:t.expansion,onChange:G}),e.jsx(ee,{className:"w-[440px]",value:t.pack,onChange:v,expansion:t.expansion})]}),e.jsxs("div",{className:"gap-2 flex-row gap-y-1 px-4 flex",children:[x?.search&&e.jsx(J,{className:"w-full sm:w-32",setSearchValue:w}),x?.owned&&e.jsx(X,{ownedFilter:t.owned,setOwnedFilter:S}),x?.rarity&&e.jsx(Y,{rarityFilter:t.rarity,setRarityFilter:A,deckbuildingMode:t.deckbuildingMode,collapse:!0}),o&&e.jsxs(se,{children:[e.jsx(ye,{asChild:!0,children:e.jsx(T,{variant:"outline",children:y("filters.allFilters")})}),e.jsxs(ae,{className:"border-1 border-neutral-700 shadow-none max-h-[90vh] overflow-y-auto content-start",children:[e.jsx(ne,{children:e.jsx(re,{children:y("filters.filtersCount",{count:(p||[]).filter(s=>!s.linkedCardID).length})})}),e.jsxs("div",{className:"flex flex-col gap-3",children:[o.search&&e.jsx(J,{className:"w-full",setSearchValue:w}),o.allTextSearch&&e.jsx(et,{allTextSearch:t.allTextSearch,setAllTextSearch:C}),o.expansions&&e.jsx(Z,{value:t.expansion,onChange:G}),o.pack&&e.jsx(ee,{className:"w-full",value:t.pack,onChange:v,expansion:t.expansion}),o.rarity&&e.jsx(Y,{rarityFilter:t.rarity,setRarityFilter:A,deckbuildingMode:t.deckbuildingMode}),o.cardType&&e.jsx(tt,{cardTypeFilter:t.cardType,setCardTypeFilter:M}),o.owned&&e.jsx(X,{className:"w-full",ownedFilter:t.owned,setOwnedFilter:S}),o.sortBy&&e.jsx(st,{sortBy:t.sortBy,setSortBy:B}),o.amount&&e.jsxs(e.Fragment,{children:[e.jsx(K,{numberFilter:t.minNumber,setNumberFilter:z,options:[0,1,2,3,4,5,6,7,8,9],labelKey:"minNum"}),e.jsx(K,{numberFilter:t.maxNumber,setNumberFilter:O,options:[0,1,2,3,4,5,6,7,8,9,10,100],labelKey:"maxNum"})]}),o.deckBuildingMode&&e.jsx(He,{deckbuildingMode:t.deckbuildingMode,setDeckbuildingMode:U}),e.jsx(T,{variant:"outline",className:"!text-red-700",onClick:()=>{const s={search:"",expansion:"all",pack:"all",cardType:[],rarity:[],owned:"all",sortBy:"expansion-newest",minNumber:0,maxNumber:100,deckbuildingMode:!1,allTextSearch:!1},u=m(s);c(u),i(s)},children:y("filters.clear")})]})]})]}),j&&e.jsx(Je,{filteredCards:p||[],disabled:!p||p.length===0}),N&&e.jsx(T,{variant:"outline",onClick:()=>b(!0),children:y("filters.share")})]})]})},nt=({mission:a,setSelectedMissionCardOptions:n})=>{const{width:t}=We(),{t:i}=F("common/packs"),{data:c=[]}=ie(),{setSelectedCardId:l}=ke();let x=5,o=Math.min(t,890)/5+120;t>600&&t<800?(x=4,o=t/3+50):t<=600&&(x=3,o=t/3+100);const j=g.useMemo(()=>{let y=!0;const b=a.requiredCards.flatMap(w=>{let C=c.reduce((M,A)=>{const S=w.options.find(B=>B===A.card_id);if(S)for(let B=0;B<A.amount_owned;B++)M.push({cardId:S,owned:!0,missionCardOptions:w.options});return M},[]);C.length>w.amount&&(C=C.slice(0,w.amount));const v=w.amount-C.length;for(let M=0;M<v;M++)C.push({cardId:w.options[0],owned:!1,missionCardOptions:w.options});return y=y&&v===0,C});a.completed=y;const h=[];for(let w=0;w<b.length;w+=x)h.push(b.slice(w,w+x));return h},[x]),N=o*j.length+72;return e.jsxs("div",{style:{height:`${N}px`},className:"relative w-full",children:[e.jsx("div",{style:{height:`${N}px`},className:"relative w-full",children:j.map((y,b)=>e.jsx("div",{style:{height:`${o}px`,transform:`translateY(${o*b+72}px)`},className:"absolute top-0 left-0 w-full",children:e.jsx("div",{className:"flex justify-start gap-x-3",children:y.map((h,w)=>{const C=oe(h.cardId);return C&&e.jsxs("div",{className:"group flex w-fit max-w-32 md:max-w-40 flex-col items-center rounded-lg cursor-pointer",children:[e.jsx("button",{type:"button",onClick:()=>h.owned?l(h.cardId):n(h.missionCardOptions),children:e.jsx(W,{card:C,selected:h.owned})}),e.jsxs("p",{className:"max-w-[130px] overflow-hidden text-ellipsis whitespace-nowrap font-semibold text-[12px] pt-2",children:[h.cardId," - ",$(C,E.language)]})]},`${a.name}__${w}`)})})},b))}),e.jsx("div",{style:{height:"72px"},className:"absolute top-0 left-0 w-full",children:e.jsxs("h2",{className:"flex items-center gap-x-4 mx-auto mt-10 w-full max-w-[900px] scroll-m-20 border-b-2 border-slate-600 pb-2 font-semibold text-md sm:text-lg md:text-2xl tracking-tight transition-colors first:mt-0",children:[a.name,e.jsx(V,{id:`rewardDescription${a.name}`,style:{maxWidth:"300px",whiteSpace:"normal",fontSize:16},clickable:!0}),e.jsx(Ke,{className:"h-6 w-6","data-tooltip-id":`rewardDescription${a.name}`,"data-tooltip-html":a.reward}),e.jsx(V,{id:`probability${a.name}`,style:{maxWidth:"300px",whiteSpace:"normal",fontSize:16},clickable:!0}),e.jsx(he,{className:"h-6 w-6","data-tooltip-id":`probability${a.name}`,"data-tooltip-html":a.completed?"Completed!":Se(a,j).filter(([y,b])=>y!=="everypack"&&b>0).map(([y,b])=>`${i(y)}: ${b.toFixed(2)}%`).join("<br/>")})]})},"header")]})},rt=({missions:a,resetScrollTrigger:n,setSelectedMissionCardOptions:t})=>{const i=g.useRef(null),[c,l]=g.useState("auto");return g.useLayoutEffect(()=>{const x=()=>{if(i.current){const o=document.querySelector("#header")?.offsetHeight||0,j=document.querySelector("#filterbar")?.offsetHeight||0,N=window.innerHeight-o-j;l(`${N}px`)}};return x(),window.addEventListener("resize",x),()=>{window.removeEventListener("resize",x)}},[]),g.useEffect(()=>{i.current&&(i.current.scrollTop=0)},[n]),e.jsx("div",{ref:i,className:"overflow-y-auto mt-2 sm:mt-4 px-4 flex flex-col justify-start",style:{scrollbarWidth:"none",height:c},children:a.map(x=>e.jsx(nt,{mission:x,setSelectedMissionCardOptions:t},x.name))})};function lt({missionCardOptions:a,onClose:n}){const{t}=F(["common/sets","common/packs","pages/collection"]),i=a[0]||"",c=i.length>0?i.split("-")[0]:"Unknown",l=le(c)||R[0],x=l.name;return e.jsx(Te,{open:!!a.length,onOpenChange:o=>{o||n()},children:e.jsxs(Me,{className:"transition-all duration-300 ease-in-out border-slate-600 overflow-y-auto",children:[e.jsx(_e,{children:e.jsx(Fe,{children:a.length===1?t("missionDetail.eligibleCards-singular",{ns:"pages/collection",options:1}):t("missionDetail.eligibleCards-plural",{ns:"pages/collection",options:a.length})})}),t(x),a.map(o=>{const j=oe(o);return j&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"px-10 py-4 w-full",children:e.jsx(W,{card:j,selected:!1})}),e.jsxs("p",{className:"max-w-[130px] whitespace-nowrap font-semibold text-[12px] pt-2",children:[o," - ",$(j,E.language),e.jsx("br",{}),t("missionDetail.chanceFrom",{ns:"pages/collection",pack:t(j.pack,{ns:"common/packs"}),chance:Ae(l,j.pack,j).toFixed(2)})]})]})})]})})}function wt(){const a=Be(),{friendId:n}=Ie(),{data:t}=De(n),{data:i}=Pe(n),{t:c}=F(["pages/collection"]),l=Ee({query:"(max-width: 767px)"}),{data:x=[]}=ie(),[o,j]=g.useState([]),[N,y]=g.useState({search:"",expansion:"all",pack:"all",cardType:[],rarity:[],owned:"all",sortBy:"expansion-newest",minNumber:0,maxNumber:100,deckbuildingMode:!1,allTextSearch:!1}),[b,h]=g.useState(!1),[w,C]=g.useState(null),[v,M]=g.useState(null),A=i??x;return g.useEffect(()=>{h(!0);const S=setTimeout(()=>h(!1),100);return()=>clearTimeout(S)},[N]),e.jsxs("div",{className:"flex flex-col gap-y-1 mx-auto max-w-[900px]",children:[e.jsx(at,{cards:A,filters:N,setFilters:y,onFiltersChanged:S=>C(S),onChangeToMissions:S=>M(S),visibleFilters:{expansions:!l,allTextSearch:!l,search:!0,owned:!l,rarity:!l},filtersDialog:{expansions:!0,pack:!0,search:!0,owned:!0,sortBy:!0,rarity:!0,cardType:!0,amount:!0,deckBuildingMode:!0,allTextSearch:!0},batchUpdate:!!t,share:!0,children:e.jsx("div",{children:t&&e.jsxs(ue,{className:"mb-4 border-1 border-neutral-700 shadow-none",children:[e.jsx(Ge,{className:"h-4 w-4"}),e.jsx(Re,{children:c("publicCollectionTitle",{username:t?.username})}),e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center",children:[c("publicCollectionDescription"),e.jsx(T,{className:"mb-4",onClick:()=>a(`/trade/${t?.friend_id}`),children:c("showPossibleTrades")})]})})]})})}),e.jsx("div",{children:w&&!v&&e.jsx(Le,{cards:w,resetScrollTrigger:b,showStats:!N.deckbuildingMode,extraOffset:24,editable:!N.deckbuildingMode&&!t})}),e.jsx("div",{children:v&&e.jsx(rt,{missions:v,resetScrollTrigger:b,setSelectedMissionCardOptions:j})}),v&&e.jsx(lt,{missionCardOptions:o,onClose:()=>{j([])}})]})}export{wt as default};
