import{j as s}from"./query-vendor-DpGHCXpY.js";import{r as F}from"./react-vendor-DjlsVz29.js";import{D as q}from"./Filters-XrA_9x_d.js";import{c as $,a as S,u as te,e as se,S as le,A as z,b as G,d as W,f as U,H as ae,g as V}from"./index--3eOzWKG.js";import{u as M,T as K,i as X}from"./i18n-vendor-DDmeScd6.js";import{u as re,R as ne,D as oe}from"./index-BA4ILeSl.js";import{g as D}from"./filters-CVG0xEb2.js";import{p as Z}from"./stats-CJBl9q2B.js";import{T as ie,R as ce,B as de,C as me,X as fe,Y as xe,a as ue}from"./charts-vendor-D-Ae2kUX.js";import{q as pe,r as he}from"./ui-vendor-9yhwxkpr.js";import{S as ge}from"./siren-BOWpHzG9.js";import"./tabs-MuMobBH_.js";import"./supabase-vendor-CP3OYKhD.js";import"./xlsx-vendor-De4COjWB.js";import"./react-tooltip.min-DN95HUru.js";import"./index-5ziEWJdO.js";function be(l){const e=$.c(34),{onClose:t}=l,{t:a}=M("footer");let r,n;e[0]!==t?(r=()=>{const k=C=>C.key==="Escape"&&t();return document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)},n=[t],e[0]=t,e[1]=r,e[2]=n):(r=e[1],n=e[2]),F.useEffect(r,n);let d;e[3]!==t?(d=k=>{k.target===k.currentTarget&&t()},e[3]=t,e[4]=d):d=e[4];const f=d;let i;e[5]!==a?(i=a("modal.title"),e[5]=a,e[6]=i):i=e[6];let o;e[7]!==i?(o=s.jsx("h2",{className:"text-xl font-bold mb-4",children:i}),e[7]=i,e[8]=o):o=e[8];let c,u;e[9]===Symbol.for("react.memo_cache_sentinel")?(c={projectName:"TCG Pocket Collection Tracker"},u={repo:s.jsx("a",{href:"https://github.com/marcelpanse/tcg-pocket-collection-tracker",target:"_blank",rel:"noopener noreferrer",className:"hover:underline text-blue-600",children:"GitHub repository"})},e[9]=c,e[10]=u):(c=e[9],u=e[10]);let p;e[11]!==a?(p=s.jsx("p",{className:"text-sm mb-3",children:s.jsx(K,{i18nKey:"modal.licenseSummary",t:a,values:c,components:u})}),e[11]=a,e[12]=p):p=e[12];let x;e[13]!==a?(x=a("modal.disclaimerTitle"),e[13]=a,e[14]=x):x=e[14];let b;e[15]!==x?(b=s.jsx("p",{className:"font-semibold",children:x}),e[15]=x,e[16]=b):b=e[16];let g;e[17]!==a?(g=a("modal.disclaimerText"),e[17]=a,e[18]=g):g=e[18];let j;e[19]!==g?(j=s.jsx("p",{className:"text-sm mb-2 whitespace-pre-line",children:g}),e[19]=g,e[20]=j):j=e[20];let v;e[21]!==a?(v=a("modal.copyright",{projectName:"TCG Pocket Collection Tracker"}),e[21]=a,e[22]=v):v=e[22];let m;e[23]!==v?(m=s.jsx("p",{className:"text-sm",children:v}),e[23]=v,e[24]=m):m=e[24];let h;e[25]!==b||e[26]!==j||e[27]!==m||e[28]!==o||e[29]!==p?(h=s.jsxs("div",{className:"bg-gray-200 text-gray-800 p-6 sm:p-8 rounded-lg shadow-lg w-full max-w-lg mx-4",children:[o,p,b,j,m]}),e[25]=b,e[26]=j,e[27]=m,e[28]=o,e[29]=p,e[30]=h):h=e[30];let N;return e[31]!==f||e[32]!==h?(N=s.jsx("button",{type:"button",onClick:f,className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:h}),e[31]=f,e[32]=h,e[33]=N):N=e[33],N}function je(){const l=$.c(17),[e,t]=F.useState(!1),{t:a}=M("footer");let r;l[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>t(!0),l[0]=r):r=l[0];let n;l[1]!==a?(n=a("licenseDisclaimer"),l[1]=a,l[2]=n):n=l[2];let d;l[3]!==n?(d=s.jsxs("p",{className:"m-1",children:["Â© 2025 TCG Pocket Collection Tracker."," ",s.jsx("button",{type:"button",onClick:r,className:"text-blue-300 underline hover:text-blue-500 cursor-pointer",children:n})]}),l[3]=n,l[4]=d):d=l[4];let f;l[5]!==a?(f=a("notAffiliated"),l[5]=a,l[6]=f):f=l[6];let i;l[7]!==f?(i=s.jsx("p",{className:"text-gray-400 mx-4 mb-1 whitespace-pre-line text-center text-xs",children:f}),l[7]=f,l[8]=i):i=l[8];let o;l[9]!==d||l[10]!==i?(o=s.jsxs("footer",{className:"text-center py-4 mx-2 text-gray-300 text-xs leading-snug",children:[d,i]}),l[9]=d,l[10]=i,l[11]=o):o=l[11];let c;l[12]!==e?(c=e&&s.jsx(be,{onClose:()=>t(!1)}),l[12]=e,l[13]=c):c=l[13];let u;return l[14]!==o||l[15]!==c?(u=s.jsxs(s.Fragment,{children:[o,c]}),l[14]=o,l[15]=c,l[16]=u):u=l[16],u}const ve=l=>{const e=$.c(28),{value:t,label:a,sublabel:r,color:n,strokeWidth:d}=l,f=n===void 0?"#38bdf8":n,i=d===void 0?10:d,o=(180-i)/2,c=2*Math.PI*o,u=c*(1-t);let p;e[0]!==a||e[1]!==t?(p=a??`Radial chart showing ${Math.round(t*100)}%`,e[0]=a,e[1]=t,e[2]=p):p=e[2];let x;e[3]!==p?(x=s.jsx("title",{children:p}),e[3]=p,e[4]=x):x=e[4];const b=i/2;let g;e[5]!==o||e[6]!==b?(g=s.jsx("circle",{cx:90,cy:90,r:o,fill:"none",stroke:"#404040",strokeWidth:b}),e[5]=o,e[6]=b,e[7]=g):g=e[7];let j;e[8]===Symbol.for("react.memo_cache_sentinel")?(j={transition:"stroke-dashoffset 0.5s"},e[8]=j):j=e[8];let v;e[9]!==c||e[10]!==f||e[11]!==u||e[12]!==o||e[13]!==i?(v=s.jsx("circle",{cx:90,cy:90,r:o,fill:"none",stroke:f,strokeWidth:i,strokeDasharray:c,strokeDashoffset:u,strokeLinecap:"butt",transform:"rotate(-90 90 90)",style:j}),e[9]=c,e[10]=f,e[11]=u,e[12]=o,e[13]=i,e[14]=v):v=e[14];let m;e[15]!==a||e[16]!==t?(m=a??`${Math.round(t*100)}%`,e[15]=a,e[16]=t,e[17]=m):m=e[17];let h;e[18]!==m?(h=s.jsx("text",{x:"50%",y:"45%",textAnchor:"middle",dominantBaseline:"central",className:"font-semibold text-4xl",fill:"#FFFFFF",children:m}),e[18]=m,e[19]=h):h=e[19];let N;e[20]!==r?(N=r&&s.jsx("text",{x:"50%",y:"63%",textAnchor:"middle",dominantBaseline:"central",className:"font-semibold text-sm",fill:"#A3A3A3",children:r}),e[20]=r,e[21]=N):N=e[21];let k;return e[22]!==h||e[23]!==N||e[24]!==x||e[25]!==g||e[26]!==v?(k=s.jsxs("svg",{width:180,height:180,children:[x,g,v,h,N]}),e[22]=h,e[23]=N,e[24]=x,e[25]=g,e[26]=v,e[27]=k):k=e[27],k};function O(l){const e=$.c(21),{title:t,percentage:a,className:r,backgroundColor:n}=l;let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=["gradient-card","common/packs"],e[0]=d):d=e[0];const{t:f}=M(d),i=Math.round(a*1e3)/10;let o;e[1]!==r?(o=S(r,"tex flex flex-col items-center justify-center rounded-lg p-4 sm:p-8 transition-all duration-200"),e[1]=r,e[2]=o):o=e[2];let c;e[3]!==n?(c={backgroundColor:n},e[3]=n,e[4]=c):c=e[4];let u;e[5]===Symbol.for("react.memo_cache_sentinel")?(u=s.jsx("p",{className:"mb-1 text-center text-md sm:text-xl text-slate-900",children:s.jsx(K,{i18nKey:"open",ns:"gradient-card"})}),e[5]=u):u=e[5];let p;e[6]!==f||e[7]!==t?(p=f(t,{ns:"common/packs"}),e[6]=f,e[7]=t,e[8]=p):p=e[8];let x;e[9]!==p?(x=s.jsx("header",{className:"font-semibold text-center text-2xl sm:text-6xl text-slate-900",children:p}),e[9]=p,e[10]=x):x=e[10];let b;e[11]!==i?(b={chancePercentage:i},e[11]=i,e[12]=b):b=e[12];let g;e[13]===Symbol.for("react.memo_cache_sentinel")?(g={strong:s.jsx("span",{className:"font-bold"})},e[13]=g):g=e[13];let j;e[14]!==b?(j=s.jsx("p",{className:"mt-2 text-center text-md sm:text-xl text-slate-900",children:s.jsx(K,{i18nKey:"text",ns:"gradient-card",values:b,components:g})}),e[14]=b,e[15]=j):j=e[15];let v;return e[16]!==o||e[17]!==c||e[18]!==x||e[19]!==j?(v=s.jsxs("div",{className:o,style:c,children:[u,x,j]}),e[16]=o,e[17]=c,e[18]=x,e[19]=j,e[20]=v):v=e[20],v}function Ne(l){const e=$.c(8);let t,a;e[0]!==l?({className:t,...a}=l,e[0]=l,e[1]=t,e[2]=a):(t=e[1],a=e[2]);let r;e[3]!==t?(r=S("rounded-xl border bg-white text-neutral-950 shadow dark:bg-neutral-950 dark:text-neutral-50",t),e[3]=t,e[4]=r):r=e[4];let n;return e[5]!==a||e[6]!==r?(n=s.jsx("div",{className:r,...a}),e[5]=a,e[6]=r,e[7]=n):n=e[7],n}function Ce(l){const e=$.c(8);let t,a;e[0]!==l?({className:t,...a}=l,e[0]=l,e[1]=t,e[2]=a):(t=e[1],a=e[2]);let r;e[3]!==t?(r=S("flex flex-col space-y-1.5 p-6",t),e[3]=t,e[4]=r):r=e[4];let n;return e[5]!==a||e[6]!==r?(n=s.jsx("div",{className:r,...a}),e[5]=a,e[6]=r,e[7]=n):n=e[7],n}function ke(l){const e=$.c(8);let t,a;e[0]!==l?({className:t,...a}=l,e[0]=l,e[1]=t,e[2]=a):(t=e[1],a=e[2]);let r;e[3]!==t?(r=S("font-semibold leading-none tracking-tight",t),e[3]=t,e[4]=r):r=e[4];let n;return e[5]!==a||e[6]!==r?(n=s.jsx("div",{className:r,...a}),e[5]=a,e[6]=r,e[7]=n):n=e[7],n}function ye(l){const e=$.c(8);let t,a;e[0]!==l?({className:t,...a}=l,e[0]=l,e[1]=t,e[2]=a):(t=e[1],a=e[2]);let r;e[3]!==t?(r=S("content-center p-6 pt-0",t),e[3]=t,e[4]=r):r=e[4];let n;return e[5]!==a||e[6]!==r?(n=s.jsx("div",{className:r,...a}),e[5]=a,e[6]=r,e[7]=n):n=e[7],n}function we(l){const e=$.c(8);let t,a;e[0]!==l?({className:t,...a}=l,e[0]=l,e[1]=t,e[2]=a):(t=e[1],a=e[2]);let r;e[3]!==t?(r=S("flex items-center p-6 pt-0",t),e[3]=t,e[4]=r):r=e[4];let n;return e[5]!==a||e[6]!==r?(n=s.jsx("div",{className:r,...a}),e[5]=a,e[6]=r,e[7]=n):n=e[7],n}const $e={light:"",dark:".dark"},ee=F.createContext(null);function Se(){const l=F.useContext(ee);if(!l)throw new Error("useChart must be used within a <ChartContainer />");return l}function Fe(l){const e=$.c(27);let t,a,r,n,d;e[0]!==l?({id:n,className:a,children:t,config:r,...d}=l,e[0]=l,e[1]=t,e[2]=a,e[3]=r,e[4]=n,e[5]=d):(t=e[1],a=e[2],r=e[3],n=e[4],d=e[5]);const f=F.useId();let i;e[6]!==n||e[7]!==f?(i=n??f.replace(/:/g,""),e[6]=n,e[7]=f,e[8]=i):i=e[8];const o=`chart-${i}`;let c;e[9]!==r?(c={config:r},e[9]=r,e[10]=c):c=e[10];let u;e[11]!==a?(u=S("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-hidden [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector]:outline-hidden [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-surface]:outline-hidden",a),e[11]=a,e[12]=u):u=e[12];let p;e[13]!==o||e[14]!==r?(p=s.jsx(Pe,{id:o,config:r}),e[13]=o,e[14]=r,e[15]=p):p=e[15];let x;e[16]!==t?(x=s.jsx(ce,{children:t}),e[16]=t,e[17]=x):x=e[17];let b;e[18]!==o||e[19]!==d||e[20]!==u||e[21]!==p||e[22]!==x?(b=s.jsxs("div",{"data-slot":"chart","data-chart":o,className:u,...d,children:[p,x]}),e[18]=o,e[19]=d,e[20]=u,e[21]=p,e[22]=x,e[23]=b):b=e[23];let g;return e[24]!==c||e[25]!==b?(g=s.jsx(ee.Provider,{value:c,children:b}),e[24]=c,e[25]=b,e[26]=g):g=e[26],g}const Pe=l=>{const e=$.c(8),{id:t,config:a}=l;let r;e[0]!==a?(r=Object.entries(a).filter(Ee),e[0]=a,e[1]=r):r=e[1];const n=r;if(!n.length)return null;let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=Object.entries($e),e[2]=d):d=e[2];let f;e[3]!==n||e[4]!==t?(f=d.map(c=>{const[u,p]=c;return`
${p} [data-chart=${t}] {
${n.map(x=>{const[b,g]=x,j=g.theme?.[u]??g.color;return j?`  --color-${b}: ${j};`:null}).join(`
`)}
}
`}),e[3]=n,e[4]=t,e[5]=f):f=e[5];const i=f.join(`
`);let o;return e[6]!==i?(o=s.jsx("style",{dangerouslySetInnerHTML:{__html:i}}),e[6]=i,e[7]=o):o=e[7],o},Te=ie;function Me(l){const e=$.c(38),{active:t,className:a,indicator:r,hideLabel:n,hideIndicator:d,labelFormatter:f,labelClassName:i,formatter:o,color:c,nameKey:u,labelKey:p,payload:x,label:b}=l,g=r===void 0?"dot":r,j=n===void 0?!1:n,v=d===void 0?!1:d,{config:m}=Se();let h;e[0]!==m||e[1]!==j||e[2]!==b||e[3]!==i||e[4]!==f||e[5]!==p||e[6]!==x?(h=()=>{if(j||!x?.length)return null;const[T]=x,w=`${p??T?.dataKey??T?.name??"value"}`,R=J(m,T,w),L=!p&&typeof b=="string"?m[b]?.label??b:R?.label;return f?s.jsx("div",{className:S("font-medium",i),children:f(L,x)}):L?s.jsx("div",{className:S("font-medium",i),children:L}):null},e[0]=m,e[1]=j,e[2]=b,e[3]=i,e[4]=f,e[5]=p,e[6]=x,e[7]=h):h=e[7];const N=h;if(!t||!x?.length)return null;const k=x.length===1&&g!=="dot";let C;e[8]!==a?(C=S("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",a),e[8]=a,e[9]=C):C=e[9];let y;e[10]!==k||e[11]!==N?(y=k?null:N(),e[10]=k,e[11]=N,e[12]=y):y=e[12];let P;if(e[13]!==c||e[14]!==m||e[15]!==o||e[16]!==v||e[17]!==g||e[18]!==u||e[19]!==k||e[20]!==x||e[21]!==N){let T;e[23]!==c||e[24]!==m||e[25]!==o||e[26]!==v||e[27]!==g||e[28]!==u||e[29]!==k||e[30]!==N?(T=(w,R)=>{const L=`${u??w.name??w.dataKey??"value"}`,I=J(m,w,L),B=c??w.payload?.fill??w.color;return s.jsx("div",{className:S("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",g==="dot"&&"items-center"),children:o&&w?.value!==void 0&&w.name?o(w.value,w.name,w,R,w.payload):s.jsxs(s.Fragment,{children:[I?.icon?s.jsx(I.icon,{}):!v&&s.jsx("div",{className:S("shrink-0 rounded-[2px] border-(--color-border) bg-(--color-bg)",{"h-2.5 w-2.5":g==="dot","w-1":g==="line","w-0 border-[1.5px] border-dashed bg-transparent":g==="dashed","my-0.5":k&&g==="dashed"}),style:{"--color-bg":B,"--color-border":B}}),s.jsxs("div",{className:S("flex flex-1 justify-between leading-none",k?"items-end":"items-center"),children:[s.jsxs("div",{className:"grid gap-1.5",children:[k?N():null,s.jsx("span",{className:"text-muted-foreground",children:I?.label??w.name})]}),w.value!=null&&s.jsx("span",{className:"font-mono font-medium text-foreground tabular-nums",children:typeof w.value=="number"?w.value.toLocaleString():String(w.value)})]})]})},R)},e[23]=c,e[24]=m,e[25]=o,e[26]=v,e[27]=g,e[28]=u,e[29]=k,e[30]=N,e[31]=T):T=e[31],P=x.map(T),e[13]=c,e[14]=m,e[15]=o,e[16]=v,e[17]=g,e[18]=u,e[19]=k,e[20]=x,e[21]=N,e[22]=P}else P=e[22];let E;e[32]!==P?(E=s.jsx("div",{className:"grid gap-1.5",children:P}),e[32]=P,e[33]=E):E=e[33];let _;return e[34]!==C||e[35]!==y||e[36]!==E?(_=s.jsxs("div",{className:C,children:[y,E]}),e[34]=C,e[35]=y,e[36]=E,e[37]=_):_=e[37],_}function J(l,e,t){if(typeof e!="object"||e===null)return;const a="payload"in e&&typeof e.payload=="object"&&e.payload!==null?e.payload:void 0;let r=t;return t in e&&typeof e[t]=="string"?r=e[t]:a&&t in a&&typeof a[t]=="string"&&(r=a[t]),r in l?l[r]:l[t]}function Ee(l){const[,e]=l;return e.theme??e.color}const Y=({title:l,data:e,config:t={},footer:a})=>{const{t:r}=M(["common/packs","expansion-overview"]);return s.jsxs(Ne,{className:"rounded-lg border-1 border-neutral-700 border-solid shadow-none dark:bg-neutral-800",children:[s.jsx(Ce,{className:"text-center",children:s.jsx(ke,{className:"text-xl",children:l})}),s.jsx(ye,{children:s.jsx(Fe,{config:t,children:s.jsxs(de,{accessibilityLayer:!0,data:e.map(n=>({...n,percentage:n.percentage*100,[r("percentage",{ns:"expansion-overview"})]:n.percentage*100})),children:[s.jsx(me,{vertical:!1}),s.jsx(fe,{dataKey:"packName",tickLine:!1,tickMargin:10,axisLine:!1}),s.jsx(xe,{type:"number",domain:[0,100],width:25}),s.jsx(Te,{cursor:!1,content:s.jsx(Le,{payload:[],active:!1})}),s.jsx(ue,{dataKey:r("percentage",{ns:"expansion-overview"}),strokeWidth:2,radius:8})]})})}),s.jsx(we,{className:"flex-1 flex-col items-center gap-2",children:a})]})},Le=l=>{const e=$.c(5),{payload:t,active:a}=l;if(a&&t&&t.length){let r;e[0]!==t?(r=t.map(_e),e[0]=t,e[1]=r):r=e[1];const n=r;let d;return e[2]!==n||e[3]!==l?(d=s.jsx(Me,{...l,payload:n,className:"bg-black"}),e[2]=n,e[3]=l,e[4]=d):d=e[4],d}return null};function _e(l){return{...l,value:`: ${Math.round(l.value*10)/10}%`}}function Re(l){const e=$.c(6),{padding:t,children:a}=l,r=F.useRef(null),n=`calc(${t} + 1.5rem)`;let d;e[0]!==t||e[1]!==n?(d={scrollPadding:t,paddingLeft:t,paddingRight:n,scrollbarWidth:"none"},e[0]=t,e[1]=n,e[2]=d):d=e[2];let f;return e[3]!==a||e[4]!==d?(f=s.jsx("section",{className:"relative",children:s.jsx("article",{ref:r,className:"flex overflow-x-auto hide-scroll gap-5 snap-x scroll-smooth",style:d,children:a})}),e[3]=a,e[4]=d,e[5]=f):f=e[5],f}function He(l){const e=$.c(14);let t,a,r,n;e[0]!==l?({className:a,value:n,barColor:t,...r}=l,e[0]=l,e[1]=t,e[2]=a,e[3]=r,e[4]=n):(t=e[1],a=e[2],r=e[3],n=e[4]);let d;e[5]!==a?(d=S("relative h-2 w-full overflow-hidden rounded-full bg-neutral-900/20 dark:bg-neutral-50/20",a),e[5]=a,e[6]=d):d=e[6];const f=`translateX(-${100-(n||0)}%)`;let i;e[7]!==t||e[8]!==f?(i=s.jsx(he,{className:"h-full w-full flex-1 bg-neutral-900 transition-all dark:bg-neutral-50",style:{transform:f,backgroundColor:t}}),e[7]=t,e[8]=f,e[9]=i):i=e[9];let o;return e[10]!==r||e[11]!==d||e[12]!==i?(o=s.jsx(pe,{className:d,...r,children:i}),e[10]=r,e[11]=d,e[12]=i,e[13]=o):o=e[13],o}function H(l){const e=$.c(12),{className:t,title:a,barColor:r,collected:n,available:d}=l,{t:f}=M("expansion-overview"),i=n/d*100;let o;e[0]!==r||e[1]!==i?(o=s.jsx(He,{value:i,barColor:r}),e[0]=r,e[1]=i,e[2]=o):o=e[2];let c;e[3]!==d||e[4]!==n||e[5]!==f?(c=f("youHave",{nCardsOwned:n,nTotalCards:d}),e[3]=d,e[4]=n,e[5]=f,e[6]=c):c=e[6];let u;return e[7]!==t||e[8]!==o||e[9]!==c||e[10]!==a?(u=s.jsxs("div",{className:t,children:[a,o,c]}),e[7]=t,e[8]=o,e[9]=c,e[10]=a,e[11]=u):u=e[11],u}function Ae(l){const e=$.c(32),{expansion:t,collectedCards:a,availableCards:r,wantedCards:n,deckbuildingMode:d}=l;let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f=["expansion-overview","common/sets","common/packs"],e[0]=f):f=e[0];const{t:i}=M(f);let o;e[1]===Symbol.for("react.memo_cache_sentinel")?(o={query:"(max-width: 767px)"},e[1]=o):o=e[1];const c=re(o);let u,p;if(e[2]!==d||e[3]!==t||e[4]!==i||e[5]!==n){let{packs:C}=t;C.length>1&&(C=C.filter(De)),u=C.map(y=>({packName:i(y.name,{ns:"common/packs"}),percentage:Z(n,t,y,d),fill:y.color})),p=u.sort(Ie),e[2]=d,e[3]=t,e[4]=i,e[5]=n,e[6]=u,e[7]=p}else u=e[6],p=e[7];const x=p[0],b=`/images/sets/${X.language}/${t.id}.webp`,g=`${t.id}`;let j;e[8]!==t.id?(j=C=>{X.language!=="en-US"&&(C.target.src=`/images/sets/en-US/${t.id}.webp`)},e[8]=t.id,e[9]=j):j=e[9];let v;e[10]!==b||e[11]!==g||e[12]!==j?(v=s.jsx("img",{src:b,alt:g,className:"mr-2 inline max-w-[80px]",onError:j}),e[10]=b,e[11]=g,e[12]=j,e[13]=v):v=e[13];let m;e[14]!==t.name||e[15]!==i?(m=i(t.name,{ns:"common/sets"}),e[14]=t.name,e[15]=i,e[16]=m):m=e[16];let h;e[17]!==v||e[18]!==m?(h=s.jsxs("h2",{className:"ml-6 md:ml-0 mt-6 col-span-8 text-3xl flex items-center",children:[v,m]}),e[17]=v,e[18]=m,e[19]=h):h=e[19];let N;e[20]!==r||e[21]!==u||e[22]!==a||e[23]!==t.packs||e[24]!==t.promo||e[25]!==x||e[26]!==c||e[27]!==i?(N=c?s.jsx("div",{className:"col-span-full",children:s.jsxs(Re,{padding:"2rem",children:[!t.promo&&s.jsxs(s.Fragment,{children:[s.jsx(O,{title:x.packName,percentage:x.percentage,className:"col-span-8 snap-start flex-shrink-0 w-full",backgroundColor:x.fill}),s.jsx("div",{className:"col-span-8 snap-start flex-shrink-0 w-full",children:s.jsx(Y,{title:i("probabilityNewCard"),data:u})})]}),s.jsxs("div",{className:"col-span-8 snap-start flex-shrink-0 w-full border-1 border-neutral-700 border-solid rounded-lg p-4 sm:p-8",children:[s.jsx(H,{title:i("totalCards"),collected:a.length,available:r.length}),t.packs.length>1&&t.packs.map(C=>s.jsx(H,{className:"mt-4",title:i(C.name,{ns:"common/packs"}),barColor:C.color,collected:a.filter(y=>y.pack===C.name).length,available:r.filter(y=>y.pack===C.name).length},C.name))]})]})}):s.jsxs(s.Fragment,{children:[!t.promo&&s.jsxs(s.Fragment,{children:[s.jsx(O,{title:x.packName,percentage:x.percentage,className:"col-span-8 lg:col-span-4",backgroundColor:x.fill}),s.jsx("div",{className:"col-span-4 lg:col-span-2",children:s.jsx(Y,{title:i("probabilityNewCard"),data:u})})]}),s.jsxs("div",{className:"col-span-4 lg:col-span-2",children:[s.jsx(H,{title:i("totalCards"),collected:a.length,available:r.length}),t.packs.length>1&&t.packs.map(C=>s.jsx(H,{className:"mt-4",title:i(C.name,{ns:"common/packs"}),barColor:C.color,collected:a.filter(y=>y.pack===C.name).length,available:r.filter(y=>y.pack===C.name).length},C.name))]})]}),e[20]=r,e[21]=u,e[22]=a,e[23]=t.packs,e[24]=t.promo,e[25]=x,e[26]=c,e[27]=i,e[28]=N):N=e[28];let k;return e[29]!==N||e[30]!==h?(k=s.jsxs(s.Fragment,{children:[h,N]}),e[29]=N,e[30]=h,e[31]=k):k=e[31],k}function Ie(l,e){return e.percentage-l.percentage}function De(l){return l.name!=="everypack"}const Q=["all",...se.filter(l=>V(l).openable)];function A(l){return new Set(l.map(e=>e.internal_id)).size}function st(){const{data:l=new Map,isLoading:e}=te(),{t}=M(["pages/overview","filters","common/sets"]),[a,r]=F.useState(""),[n,d]=F.useState(""),[f,i]=F.useState(Q[1]),o=()=>{let m=0;return l.forEach(h=>{m+=h.amount_owned}),m},[c,u]=F.useState(()=>{const m=localStorage.getItem("overview-filters");return m?JSON.parse(m):{rarity:[],number:1,deckbuildingMode:!1}});F.useEffect(()=>{fetch("https://vcwloujmsjuacqpwthee.supabase.co/storage/v1/object/public/stats/stats.json").then(m=>m.json()).then(m=>{r(m.collectionCount),d(m.usersCount)})},[]),F.useEffect(()=>localStorage.setItem("overview-filters",JSON.stringify(c)),[c]);const p=D(c,l),x=l&&D({...c,minNumber:c.number},l),b=l&&D({...c,maxNumber:c.number-1},l),j=(()=>{let m;const h=U.filter(N=>N.openable);for(const N of h){const C=N.packs.filter(y=>y.name!=="everypack").map(y=>({packName:y.name,percentage:Z(b,N,y,c.deckbuildingMode),fill:y.color})).sort((y,P)=>P.percentage-y.percentage)[0];C.percentage>(m?.percentage??-1)&&(m=C)}return m})(),v=m=>{const h=m==="all"?"all":V(m).name;return t(h,{ns:"common/sets"})};return e?s.jsx(le,{size:"lg",overlay:!0}):s.jsxs("main",{children:[s.jsxs("article",{className:"mx-auto max-w-7xl px-8",children:[l.size===0&&s.jsxs(z,{className:"mb-8 border-1 border-neutral-700 shadow-none",children:[s.jsx(ge,{className:"h-4 w-4"}),s.jsx(G,{children:t("dontHaveCards.title")}),s.jsx(W,{children:t("dontHaveCards.description")})]}),s.jsxs("div",{className:"mb-8 flex items-center gap-2 flex-wrap",children:[s.jsx(ne,{rarityFilter:c.rarity,setRarityFilter:m=>u(h=>({...h,rarity:m})),deckbuildingMode:c.deckbuildingMode}),s.jsx(q,{label:t("f-number.numberCards",{ns:"filters"}),options:[1,2,3,4,5],value:c.number,onChange:m=>u(h=>({...h,number:m}))}),s.jsx("div",{className:"grow"}),s.jsx(oe,{deckbuildingMode:c.deckbuildingMode,setDeckbuildingMode:m=>u(h=>({...h,deckbuildingMode:m}))})]}),s.jsxs("section",{className:"grid grid-cols-8 gap-4 sm:gap-6",children:[s.jsxs("div",{className:"col-span-8 md:col-span-2 flex flex-col items-center justify-center rounded-lg border-1 border-neutral-700 bg-neutral-800 border-solid p-3 sm:p-6 md:p-8 mb-4 md:mb-0",children:[s.jsx("h2",{className:"font-bold mb-4 text-center text-base sm:text-lg md:text-3xl",children:t("uniqueCards")}),s.jsx(ve,{value:p.length===0?0:A(x)/A(p),label:String(A(x)),sublabel:`/ ${A(p)}`,color:"#92C5FD",strokeWidth:24}),s.jsx("h2",{className:"mt-6 text-balance text-center text-sm sm:text-md md:text-md",children:c.number===1?t("numberOfCopies-single"):t("numberOfCopies-plural",{numberFilter:c.number})})]}),s.jsx(O,{title:j?.packName??"",percentage:j?.percentage??0,className:"col-span-8 md:col-span-4 col-start-1 md:col-start-3 mb-4 md:mb-0",backgroundColor:j?.fill}),s.jsxs("div",{className:"col-span-8 md:col-span-2 flex flex-col items-center justify-center rounded-lg border-1 border-neutral-700 bg-neutral-800 border-solid p-3 sm:p-6 md:p-8",children:[s.jsx("h2",{className:"mb-1 text-center text-base sm:text-lg md:text-2xl",children:t("youHave")}),s.jsx("h1",{className:"mb-2 text-balance text-center font-semibold text-2xl sm:text-3xl md:text-7xl",children:o()}),s.jsx("h2",{className:"text-balance text-center text-base sm:text-lg md:text-2xl",children:t("cardsTotal")})]})]})]}),s.jsx("article",{className:"flex mx-auto max-w-7xl px-8 pt-10 -mb-4",children:s.jsx(q,{label:t("expansion",{ns:"common/sets"}),options:Q,value:f,onChange:i,show:v})}),s.jsx("article",{className:"mx-auto max-w-7xl sm:p-6 p-0 pt-6 grid grid-cols-8 gap-6",children:U.filter(m=>f==="all"&&m.openable||f===m.id).map(m=>s.jsx(Ae,{expansion:m,collectedCards:x.filter(h=>h.expansion===m.id),wantedCards:b.filter(h=>h.expansion===m.id),availableCards:p.filter(h=>h.expansion===m.id),deckbuildingMode:c.deckbuildingMode},m.id))}),l.size>0&&s.jsx("div",{className:"mx-auto max-w-2xl my-8",children:s.jsxs(z,{className:"border-1 border-neutral-700 shadow-none",children:[s.jsx(ae,{className:"h-4 w-4"}),s.jsx(G,{children:t("stats.title")}),s.jsx(W,{children:t("stats.description",{usersCount:n,collectionCount:a})})]})}),s.jsx(je,{})]})}export{st as default};
