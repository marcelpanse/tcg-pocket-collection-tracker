import{j as e,x as ee,s as V,f as te,u as z,r as d,y as Te,B as v,D as ne,z as ae,A as se,C as oe,M as Se,E as Ae,F as re,G as Me,H as Re,l as Oe,J as Fe,K as le,m as ie,L as O,N as ce,O as de,Q as Ee,S as De,T as Ie,U as Be,V as Le,W as ze,X as Ue,Y as $e,Z as He,_ as ue,$ as Ze,v as K,a0 as Ge,a1 as Ve,a2 as qe,t as G,a3 as Ke,a4 as Qe,a5 as We,n as Je}from"./index-BfDiJQPa.js";import{A as pe,b as xe,a as Xe}from"./alert-XMUMb76E.js";import{R as Q,D as Ye,u as et}from"./index-BzNf07t1.js";import{C as tt}from"./CardsTable-BdIegwgi.js";import{F as nt}from"./FancyCard-DYis79oO.js";import{P as at}from"./Card-DPGl9zQP.js";import{S as W}from"./SearchInput-DfIcUeOZ.js";import{M as st,C as ot,D as R,e as rt,T as L,a as lt,c as it}from"./useWindowDimensionsHook-B8CLTyVh.js";import{S as ct}from"./siren-DP57UADV.js";import"./utils-T-GMx6lV.js";import"./index-6N0t2Idk.js";function dt({card:a,onSelect:n,selected:l}){const i=()=>{n(a.card_id,!l)};return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("button",{type:"button",onClick:i,children:e.jsx(nt,{card:a,selected:l,size:"small"})}),e.jsx("p",{className:"text-xs text-center mt-1",children:ee(a,V.language)})]})}const ut=({children:a,className:n})=>e.jsx("div",{className:te("max-h-[300px] overflow-y-auto border border-gray-300 rounded-md",n),style:{maxHeight:"300px"},children:a});function pt({filteredCards:a}){const{t:n}=z("bulk-update"),[l,i]=d.useState(!1),[r,s]=d.useState(0),[u,x]=d.useState({}),[C,p]=d.useState(!1),[j,w]=d.useState(!1),h=Te(),N=async(t,o)=>{h.mutate({updates:t.map(m=>({card_id:m,amount_owned:o}))})},$=a.length===0,_=d.useMemo(()=>a.reduce((t,o)=>(t.some(m=>m.card_id===o.card_id)||t.push(o),t),[]),[a]);d.useEffect(()=>{if(l){const t=_.reduce((o,m)=>(o[m.card_id]=!0,o),{});x(t)}l||w(!1)},[l]);const E=(t,o)=>{x(m=>({...m,[t]:o}))},D=()=>{const t=_.reduce((o,m)=>(o[m.card_id]=!0,o),{});x(t)},A=()=>{const t=_.reduce((o,m)=>(o[m.card_id]=!1,o),{});x(t)},P=Object.values(u).filter(t=>t).length,T=()=>{r!==null&&(r>0?s(t=>(t||0)-1):r===0&&s(0)),w(!0)},I=()=>{s(t=>t?t+1:1),w(!0)},B=t=>{const o=t.target.value.trim();if(o==="")s(0);else{const m=Number(o);Number.isNaN(m)?s(0):s(m<0?0:m)}w(!0)},H=async()=>{p(!0);const t=Object.entries(u).filter(([o,m])=>m).map(([o])=>o);t.length>0&&(await N(t,r),i(!1),p(!1))};return e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"hidden sm:block",variant:"outline",onClick:()=>i(!0),disabled:$,children:n("buttonTitle")}),e.jsx(ne,{open:l,onOpenChange:i,children:e.jsxs(ae,{className:"max-w-2xl",children:[e.jsx(se,{children:e.jsx(oe,{children:n("title")})}),e.jsx(pe,{variant:"destructive",children:e.jsxs(xe,{children:[n("alert.beforeCount"),e.jsxs("strong",{children:[e.jsx("span",{style:{fontSize:"1.25rem",color:"#f3f4f6",padding:"0.25rem 0.5rem",borderRadius:"0.375rem",margin:"0 0.25rem"},children:P})," ",n("alert.cards")]})," ",n("alert.afterCount"),e.jsx("strong",{children:n("alert.warning")})]})}),e.jsxs("div",{className:"flex gap-2 justify-between",children:[e.jsx(v,{variant:"outline",onClick:A,children:n("deselectAll")}),e.jsx(v,{variant:"outline",onClick:D,children:n("selectAll")})]}),e.jsx(ut,{className:"h-64 rounded-md border p-4",children:e.jsx("div",{className:"grid grid-cols-5 gap-2",children:_.map(t=>e.jsx(dt,{card:t,onSelect:E,selected:u[t.card_id]},t.card_id))})}),e.jsxs("div",{className:"flex items-center gap-x-1 justify-center",children:[e.jsx(v,{variant:"ghost",size:"icon",onClick:T,disabled:r===null||r===0,className:"rounded-full",children:e.jsx(Se,{size:14})}),e.jsx("input",{type:"text",min:"0",value:r??0,onChange:B,placeholder:n("enterAmount"),className:"w-7 text-center border-none rounded",onFocus:t=>t.target.select()}),e.jsx(v,{variant:"ghost",size:"icon",onClick:I,className:"rounded-full",children:e.jsx(at,{size:14})})]}),e.jsxs(Ae,{children:[e.jsx(v,{variant:"outline",onClick:()=>i(!1),children:n("cancel")}),e.jsxs(v,{onClick:H,disabled:P===0||C||!j,variant:"default",children:[C&&e.jsxs("svg",{"aria-hidden":"true",className:"w-8 h-8 text-gray-200 animate-spin dark:text-gray-600 fill-blue-600",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),e.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),n(C?"batchProcessing":"batchUpdate")]})]})]})})]})}function xt(a,n){if(a.length===0)return n.length;if(n.length===0)return a.length;let l=Array(a.length+1).fill(0).map((r,s)=>s),i=Array(a.length+1);for(let r=1;r<=n.length;r++){i[0]=r;for(let s=1;s<=a.length;s++){const u=a[s-1]===n[r-1]?0:1;i[s]=Math.min(l[s]+1,i[s-1]+1,l[s-1]+u)}[l,i]=[i,l]}return l[a.length]}const mt=({allTextSearch:a,setAllTextSearch:n})=>{const{t:l}=z("search-input");return e.jsxs("div",{className:"flex items-center space-x-2 text-white/50",children:[e.jsx("input",{type:"checkbox",id:"checkbox",checked:a,onChange:()=>n(!a),className:"w-4 h-4"}),e.jsx("label",{htmlFor:"checkbox",className:"text-xs",children:l("allTextLabel")}),e.jsx(st,{id:"allTextSearch",style:{maxWidth:"300px",whiteSpace:"normal"},clickable:!0}),e.jsx(ot,{className:"h-4 w-4","data-tooltip-id":"allTextSearch","data-tooltip-content":l("allTextTooltip")})]})};var U="Popover",[me]=Oe(U,[re]),F=re(),[ht,k]=me(U),he=a=>{const{__scopePopover:n,children:l,open:i,defaultOpen:r,onOpenChange:s,modal:u=!1}=a,x=F(n),C=d.useRef(null),[p,j]=d.useState(!1),[w,h]=Me({prop:i,defaultProp:r??!1,onChange:s,caller:U});return e.jsx(Re,{...x,children:e.jsx(ht,{scope:n,contentId:Fe(),triggerRef:C,open:w,onOpenChange:h,onOpenToggle:d.useCallback(()=>h(N=>!N),[h]),hasCustomAnchor:p,onCustomAnchorAdd:d.useCallback(()=>j(!0),[]),onCustomAnchorRemove:d.useCallback(()=>j(!1),[]),modal:u,children:l})})};he.displayName=U;var fe="PopoverAnchor",ft=d.forwardRef((a,n)=>{const{__scopePopover:l,...i}=a,r=k(fe,l),s=F(l),{onCustomAnchorAdd:u,onCustomAnchorRemove:x}=r;return d.useEffect(()=>(u(),()=>x()),[u,x]),e.jsx(ce,{...s,...i,ref:n})});ft.displayName=fe;var ge="PopoverTrigger",Ce=d.forwardRef((a,n)=>{const{__scopePopover:l,...i}=a,r=k(ge,l),s=F(l),u=le(n,r.triggerRef),x=e.jsx(ie.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":ye(r.open),...i,ref:u,onClick:O(a.onClick,r.onOpenToggle)});return r.hasCustomAnchor?x:e.jsx(ce,{asChild:!0,...s,children:x})});Ce.displayName=ge;var q="PopoverPortal",[gt,Ct]=me(q,{forceMount:void 0}),ve=a=>{const{__scopePopover:n,forceMount:l,children:i,container:r}=a,s=k(q,n);return e.jsx(gt,{scope:n,forceMount:l,children:e.jsx(de,{present:l||s.open,children:e.jsx(Ee,{asChild:!0,container:r,children:i})})})};ve.displayName=q;var S="PopoverContent",je=d.forwardRef((a,n)=>{const l=Ct(S,a.__scopePopover),{forceMount:i=l.forceMount,...r}=a,s=k(S,a.__scopePopover);return e.jsx(de,{present:i||s.open,children:s.modal?e.jsx(jt,{...r,ref:n}):e.jsx(wt,{...r,ref:n})})});je.displayName=S;var vt=Be("PopoverContent.RemoveScroll"),jt=d.forwardRef((a,n)=>{const l=k(S,a.__scopePopover),i=d.useRef(null),r=le(n,i),s=d.useRef(!1);return d.useEffect(()=>{const u=i.current;if(u)return De(u)},[]),e.jsx(Ie,{as:vt,allowPinchZoom:!0,children:e.jsx(we,{...a,ref:r,trapFocus:l.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:O(a.onCloseAutoFocus,u=>{u.preventDefault(),s.current||l.triggerRef.current?.focus()}),onPointerDownOutside:O(a.onPointerDownOutside,u=>{const x=u.detail.originalEvent,C=x.button===0&&x.ctrlKey===!0,p=x.button===2||C;s.current=p},{checkForDefaultPrevented:!1}),onFocusOutside:O(a.onFocusOutside,u=>u.preventDefault(),{checkForDefaultPrevented:!1})})})}),wt=d.forwardRef((a,n)=>{const l=k(S,a.__scopePopover),i=d.useRef(!1),r=d.useRef(!1);return e.jsx(we,{...a,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{a.onCloseAutoFocus?.(s),s.defaultPrevented||(i.current||l.triggerRef.current?.focus(),s.preventDefault()),i.current=!1,r.current=!1},onInteractOutside:s=>{a.onInteractOutside?.(s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const u=s.target;l.triggerRef.current?.contains(u)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),we=d.forwardRef((a,n)=>{const{__scopePopover:l,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:s,disableOutsidePointerEvents:u,onEscapeKeyDown:x,onPointerDownOutside:C,onFocusOutside:p,onInteractOutside:j,...w}=a,h=k(S,l),N=F(l);return Le(),e.jsx(ze,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:s,children:e.jsx(Ue,{asChild:!0,disableOutsidePointerEvents:u,onInteractOutside:j,onEscapeKeyDown:x,onPointerDownOutside:C,onFocusOutside:p,onDismiss:()=>h.onOpenChange(!1),children:e.jsx($e,{"data-state":ye(h.open),role:"dialog",id:h.contentId,...N,...w,ref:n,style:{...w.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),be="PopoverClose",bt=d.forwardRef((a,n)=>{const{__scopePopover:l,...i}=a,r=k(be,l);return e.jsx(ie.button,{type:"button",...i,ref:n,onClick:O(a.onClick,()=>r.onOpenChange(!1))})});bt.displayName=be;var yt="PopoverArrow",Nt=d.forwardRef((a,n)=>{const{__scopePopover:l,...i}=a,r=F(l);return e.jsx(He,{...r,...i,ref:n})});Nt.displayName=yt;function ye(a){return a?"open":"closed"}var Pt=he,kt=Ce,_t=ve,Ne=je;const Tt=Pt,St=kt,Pe=d.forwardRef(({className:a,align:n="center",sideOffset:l=4,...i},r)=>e.jsx(_t,{children:e.jsx(Ne,{ref:r,align:n,sideOffset:l,className:te("z-50 w-72 rounded-md border border-neutral-200 bg-white p-4 text-neutral-950 shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-neutral-800 dark:bg-neutral-950 dark:text-neutral-50",a),...i})}));Pe.displayName=Ne.displayName;const J=["all","missing","owned"],X=["all",...rt],At=["default","recent","expansion-newest"],Mt=[...it.filter(a=>a!=="")],Rt=({cards:a,filters:n,setFilters:l,onFiltersChanged:i,visibleFilters:r,filtersDialog:s,batchUpdate:u,share:x,missionsButton:C})=>{const{t:p}=z(["pages/collection","common/sets","common/packs","filters"]),j=ue(),{setIsProfileDialogOpen:w}=Ze(),h=t=>{l(o=>{const m={...o,...t},c=A(m);return i(c),m})},N=t=>h({search:t}),$=t=>h({allTextSearch:t}),_=t=>h({pack:t}),E=t=>h({rarity:t}),D=t=>h({owned:t}),A=t=>{if(!a)return null;let o=Ve;if(t.deckbuildingMode&&(o=o.filter(c=>qe.includes(c.rarity)||c.rarity===""||c.rarity==="P")),t.expansion!=="all"&&(o=o.filter(c=>c.expansion===t.expansion)),t.pack!=="all"&&(o=o.filter(c=>c.pack===t.pack||c.pack==="everypack")),t.owned!=="all"&&(t.owned==="owned"?o=o.filter(c=>a.find(f=>f.card_id===c.card_id&&f.amount_owned>0)):t.owned==="missing"&&(o=o.filter(c=>!a.find(f=>f.card_id===c.card_id&&f.amount_owned>0)))),t.sortBy==="recent")o=[...o].sort((c,f)=>{const b=a.find(y=>y.card_id===c.card_id)?.updated_at,g=a.find(y=>y.card_id===f.card_id)?.updated_at;return b&&g?new Date(g).getTime()-new Date(b).getTime():b&&!g?-1:1});else if(t.sortBy==="expansion-newest"){const c=[...G].reverse().slice(1).concat(G[G.length-1]);o=[...o].sort((f,b)=>{const g=c.findIndex(M=>M.id===f.expansion),y=c.findIndex(M=>M.id===b.expansion);return g!==y?g-y:f.card_id.localeCompare(b.card_id,V.language||"en",{numeric:!0})})}o=o.filter(c=>t.rarity.length===0?!0:c.rarity!==""&&t.rarity.includes(c.rarity)),o=o.filter(c=>t.cardType.length===0?!0:c.card_type.toLowerCase()==="trainer"?t.cardType.includes("trainer"):c.energy!==""&&t.cardType.includes(c.energy.toLowerCase())),t.search&&(o=o.filter(f=>{const b=ee(f,V.language).toLowerCase(),g=t.search.toLowerCase();let y=!1;t.allTextSearch&&(y=f.ability&&(f.ability.name.toLowerCase().includes(g)||f.ability.effect.toLowerCase().includes(g))||f.attacks.some(Z=>Z.name?.toLowerCase().includes(g)||Z.effect?.toLowerCase()!=="no effect"&&Z.effect?.toLowerCase()?.includes(g)));const M=b.includes(g),ke=xt(b,g)<=2,_e=f.card_id.toLowerCase().includes(g);return y||M||ke||_e}));const m=new Map((a||[]).map(c=>[c.card_id,c.amount_owned]));for(const c of o)c.linkedCardID?c.amount_owned=0:t.deckbuildingMode?c.amount_owned=c.alternate_versions.reduce((f,b)=>f+(m.get(b.card_id)||0),0):c.amount_owned=m.get(c.card_id)||0;return o=o.filter(c=>(c.amount_owned||0)>=t.minNumber),t.maxNumber!==100&&(o=o.filter(c=>(c.amount_owned||0)<=t.maxNumber)),o},P=d.useMemo(()=>A(n),[n,a]),T=d.useMemo(()=>{const t=K(n.expansion);if(!(!t||t.packs.length<=1))return["all",...t.packs.map(o=>o.name).filter(o=>o!=="everypack")]},[n.expansion]);d.useEffect(()=>{i(P)},[]);function I(t){h({expansion:t,pack:"all"})}const B=t=>{const o=t==="all"?"all":K(t)?.name??"unknown";return p(o,{ns:"common/sets"})};function H(t){return t==="trainer"?"T":e.jsx("img",{src:`/images/energy/${t}.webp`,alt:t,className:"h-4"})}return e.jsxs("div",{id:"filterbar",className:"flex flex-col gap-x-2 flex-wrap",children:[r?.expansions&&e.jsxs("div",{className:"flex gap-x-2 px-4 mb-2",children:[e.jsx(R,{label:p("expansion",{ns:"common/sets"}),options:X,value:n.expansion,onChange:I,show:B}),T&&e.jsx(L,{options:T,value:n.pack,onChange:_,show:t=>p(t,{ns:"common/packs"})})]}),e.jsxs("div",{className:"gap-2 flex-row gap-y-1 px-4 flex",children:[r?.search&&e.jsx(W,{className:"w-full sm:w-32",setSearchValue:N}),r?.owned&&e.jsx(L,{options:J,value:n.owned,onChange:D,show:t=>p(t,{ns:"filters",keyPrefix:"f-owned"})}),r?.rarity&&e.jsxs(Tt,{children:[e.jsx(St,{asChild:!0,children:e.jsxs(v,{variant:"outline",children:[p("rarity",{ns:"filters"})," (",n.rarity.length,")"]})}),e.jsx(Pe,{className:"w-28",children:e.jsx(Q,{className:"flex-col bg-transparent",rarityFilter:n.rarity,setRarityFilter:E,deckbuildingMode:n.deckbuildingMode})})]}),s&&e.jsxs(ne,{children:[e.jsx(Ge,{asChild:!0,children:e.jsx(v,{variant:"outline",children:p("filters.allFilters")})}),e.jsxs(ae,{className:"border-1 border-neutral-700 shadow-none max-h-[90vh] overflow-y-auto content-start",children:[e.jsx(se,{children:e.jsx(oe,{children:p("filters.filtersCount",{count:(P||[]).filter(t=>!t.linkedCardID).length})})}),e.jsxs("div",{className:"flex flex-col gap-3",children:[s.search&&e.jsx(W,{className:"w-full bg-neutral-900",setSearchValue:N}),s.allTextSearch&&e.jsx(mt,{allTextSearch:n.allTextSearch,setAllTextSearch:$}),s.expansions&&e.jsx(R,{className:"bg-neutral-900",label:p("expansion",{ns:"common/sets"}),options:X,value:n.expansion,onChange:I,show:B}),s.pack&&T&&e.jsx(L,{className:"w-full bg-neutral-900",options:T,value:n.pack,onChange:_,show:t=>p(t,{ns:"common/packs"})}),s.rarity&&e.jsx(Q,{className:"bg-neutral-900",rarityFilter:n.rarity,setRarityFilter:E,deckbuildingMode:n.deckbuildingMode}),s.cardType&&e.jsx(lt,{className:"bg-neutral-900",options:Mt,value:n.cardType,onChange:t=>h({cardType:t}),show:H}),s.owned&&e.jsx(L,{className:"w-full bg-neutral-900",options:J,value:n.owned,onChange:D,show:t=>p(t,{ns:"filters",keyPrefix:"f-owned"})}),s.sortBy&&e.jsx(R,{className:"bg-neutral-900",label:p("f-sortBy.sortBy",{ns:"filters"}),options:At,value:n.sortBy,onChange:t=>h({sortBy:t}),show:t=>p(`f-sortBy.${t}`,{ns:"filters"})}),s.amount&&e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"bg-neutral-900",label:p("f-number.minNum",{ns:"filters"}),options:[0,1,2,3,4,5,6,7,8,9,10,100],value:n.minNumber,onChange:t=>h({minNumber:t})}),e.jsx(R,{className:"bg-neutral-900",label:p("f-number.maxNum",{ns:"filters"}),options:[0,1,2,3,4,5,6,7,8,9,10,100],value:n.maxNumber,onChange:t=>h({maxNumber:t})})]}),s.deckBuildingMode&&e.jsx(Ye,{deckbuildingMode:n.deckbuildingMode,setDeckbuildingMode:t=>h({deckbuildingMode:t})}),e.jsx(v,{variant:"outline",className:"!text-red-700",onClick:()=>{const t={search:"",expansion:"all",pack:"all",cardType:[],rarity:[],owned:"all",sortBy:"expansion-newest",minNumber:0,maxNumber:100,deckbuildingMode:!1,allTextSearch:!1},o=A(t);i(o),l(t)},children:p("filters.clear")}),C&&e.jsx(v,{className:"mt-2",variant:"outline",onClick:()=>j("/collection/missions"),children:p("goToMissions")})]})]})]}),u&&e.jsx(pt,{filteredCards:P||[],disabled:!P||P.length===0}),x&&e.jsx(v,{variant:"outline",onClick:()=>w(!0),children:p("filters.share")})]})]})};function Y({cards:a,isPublic:n,extraOffset:l}){const i=et({query:"(max-width: 767px)"}),[r,s]=d.useState(null),[u,x]=d.useState({search:"",expansion:"all",pack:"all",cardType:[],rarity:[],owned:"all",sortBy:"expansion-newest",minNumber:0,maxNumber:100,deckbuildingMode:!1,allTextSearch:!1}),[C,p]=d.useState(!1);return d.useEffect(()=>{p(!0);const j=setTimeout(()=>p(!1),100);return()=>clearTimeout(j)},[u]),e.jsxs(e.Fragment,{children:[e.jsx(Rt,{cards:a,filters:u,setFilters:x,onFiltersChanged:j=>s(j),visibleFilters:{expansions:!i,allTextSearch:!i,search:!0,owned:!i,rarity:!i},filtersDialog:{expansions:!0,pack:!0,search:!0,owned:!0,sortBy:!0,rarity:!0,cardType:!0,amount:!0,deckBuildingMode:!0,allTextSearch:!0},batchUpdate:!n,missionsButton:!n,share:!0}),r&&e.jsx(tt,{cards:r,resetScrollTrigger:C,showStats:!u.deckbuildingMode,extraOffset:l,editable:!u.deckbuildingMode&&!n})]})}function Zt(){const{t:a}=z(["pages/collection","common"]),{friendId:n}=Ke(),l=ue(),{data:i}=Qe(n),{data:r}=We(n),{data:s}=Je();return n?i===null?e.jsx("p",{className:"text-xl text-center py-8",children:a("common:noAccount")}):r===null?e.jsx("p",{className:"text-xl text-center py-8",children:"Not a public account"}):r===void 0||i===void 0?e.jsxs("p",{className:"text-xl text-center py-8",children:[a("common:loading"),"..."]}):e.jsxs("div",{className:"flex flex-col gap-y-1 mx-auto max-w-[900px]",children:[e.jsxs(pe,{className:"mb-4 border-1 border-neutral-700 shadow-none",children:[e.jsx(ct,{className:"h-4 w-4"}),e.jsx(Xe,{children:a("publicCollectionTitle",{username:i?.username})}),e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center",children:[a("publicCollectionDescription"),e.jsx(v,{className:"mb-4",onClick:()=>l(`/trade/${i?.friend_id}`),children:a("showPossibleTrades")})]})})]}),e.jsx(Y,{cards:r,isPublic:!0,extraOffset:136})]}):s===void 0?e.jsxs("p",{className:"text-xl text-center py-8",children:[a("common:loading"),"..."]}):e.jsx("div",{className:"flex flex-col gap-y-1 mx-auto max-w-[900px]",children:e.jsx(Y,{cards:s,isPublic:!1,extraOffset:20})})}export{Zt as default};
