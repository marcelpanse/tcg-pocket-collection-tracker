import{e as h,aK as b,N as _,a5 as M,aI as I,r as n,j as e,f as B,x as D,q as L,B as x,aL as F}from"./index-C2WLLa21.js";import{F as S}from"./FancyCard-Dc6hRgQN.js";const T=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],V=h("plus",T);const E=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],O=h("trash-2",E),i={};function R({card:a,onImageClick:C,className:g,editable:j=!0}){const{setIsLoginDialogOpen:d}=b(),{setSelectedCardId:y}=_(),u=M(),r=I(),[s,N]=n.useState(a.amount_owned||0),[o,f]=n.useState(void 0);n.useEffect(()=>{f(s)},[s]);const l=n.useCallback(async c=>{const t=a.card_id,p=Math.max(0,c);N(p),i[t]&&window.clearTimeout(i[t]),i[t]=window.setTimeout(async()=>{u.mutate({updates:[{card_id:t,internal_id:a.internal_id,amount_owned:p}]})},1e3)},[s,u,a.card_id]),k=n.useCallback(async()=>{await l(s+1)},[l,d]),m=n.useCallback(async()=>{await l(s-1)},[l,d]),v=n.useCallback(async()=>{a.collected&&o===0?r.mutate({cardId:a.card_id}):await m()},[a.collected,a.card_id,o,r,m]),w=async c=>{const t=c.target.value===""?0:Number.parseInt(c.target.value,10);!Number.isNaN(t)&&t>=0&&await l(t)};return e.jsxs("div",{className:B("group flex flex-col items-center rounded-lg",g),children:[e.jsx("button",{type:"button",className:"cursor-pointer",onClick:()=>{y(a.internal_id),C?.()},children:e.jsx(S,{card:a,selected:!!a.collected})}),e.jsxs("p",{className:"w-full min-w-0 text-[12px] pt-2 text-center font-semibold leading-tight",children:[e.jsx("span",{className:"block md:inline",children:a.card_id}),e.jsx("span",{className:"hidden md:inline",children:" â€“ "}),e.jsx("span",{className:"block md:inline truncate",children:D(a,L.language)})]}),e.jsx("div",{className:"flex items-center gap-x-1",children:j?e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"ghost",size:"icon",onClick:v,className:"rounded-full",tabIndex:-1,disabled:!a.collected&&o===0,title:o===0?"Remove from card dex":"Decrease amount",children:a.collected&&o===0?e.jsx(O,{}):e.jsx(F,{})}),e.jsx("input",{min:"0",max:"99",type:"text",value:o,onChange:w,className:"w-7 text-center border-none rounded",onFocus:c=>c.target.select()}),e.jsx(x,{variant:"ghost",size:"icon",className:"rounded-full",onClick:k,tabIndex:-1,title:"Increase amount",children:e.jsx(V,{})})]}):e.jsx("span",{className:"mt-1",children:s})})]})}export{R as C,O as T};
