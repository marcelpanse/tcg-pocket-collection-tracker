import{r,aD as C,aF as z,an as K,j as e,l as _,aG as H,m as N,aq as w,aE as W,ar as R,at as X,bb as Y,bc as J,f as I,u as Q,n as Z,S as ee,E as ae,U as se,V as te,W as oe,X as re,v as b,s as k,D as ne,z as ie,A as ce,y as le,Y as de}from"./index-BTTmp02Y.js";import{C as me}from"./Card-B94yVrD1.js";import{C as ue}from"./CardLine-DHniA7aw.js";import"./FancyCard-C781Q2Ho.js";var y="Radio",[pe,E]=_(y),[xe,fe]=pe(y),S=r.forwardRef((i,l)=>{const{__scopeRadio:a,name:n,checked:o=!1,required:c,disabled:d,value:p="on",onCheck:s,form:x,...f}=i,[m,h]=r.useState(null),u=w(l,j=>h(j)),t=r.useRef(!1),g=m?x||!!m.closest("form"):!0;return e.jsxs(xe,{scope:a,checked:o,disabled:d,children:[e.jsx(N.button,{type:"button",role:"radio","aria-checked":o,"data-state":G(o),"data-disabled":d?"":void 0,disabled:d,value:p,...f,ref:u,onClick:R(i.onClick,j=>{o||s?.(),g&&(t.current=j.isPropagationStopped(),t.current||j.stopPropagation())})}),g&&e.jsx(P,{control:m,bubbles:!t.current,name:n,value:p,checked:o,required:c,disabled:d,form:x,style:{transform:"translateX(-100%)"}})]})});S.displayName=y;var D="RadioIndicator",A=r.forwardRef((i,l)=>{const{__scopeRadio:a,forceMount:n,...o}=i,c=fe(D,a);return e.jsx(X,{present:n||c.checked,children:e.jsx(N.span,{"data-state":G(c.checked),"data-disabled":c.disabled?"":void 0,...o,ref:l})})});A.displayName=D;var he="RadioBubbleInput",P=r.forwardRef(({__scopeRadio:i,control:l,checked:a,bubbles:n=!0,...o},c)=>{const d=r.useRef(null),p=w(d,c),s=Y(a),x=J(l);return r.useEffect(()=>{const f=d.current;if(!f)return;const m=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(m,"checked").set;if(s!==a&&u){const t=new Event("click",{bubbles:n});u.call(f,a),f.dispatchEvent(t)}},[s,a,n]),e.jsx(N.input,{type:"radio","aria-hidden":!0,defaultChecked:a,...o,tabIndex:-1,ref:p,style:{...o.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});P.displayName=he;function G(i){return i?"checked":"unchecked"}var ge=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],v="RadioGroup",[je]=_(v,[C,E]),T=C(),M=E(),[Ne,ve]=je(v),F=r.forwardRef((i,l)=>{const{__scopeRadioGroup:a,name:n,defaultValue:o,value:c,required:d=!1,disabled:p=!1,orientation:s,dir:x,loop:f=!0,onValueChange:m,...h}=i,u=T(a),t=z(x),[g,j]=K({prop:c,defaultProp:o??null,onChange:m,caller:v});return e.jsx(Ne,{scope:a,name:n,required:d,disabled:p,value:g,onValueChange:j,children:e.jsx(H,{asChild:!0,...u,orientation:s,dir:t,loop:f,children:e.jsx(N.div,{role:"radiogroup","aria-required":d,"aria-orientation":s,"data-disabled":p?"":void 0,dir:t,...h,ref:l})})})});F.displayName=v;var O="RadioGroupItem",$=r.forwardRef((i,l)=>{const{__scopeRadioGroup:a,disabled:n,...o}=i,c=ve(O,a),d=c.disabled||n,p=T(a),s=M(a),x=r.useRef(null),f=w(l,x),m=c.value===o.value,h=r.useRef(!1);return r.useEffect(()=>{const u=g=>{ge.includes(g.key)&&(h.current=!0)},t=()=>h.current=!1;return document.addEventListener("keydown",u),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",u),document.removeEventListener("keyup",t)}},[]),e.jsx(W,{asChild:!0,...p,focusable:!d,active:m,children:e.jsx(S,{disabled:d,required:c.required,checked:m,...s,...o,name:c.name,ref:f,onCheck:()=>c.onValueChange(o.value),onKeyDown:R(u=>{u.key==="Enter"&&u.preventDefault()}),onFocus:R(o.onFocus,()=>{h.current&&x.current?.click()})})})});$.displayName=O;var Re="RadioGroupIndicator",B=r.forwardRef((i,l)=>{const{__scopeRadioGroup:a,...n}=i,o=M(a);return e.jsx(A,{...o,...n,ref:l})});B.displayName=Re;var we=F,L=$,U=B;const ye=we,V=r.forwardRef(({className:i,...l},a)=>e.jsx(L,{ref:a,className:I("w-4 h-4 mr-2 rounded-full bg-neutral-700 hover:bg-neutral-500",i),...l}));V.displayName=L.displayName;const q=r.forwardRef(({className:i,...l},a)=>e.jsx(U,{ref:a,className:I("w-2 h-2 mx-1 xm-auto my-auto rounded-full flex bg-neutral-300",i),...l}));q.displayName=U.displayName;function Ie({cardId:i,onClose:l}){const{t:a}=Q(["pages/card-detail","common/types","common/packs","common/sets"]),[n,o]=r.useState(i),{data:c=[]}=Z(),[d,p]=r.useState(!1),s=r.useMemo(()=>ee(n)||{},[n]),x=r.useMemo(()=>c.find(t=>t.card_id===n),[n]),f=r.useMemo(()=>s.alternate_versions.map(t=>({...t,amount_owned:c.find(g=>g.card_id===t.card_id)?.amount_owned??0})),[s,c]),m=r.useMemo(()=>ae(s.expansion),[s]);if(!s)return console.log(`Unrecognized card_id: ${n}`),null;if(!m)return console.log(`Unrecognized expansion: ${s.expansion}`),null;const h=s.pack==="everypack"?m?.packs[0].name:s.pack,u=t=>new Intl.DateTimeFormat(void 0,{dateStyle:"long",timeStyle:"long"}).format(new Date(t));return e.jsx(se,{open:!0,onOpenChange:t=>{t||l()},children:e.jsxs(te,{className:"transition-all duration-300 ease-in-out border-slate-600 overflow-y-auto w-full md:w-[725px]",children:[e.jsx(oe,{children:e.jsxs(re,{children:[b(s,k.language)," ",s.rarity]})}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"px-10 py-4 w-full",children:e.jsx("div",{className:"cursor-pointer",children:e.jsx(me,{className:"w-full",card:{...s,amount_owned:x?.amount_owned||0},onImageClick:()=>p(!0)},n)})}),e.jsxs(ne,{open:d,onOpenChange:p,children:[e.jsx(ie,{className:"hidden",children:e.jsx(ce,{children:"Card image dialog"})}),e.jsx(le,{className:"flex items-center justify-center p-0 max-w-3xl max-h-[90vh]",children:s.image&&e.jsx("img",{src:s.image,alt:b(s,k.language),className:"w-full h-full object-scale-down",onClick:()=>p(!1)})})]}),e.jsxs("div",{className:"p-4 w-full",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h2",{className:"text-xl font-semibold",children:a("text.alternateVersions")}),e.jsxs(ye,{className:"w-fit",value:n,onValueChange:o,children:[f.map(t=>e.jsxs("label",{className:"flex items-center cursor-pointer",htmlFor:`radio-${t.card_id}`,children:[e.jsx(V,{id:`radio-${t.card_id}`,value:t.card_id,children:e.jsx(q,{})}),e.jsx(ue,{className:"w-auto bg-transparent",card_id:t.card_id,rarity:"w-14",name:"hidden",details:"hidden",amount:"pl-4"})]},t.card_id)),e.jsxs("p",{className:"flex items-baseline mt-1",children:[e.jsxs("span",{className:"mr-4",children:[a("text.totalAmount"),":"]}),e.jsxs("span",{className:"text-neutral-400 ml-auto mr-2",children:["Ã—",f.reduce((t,g)=>t+g.amount_owned,0)]})]})]})]}),e.jsxs("p",{className:"mt-8 flex",children:[e.jsx("strong",{className:"block min-w-[175px]",children:a("text.expansion")})," ",s.expansion]}),e.jsxs("p",{className:"mt-1 flex",children:[e.jsx("strong",{className:"block min-w-[175px]",children:a("text.pack")})," ",a(`${s.pack}`,{ns:"common/packs"})]}),e.jsxs("p",{className:"mt-1 flex",children:[e.jsx("strong",{className:"block min-w-[175px]",children:"Energy"})," ",s.energy]}),e.jsxs("p",{className:"mt-1 flex",children:[e.jsx("strong",{className:"block min-w-[175px]",children:a("text.weakness")})," ",a(`${s.weakness}`,{ns:"common/types"})||"N/A"]}),e.jsxs("p",{className:"mt-1 flex",children:[e.jsx("strong",{className:"block min-w-[175px]",children:a("text.hp")})," ",s.hp]}),e.jsxs("p",{className:"mt-1 flex",children:[e.jsx("strong",{className:"block min-w-[175px]",children:a("text.retreat")})," ",s.retreat||"N/A"]}),e.jsxs("p",{className:"mt-1 flex",children:[e.jsx("strong",{className:"block min-w-[175px]",children:a("text.ability")})," ",s.ability?.name??e.jsx("i",{children:"None"})]}),s.ability&&e.jsxs("p",{className:"mt-1 flex",children:[e.jsx("strong",{className:"block min-w-[175px]",children:a("text.abilityEffect")})," ",s.ability.effect]}),e.jsxs("p",{className:"mt-1 flex",children:[e.jsx("strong",{className:"block min-w-[175px]",children:a("text.cardType")})," ",a(`cardType.${s.card_type}`)]}),e.jsxs("p",{className:"mt-1 flex",children:[e.jsx("strong",{className:"block min-w-[175px]",children:a("text.evolutionType")})," ",a(`evolutionType.${s.evolution_type}`)]}),m&&h&&e.jsxs("p",{className:"mt-1 flex",children:[e.jsx("strong",{className:"block min-w-[175px]",children:a("text.chanceToPull",{ns:"pages/card-detail"})}),de(m,h,s).toFixed(2),"%"]}),e.jsxs("p",{className:"mt-1 flex",children:[e.jsx("strong",{className:"block min-w-[175px]",children:a("text.craftingCost")})," ",s.crafting_cost]}),e.jsxs("p",{className:"mt-1 flex",children:[e.jsx("strong",{className:"block min-w-[175px]",children:a("text.artist")})," ",s.artist]}),e.jsxs("p",{className:"mt-4 text-neutral-400 text-sm flex",children:[e.jsx("strong",{className:"font-semibold",children:a("text.updated")})," ",x?.updated_at?u(x.updated_at):"N/A"]})]})]})]})})}export{Ie as default};
