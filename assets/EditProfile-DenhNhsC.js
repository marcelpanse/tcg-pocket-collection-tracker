import{j as t}from"./query-vendor-DjONLwH6.js";import{a as re,$ as ae,h as ne,a0 as oe,f as ce,w as de,M as me,O as fe,a1 as se,a2 as ue,a3 as pe,B as te,I as ee,a4 as xe,a5 as je}from"./index-Bj3cQdcQ.js";import{a as he,b as L,F as be,f as ge,u as _e,c as q,e as G,d as J,g as K,h as ie,S as De}from"./form-h1AOsC2K.js";import{j as Se}from"./react-vendor-Dbb1veav.js";import{a as Ne,b as Pe,A as ve}from"./alert-C_Xy0iXz.js";import{u as Fe}from"./i18n-vendor-B8-LMkwa.js";import{S as Ie}from"./siren-Culjnev8.js";import"./ui-vendor-CGPvdk4X.js";import"./supabase-vendor-D8YWDR9M.js";import"./charts-vendor-DNUKMCvP.js";import"./xlsx-vendor-Bc83wVOq.js";import"./index-Bnn3LD3j.js";const Re=()=>{const e=re.c(90),Q=Se(),{data:n}=ae(),{data:o}=ne(),r=oe(),{isProfileDialogOpen:V,setIsProfileDialogOpen:c}=ce(),{toast:$}=de(),{t:s}=Fe("edit-profile");let d,w;if(e[0]!==s){const l=me({username:se().min(2,{message:s("usernameTooShort")}),friend_id:se().regex(/^\d{16}$/,{message:s("friendIdInvalid")}),is_public:fe().optional()});w=_e,d=he(l),e[0]=s,e[1]=d,e[2]=w}else d=e[1],w=e[2];const W=o?.username??"",X=o?.friend_id??"",Y=o?.is_public??!1;let m;e[3]!==W||e[4]!==X||e[5]!==Y?(m={username:W,friend_id:X,is_public:Y},e[3]=W,e[4]=X,e[5]=Y,e[6]=m):m=e[6];let z;e[7]!==d||e[8]!==m?(z={resolver:d,values:m},e[7]=d,e[8]=m,e[9]=z):z=e[9];const i=w(z);let R;e[10]!==s||e[11]!==$||e[12]!==r||e[13]!==n?.user.email?(R=l=>{r.mutate({email:n?.user.email,username:l.username,friend_id:l.friend_id,is_public:l.is_public},{onSuccess:()=>$({title:s("accountSaved"),variant:"default"}),onError:a=>{console.error("error saving account",a),$({title:s("accountSavingError"),variant:"destructive"})}})},e[10]=s,e[11]=$,e[12]=r,e[13]=n?.user.email,e[14]=R):R=e[14];const Z=R;let f;e[15]!==s?(f=s("editProfile"),e[15]=s,e[16]=f):f=e[16];let u;e[17]!==f?(u=t.jsx(ue,{children:t.jsx(pe,{children:f})}),e[17]=f,e[18]=u):u=e[18];let U;e[19]===Symbol.for("react.memo_cache_sentinel")?(U=t.jsx(Ie,{className:"size-4"}),e[19]=U):U=e[19];let p;e[20]!==s?(p=s("updateProfile.title"),e[20]=s,e[21]=p):p=e[21];let x;e[22]!==p?(x=t.jsx(Ne,{children:p}),e[22]=p,e[23]=x):x=e[23];let j;e[24]!==s?(j=s("updateProfile.description"),e[24]=s,e[25]=j):j=e[25];let h;e[26]!==j?(h=t.jsx(Pe,{children:j}),e[26]=j,e[27]=h):h=e[27];let b;e[28]!==x||e[29]!==h?(b=t.jsxs(ve,{className:"mb-2",children:[U,x,h]}),e[28]=x,e[29]=h,e[30]=b):b=e[30];let g;e[31]!==Q||e[32]!==c?(g=l=>{l.preventDefault(),c(!1),Q("/trade/settings")},e[31]=Q,e[32]=c,e[33]=g):g=e[33];let _;e[34]!==s?(_=s("openTradingSettings"),e[34]=s,e[35]=_):_=e[35];let D;e[36]!==g||e[37]!==_?(D=t.jsx(te,{onClick:g,children:_}),e[36]=g,e[37]=_,e[38]=D):D=e[38];let S;e[39]!==i||e[40]!==Z?(S=i.handleSubmit(Z),e[39]=i,e[40]=Z,e[41]=S):S=e[41];let N;e[42]!==s||e[43]!==n?.user.email?(N=t.jsx(L,{name:"email",render:()=>t.jsxs(q,{children:[t.jsx(G,{children:s("email")}),t.jsx(J,{className:"mt-1",children:t.jsx(ee,{placeholder:s("email"),disabled:!0,value:n?.user.email})}),t.jsx(K,{children:s("registeredEmail")})]})}),e[42]=s,e[43]=n?.user.email,e[44]=N):N=e[44];let P;e[45]!==s?(P=l=>{const{field:a}=l;return t.jsxs(q,{children:[t.jsx(G,{children:s("username")}),t.jsx(J,{className:"mt-1",children:t.jsx(ee,{placeholder:s("username"),...a})}),t.jsx(K,{children:s("usernameDescription")}),t.jsx(ie,{})]})},e[45]=s,e[46]=P):P=e[46];let v;e[47]!==i.control||e[48]!==P?(v=t.jsx(L,{control:i.control,name:"username",render:P}),e[47]=i.control,e[48]=P,e[49]=v):v=e[49];let F;e[50]!==s?(F=l=>{const{field:a}=l;return t.jsxs(q,{children:[t.jsx(G,{children:s("friendID")}),t.jsx(J,{className:"mt-1",children:t.jsx(ee,{placeholder:s("friendID"),...a})}),t.jsx(K,{children:s("friendIDDescription")}),t.jsx(ie,{})]})},e[50]=s,e[51]=F):F=e[51];let I;e[52]!==i.control||e[53]!==F?(I=t.jsx(L,{control:i.control,name:"friend_id",render:F}),e[52]=i.control,e[53]=F,e[54]=I):I=e[54];let A;e[55]!==s?(A=l=>{const{field:a}=l;return t.jsxs(q,{className:"flex flex-col items-start",children:[t.jsx(J,{className:"mt-2",children:t.jsxs(G,{className:"flex items-center",children:[s("isPublicToggle"),t.jsx(De,{className:"ml-2",checked:a.value,onCheckedChange:a.onChange})]})}),t.jsx(K,{children:s("isPublicDescription")})]})},e[55]=s,e[56]=A):A=e[56];let C;e[57]!==i.control||e[58]!==A?(C=t.jsx(L,{control:i.control,name:"is_public",render:A}),e[57]=i.control,e[58]=A,e[59]=C):C=e[59];const le=r.isPending;let T;e[60]!==s?(T=s("save"),e[60]=s,e[61]=T):T=e[61];let k;e[62]!==r.isPending?(k=r.isPending&&t.jsx("div",{className:"ml-2 inline-block animate-spin rounded-full size-4 border-2 border-black border-t-transparent"}),e[62]=r.isPending,e[63]=k):k=e[63];let E;e[64]!==T||e[65]!==k||e[66]!==r.isPending?(E=t.jsxs(te,{type:"submit",className:"block ml-auto",disabled:le,children:[T,k]}),e[64]=T,e[65]=k,e[66]=r.isPending,e[67]=E):E=e[67];let O;e[68]!==S||e[69]!==N||e[70]!==v||e[71]!==I||e[72]!==C||e[73]!==E?(O=t.jsxs("form",{onSubmit:S,className:"space-y-8",children:[N,v,I,C,E]}),e[68]=S,e[69]=N,e[70]=v,e[71]=I,e[72]=C,e[73]=E,e[74]=O):O=e[74];let y;e[75]!==i||e[76]!==O?(y=t.jsx(be,{...i,children:O}),e[75]=i,e[76]=O,e[77]=y):y=e[77];let B;e[78]!==o?.is_public?(B=o?.is_public&&t.jsx(ge,{className:"mt-4"}),e[78]=o?.is_public,e[79]=B):B=e[79];let M;e[80]!==b||e[81]!==D||e[82]!==y||e[83]!==B||e[84]!==u?(M=t.jsxs(xe,{className:"border-1 border-neutral-700",children:[u,b,D,y,B]}),e[80]=b,e[81]=D,e[82]=y,e[83]=B,e[84]=u,e[85]=M):M=e[85];let H;return e[86]!==V||e[87]!==c||e[88]!==M?(H=t.jsx(je,{open:V,onOpenChange:c,children:M}),e[86]=V,e[87]=c,e[88]=M,e[89]=H):H=e[89],H};export{Re as default};
