import{e as we,j as e,t as R,q as D,u as I,r as x,C as G,B as S,D as se,v as ae,x as re,y as le,M as Ce,z as be,A as ie,U as ye,E as ve,F as Ne,G as ke,s as P,H as Se,J as oe,K as Te,S as Me,L as _e,N as Fe,O as Ie,Q as Ae,T as Be,V as De}from"./index-CA2O7DK2.js";import{E as Z,D as Le,u as Ee}from"./index-t9wpFbUS.js";import{T as ce,a as de,b as E,C as He}from"./tabs-ClskyLW0.js";import{F as K,P as $e,C as Pe}from"./CardDetail-CVjACR6h.js";import{A as ue,b as xe,a as Re}from"./alert-B5AvRsXF.js";import{M as V,C as he,N as J}from"./NumberFilter-QHyMhR0h.js";import{T as ze,a as Y,P as Oe,b as Ue,c as qe,R as X,u as We}from"./useWindowDimensionsHook-CJL1y67j.js";import{S as ee}from"./SearchInput-C_qti33g.js";import{S as Ve}from"./siren-CQ0sNZ0r.js";import"./index-BuWETBsS.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Ke=we("trophy",Ge);function Qe({card:s,onSelect:a,selected:t}){const l=()=>{a(s.card_id,!t)};return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(K,{card:s,selected:t,setIsSelected:l,size:"small"}),e.jsx("p",{className:"text-xs text-center mt-1",children:R(s,D.language)})]})}const Ze=({children:s,className:a})=>e.jsx("div",{className:`max-h-[300px] overflow-y-auto border border-gray-300 rounded-md ${a}`,style:{maxHeight:"300px"},children:s});function Je({filteredCards:s}){const{t:a}=I("bulk-update"),{updateCards:t}=x.use(G),[l,d]=x.useState(!1),[r,u]=x.useState(0),[o,g]=x.useState({}),[_,p]=x.useState(!1),[v,C]=x.useState(!1),j=async(c,m)=>{await t(c.map(w=>({card_id:w,amount_owned:m})))},b=s.length===0,T=x.useMemo(()=>s.reduce((c,m)=>(c.some(w=>w.card_id===m.card_id)||c.push(m),c),[]),[s]);x.useEffect(()=>{if(l){const c=T.reduce((m,w)=>(m[w.card_id]=!0,m),{});g(c)}l||C(!1)},[l]);const N=(c,m)=>{g(w=>({...w,[c]:m}))},F=()=>{const c=T.reduce((m,w)=>(m[w.card_id]=!0,m),{});g(c)},B=()=>{const c=T.reduce((m,w)=>(m[w.card_id]=!1,m),{});g(c)},y=Object.values(o).filter(c=>c).length,$=()=>{r!==null&&(r>0?u(c=>(c||0)-1):r===0&&u(0)),C(!0)},z=()=>{u(c=>c?c+1:1),C(!0)},O=c=>{const m=c.target.value.trim();if(m==="")u(0);else{const w=Number(m);Number.isNaN(w)?u(0):u(w<0?0:w)}C(!0)},U=async()=>{p(!0);const c=Object.entries(o).filter(([m,w])=>w).map(([m])=>m);c.length>0&&(await j(c,r),d(!1),p(!1))};return e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"hidden sm:block",variant:"outline",onClick:()=>d(!0),disabled:b,children:a("buttonTitle")}),e.jsx(se,{open:l,onOpenChange:d,children:e.jsxs(ae,{className:"max-w-2xl",children:[e.jsx(re,{children:e.jsx(le,{children:a("title")})}),e.jsx(ue,{variant:"destructive",children:e.jsxs(xe,{children:[a("alert.beforeCount"),e.jsxs("strong",{children:[e.jsx("span",{style:{fontSize:"1.25rem",color:"#f3f4f6",padding:"0.25rem 0.5rem",borderRadius:"0.375rem",margin:"0 0.25rem"},children:y})," ",a("alert.cards")]})," ",a("alert.afterCount"),e.jsx("strong",{children:a("alert.warning")})]})}),e.jsxs("div",{className:"flex gap-2 justify-between",children:[e.jsx(S,{variant:"outline",onClick:B,children:a("deselectAll")}),e.jsx(S,{variant:"outline",onClick:F,children:a("selectAll")})]}),e.jsx(Ze,{className:"h-64 rounded-md border p-4",children:e.jsx("div",{className:"grid grid-cols-5 gap-2",children:T.map(c=>e.jsx(Qe,{card:c,onSelect:N,selected:o[c.card_id]},c.card_id))})}),e.jsxs("div",{className:"flex items-center gap-x-1 justify-center",children:[e.jsx(S,{variant:"ghost",size:"icon",onClick:$,disabled:r===null||r===0,className:"rounded-full",children:e.jsx(Ce,{size:14})}),e.jsx("input",{type:"text",min:"0",value:r??0,onChange:O,placeholder:a("enterAmount"),className:"w-7 text-center border-none rounded",onFocus:c=>c.target.select()}),e.jsx(S,{variant:"ghost",size:"icon",onClick:z,className:"rounded-full",children:e.jsx($e,{size:14})})]}),e.jsxs(be,{children:[e.jsx(S,{variant:"outline",onClick:()=>d(!1),children:a("cancel")}),e.jsxs(S,{onClick:U,disabled:y===0||_||!v,variant:"default",children:[_&&e.jsxs("svg",{"aria-hidden":"true",className:"w-8 h-8 text-gray-200 animate-spin dark:text-gray-600 fill-blue-600",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),e.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),a(_?"batchProcessing":"batchUpdate")]})]})]})})]})}const te=({ownedFilter:s,setOwnedFilter:a,fullWidth:t})=>{const{t:l}=I("owned-filter");return e.jsx(ce,{value:s,onValueChange:d=>a(d),className:t?"w-full":"w-70",children:e.jsxs(de,{className:"w-full flex-wrap h-auto lg:h-10 bg-neutral-50 border-1 border-neutral-700 rounded-md",children:[e.jsx(E,{value:"all",children:l("all")}),e.jsx(E,{value:"missing",children:l("missing")}),e.jsx(E,{value:"owned",children:l("owned")})]})})},ne=({value:s,onChange:a,expansion:t,fullWidth:l})=>{const{t:d}=I("common/packs");let r=ie(t)?.packs;const u=!(r===void 0||t==="P-A");return(r===void 0||r.length<=1)&&(r=[]),t==="all"||t==="P-A"?null:e.jsx(ce,{value:s,onValueChange:a,className:`h-auto ${l?"w-full":"w-[440px]"}`,children:e.jsxs(de,{className:"h-full flex-wrap w-full border-1 border-neutral-700 rounded-md flex-row justify-start content-start",children:[e.jsx(E,{value:"all",children:d("all")}),r.filter(o=>o.name!=="everypack").map(o=>e.jsx(E,{value:o.name,children:d(o.name)},`tab_trigger_${o.name}`)),u&&e.jsx(E,{value:"missions",children:d("missions")})]})})};function Ye(s,a){if(s.length===0)return a.length;if(a.length===0)return s.length;let t=Array(s.length+1).fill(0).map((d,r)=>r),l=Array(s.length+1);for(let d=1;d<=a.length;d++){l[0]=d;for(let r=1;r<=s.length;r++){const u=s[r-1]===a[d-1]?0:1;l[r]=Math.min(t[r]+1,l[r-1]+1,t[r-1]+u)}[t,l]=[l,t]}return t[s.length]}const Xe=({allTextSearch:s,setAllTextSearch:a})=>{const{t}=I("search-input");return e.jsxs("div",{className:"flex items-center space-x-2 text-white/50",children:[e.jsx("input",{type:"checkbox",id:"checkbox",checked:s,onChange:()=>a(!s),className:"w-4 h-4"}),e.jsx("label",{htmlFor:"checkbox",className:"text-xs",children:t("allTextLabel")}),e.jsx(V,{id:"allTextSearch",style:{maxWidth:"300px",whiteSpace:"normal"},clickable:!0}),e.jsx(he,{className:"h-4 w-4","data-tooltip-id":"allTextSearch","data-tooltip-content":t("allTextTooltip")})]})},et=["grass","fire","water","lightning","psychic","fighting","darkness","metal","dragon","colorless","trainer",""],tt=({cardTypeFilter:s,setCardTypeFilter:a,collapse:t})=>{const{t:l}=I("card-type-filter"),d=x.useMemo(()=>e.jsxs(ze,{variant:"outline",type:"multiple",size:"sm",value:s,onValueChange:r=>{a(r)},className:`justify-center shadow-none border-1 border-neutral-700 rounded-md flex-wrap ${t?"flex-col":"flex-row"}`,children:[et.filter(r=>r!==""&&r!=="trainer").map(r=>e.jsx(Y,{value:r,"aria-label":r,className:"text-gray-400 hover:text-gray-500 px-1",children:e.jsx("img",{src:`/images/energy/${r}.webp`,alt:r,className:"h-4"})},r)),e.jsx(Y,{value:"trainer","aria-label":"trainer",className:"text-gray-400 hover:text-gray-500 px-1",children:"T"})]}),[s,t]);return t?e.jsxs(Oe,{children:[e.jsx(Ue,{asChild:!0,children:e.jsxs(S,{variant:"outline",children:[l("filters")," (",s.length,")"]})}),e.jsx(qe,{className:"w-32",children:d})]}):d},nt=({sortBy:s,setSortBy:a})=>{const{t}=I("sort-by");return e.jsx("div",{className:"px-3 py-1 border-1 border-neutral-700 rounded-md",children:e.jsxs("label",{className:"flex items-center gap-x-2 text-white/50 text-sm",children:[e.jsx("h2",{children:t("sortBy")}),e.jsxs("select",{value:s,onChange:l=>a(l.target.value),className:"p-1",children:[e.jsx("option",{value:"default",className:"text-black",children:t("default")}),e.jsx("option",{value:"recent",className:"text-black",children:t("recent")}),e.jsx("option",{value:"expansion-newest",className:"text-black",children:t("expansion-newest")})]})]})})},st=({children:s,cards:a,filters:t,setFilters:l,onFiltersChanged:d,onChangeToMissions:r,visibleFilters:u,filtersDialog:o,batchUpdate:g,share:_})=>{const{t:p}=I(["pages/collection"]),{setIsProfileDialogOpen:v}=x.useContext(ye),[C,j]=x.useState(D.language),b=n=>l(h=>({...h,search:n})),T=n=>l(h=>({...h,allTextSearch:n})),N=n=>l(h=>({...h,expansion:n})),F=n=>l(h=>({...h,pack:n})),B=n=>l(h=>({...h,cardType:n})),y=n=>l(h=>({...h,rarity:n})),$=n=>l(h=>({...h,owned:n})),z=n=>l(h=>({...h,sortBy:n})),O=n=>l(h=>({...h,minNumber:n})),U=n=>l(h=>({...h,maxNumber:n})),c=n=>l(h=>({...h,deckbuildingMode:n})),[m,w]=x.useState(null),me=n=>t.rarity.length===0?!0:n.rarity!==""&&t.rarity.includes(n.rarity),pe=n=>t.cardType.length===0?!0:n.card_type.toLowerCase()==="trainer"?t.cardType.includes("trainer"):n.energy!==""&&t.cardType.includes(n.energy.toLowerCase()),L=x.useMemo(()=>{if(!a)return null;let n=ve;if(t.deckbuildingMode&&(n=n.filter(i=>Ne.includes(i.rarity)||i.rarity===""||i.rarity==="P")),t.expansion!=="all"&&(n=n.filter(i=>i.expansion===t.expansion)),t.pack==="missions"){n=[];let i=ke.get(t.expansion)?.missions||null;i&&(t.owned==="owned"?i=i.filter(f=>f.completed):t.owned==="missing"&&(i=i.filter(f=>!f.completed))),w(i)}else w(null),t.pack!=="all"&&(n=n.filter(i=>i.pack===t.pack||i.pack==="everypack"));if(t.owned!=="all"&&(t.owned==="owned"?n=n.filter(i=>a.find(f=>f.card_id===i.card_id&&f.amount_owned>0)):t.owned==="missing"&&(n=n.filter(i=>!a.find(f=>f.card_id===i.card_id&&f.amount_owned>0)))),t.sortBy==="recent")n=[...n].sort((i,f)=>{const M=a.find(A=>A.card_id===i.card_id)?.updated_at,k=a.find(A=>A.card_id===f.card_id)?.updated_at;return M&&k?new Date(k).getTime()-new Date(M).getTime():M&&!k?-1:1});else if(t.sortBy==="expansion-newest"){const i=[...P].reverse().slice(1).concat(P[P.length-1]);n=[...n].sort((f,M)=>{const k=i.findIndex(H=>H.id===f.expansion),A=i.findIndex(H=>H.id===M.expansion);return k!==A?k-A:f.card_id.localeCompare(M.card_id,D.language||"en",{numeric:!0})})}n=n.filter(me),n=n.filter(pe),t.search&&(n=n.filter(f=>{const M=R(f,D.language).toLowerCase(),k=t.search.toLowerCase();let A=!1;if(t.allTextSearch){const q=f.ability.name?.toLowerCase(),je=f.ability.effect?.toLowerCase();A=q&&q!=="no ability"&&(q.includes(k)||je.includes(k))||f.attacks.some(W=>W.name?.toLowerCase().includes(k)||W.effect?.toLowerCase()!=="no effect"&&W.effect?.toLowerCase()?.includes(k))}const H=M.includes(k),fe=Ye(M,k)<=2,ge=f.card_id.toLowerCase().includes(k);return A||H||fe||ge}));const h=new Map((a||[]).map(i=>[i.card_id,i.amount_owned]));for(const i of n)i.linkedCardID?i.amount_owned=0:t.deckbuildingMode?i.amount_owned=i.alternate_versions.reduce((f,M)=>f+(h.get(M.card_id)||0),0):i.amount_owned=h.get(i.card_id)||0;return n=n.filter(i=>(i.amount_owned||0)>=t.minNumber),t.maxNumber!==100&&(n=n.filter(i=>(i.amount_owned||0)<=t.maxNumber)),n},[a,t,C]);x.useEffect(()=>{d(L);const n=h=>{j(h)};return D.on("languageChanged",n),()=>{D.off("languageChanged",n)}},[L]),x.useEffect(()=>{r(m)},[m]);function Q(n){N(n),F("all")}return e.jsxs("div",{id:"filterbar",className:"flex flex-col gap-x-2 flex-wrap",children:[s,u?.expansions&&e.jsxs("div",{className:"flex gap-x-2 px-4 mb-2",children:[e.jsx(Z,{value:t.expansion,onChange:Q}),e.jsx(ne,{value:t.pack,onChange:F,expansion:t.expansion})]}),e.jsxs("div",{className:"gap-2 flex-row gap-y-1 px-4 flex",children:[u?.search&&e.jsx(ee,{setSearchValue:b}),u?.owned&&e.jsx(te,{ownedFilter:t.owned,setOwnedFilter:$}),u?.rarity&&e.jsx(X,{rarityFilter:t.rarity,setRarityFilter:y,collapse:!0}),o&&e.jsxs(se,{children:[e.jsx(Se,{asChild:!0,children:e.jsx(S,{variant:"outline",children:p("filters.allFilters")})}),e.jsxs(ae,{className:"border-1 border-neutral-700 shadow-none max-h-[90vh] overflow-y-auto content-start",children:[e.jsx(re,{children:e.jsx(le,{children:p("filters.filtersCount",{count:(L||[]).filter(n=>!n.linkedCardID).length})})}),e.jsxs("div",{className:"flex flex-col gap-3",children:[o.search&&e.jsx(ee,{setSearchValue:b,fullWidth:!0}),o.allTextSearch&&e.jsx(Xe,{allTextSearch:t.allTextSearch,setAllTextSearch:T}),o.expansions&&e.jsx(Z,{value:t.expansion,onChange:Q}),o.pack&&e.jsx(ne,{value:t.pack,onChange:F,expansion:t.expansion,fullWidth:!0}),o.rarity&&e.jsx(X,{rarityFilter:t.rarity,setRarityFilter:y}),o.cardType&&e.jsx(tt,{cardTypeFilter:t.cardType,setCardTypeFilter:B}),o.owned&&e.jsx(te,{ownedFilter:t.owned,setOwnedFilter:$,fullWidth:!0}),o.sortBy&&e.jsx(nt,{sortBy:t.sortBy,setSortBy:z}),o.amount&&e.jsxs(e.Fragment,{children:[e.jsx(J,{numberFilter:t.minNumber,setNumberFilter:O,options:[0,1,2,3,4,5,6,7,8,9],labelKey:"minNum"}),e.jsx(J,{numberFilter:t.maxNumber,setNumberFilter:U,options:[1,2,3,4,5,6,7,8,9,10,100],labelKey:"maxNum"})]}),o.deckBuildingMode&&e.jsx(Le,{deckbuildingMode:t.deckbuildingMode,setDeckbuildingMode:c}),e.jsx(S,{variant:"outline",className:"!text-red-700",onClick:()=>l({search:"",expansion:"all",pack:"all",cardType:[],rarity:[],owned:"all",sortBy:"expansion-newest",minNumber:0,maxNumber:100,deckbuildingMode:!1,allTextSearch:!1}),children:p("filters.clear")})]})]})]}),g&&e.jsx(Je,{filteredCards:L||[],disabled:!L||L.length===0}),_&&e.jsx(S,{variant:"outline",onClick:()=>v(!0),children:p("filters.share")})]})]})};function at({mission:s}){const{width:a}=We(),{t}=I("common/packs"),{ownedCards:l,setSelectedCardId:d,setSelectedMissionCardOptions:r}=x.use(G);let u=5,o=Math.min(a,890)/5+120;a>600&&a<800?(u=4,o=a/3+50):a<=600&&(u=3,o=a/3+100);const g=x.useMemo(()=>{let p=!0;const v=s.requiredCards.flatMap(j=>{let b=l.reduce((N,F)=>{const B=j.options.find(y=>y===F.card_id);if(B)for(let y=0;y<F.amount_owned;y++)N.push({cardId:B,owned:!0,missionCardOptions:j.options});return N},[]);b.length>j.amount&&(b=b.slice(0,j.amount));const T=j.amount-b.length;for(let N=0;N<T;N++)b.push({cardId:j.options[0],owned:!1,missionCardOptions:j.options});return p=p&&T===0,b});s.completed=p;const C=[];for(let j=0;j<v.length;j+=u)C.push(v.slice(j,j+u));return C},[u]),_=o*g.length+72;return e.jsxs("div",{style:{height:`${_}px`},className:"relative w-full",children:[e.jsx("div",{style:{height:`${_}px`},className:"relative w-full",children:g.map((p,v)=>e.jsx("div",{style:{height:`${o}px`,transform:`translateY(${o*v+72}px)`},className:"absolute top-0 left-0 w-full",children:e.jsx("div",{className:"flex justify-start gap-x-3",children:p.map((C,j)=>{const b=oe(C.cardId);return b&&e.jsxs("div",{className:"group flex w-fit max-w-32 md:max-w-40 flex-col items-center rounded-lg cursor-pointer",children:[e.jsx("button",{type:"button",onClick:()=>C.owned?d(C.cardId):r(C.missionCardOptions),children:e.jsx(K,{card:b,selected:C.owned})}),e.jsxs("p",{className:"max-w-[130px] overflow-hidden text-ellipsis whitespace-nowrap font-semibold text-[12px] pt-2",children:[C.cardId," - ",R(b,D.language)]})]},`${s.name}__${j}`)})})},v))}),e.jsx("div",{style:{height:"72px"},className:"absolute top-0 left-0 w-full",children:e.jsxs("h2",{className:"flex items-center gap-x-4 mx-auto mt-10 w-full max-w-[900px] scroll-m-20 border-b-2 border-slate-600 pb-2 font-semibold text-md sm:text-lg md:text-2xl tracking-tight transition-colors first:mt-0",children:[s.name,e.jsx(V,{id:`rewardDescription${s.name}`,style:{maxWidth:"300px",whiteSpace:"normal",fontSize:16},clickable:!0}),e.jsx(Ke,{className:"h-6 w-6","data-tooltip-id":`rewardDescription${s.name}`,"data-tooltip-html":s.reward}),e.jsx(V,{id:`probability${s.name}`,style:{maxWidth:"300px",whiteSpace:"normal",fontSize:16},clickable:!0}),e.jsx(he,{className:"h-6 w-6","data-tooltip-id":`probability${s.name}`,"data-tooltip-html":s.completed?"Completed!":Te(s,g).filter(([p,v])=>p!=="everypack"&&v>0).map(([p,v])=>`${t(p)}: ${v.toFixed(2)}%`).join("<br/>")})]})},"header")]})}function rt({missions:s,resetScrollTrigger:a}){const t=x.useRef(null),[l,d]=x.useState("auto");return x.useLayoutEffect(()=>{const r=()=>{if(t.current){const u=document.querySelector("#header")?.offsetHeight||0,o=document.querySelector("#filterbar")?.offsetHeight||0,g=window.innerHeight-u-o;d(`${g}px`)}};return r(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}},[]),x.useEffect(()=>{t.current&&(t.current.scrollTop=0)},[a]),e.jsx("div",{ref:t,className:"overflow-y-auto mt-2 sm:mt-4 px-4 flex flex-col justify-start",style:{scrollbarWidth:"none",height:l},children:s.map(r=>e.jsx(at,{mission:r},r.name))})}function lt({missionCardOptions:s,onClose:a}){const{t}=I(["common/sets","common/packs","pages/collection"]),l=s[0]||"",d=l.length>0?l.split("-")[0]:"Unknown",r=ie(d)||P[0],u=r.name;return e.jsx(Me,{open:!!s.length,onOpenChange:o=>{o||a()},children:e.jsxs(_e,{className:"transition-all duration-300 ease-in-out border-slate-600 overflow-y-auto",children:[e.jsx(Fe,{children:e.jsx(Ie,{children:s.length===1?t("missionDetail.eligibleCards-singular",{ns:"pages/collection",options:1}):t("missionDetail.eligibleCards-plural",{ns:"pages/collection",options:s.length})})}),t(u),s.map(o=>{const g=oe(o);return g&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"px-10 py-4 w-full",children:e.jsx(K,{card:g,selected:!1})}),e.jsxs("p",{className:"max-w-[130px] whitespace-nowrap font-semibold text-[12px] pt-2",children:[o," - ",R(g,D.language),e.jsx("br",{}),t("missionDetail.chanceFrom",{ns:"pages/collection",pack:t(g.pack,{ns:"common/packs"}),chance:Ae(r,g.pack,g).toFixed(2)})]})]})})]})})}function gt(){const{friendAccount:s,friendCollection:a}=Be(),t=De(),{t:l}=I(["pages/collection"]),d=Ee({query:"(max-width: 767px)"}),{ownedCards:r,selectedCardId:u,setSelectedCardId:o,selectedMissionCardOptions:g,setSelectedMissionCardOptions:_}=x.useContext(G),[p,v]=x.useState({search:"",expansion:"all",pack:"all",cardType:[],rarity:[],owned:"all",sortBy:"expansion-newest",minNumber:0,maxNumber:100,deckbuildingMode:!1,allTextSearch:!1}),[C,j]=x.useState(!1),[b,T]=x.useState(null),[N,F]=x.useState(null),B=a??r;return x.useEffect(()=>{j(!0);const y=setTimeout(()=>j(!1),100);return()=>clearTimeout(y)},[p]),e.jsxs("div",{className:"flex flex-col gap-y-1 mx-auto max-w-[900px]",children:[e.jsx(st,{cards:B,filters:p,setFilters:v,onFiltersChanged:y=>T(y),onChangeToMissions:y=>F(y),visibleFilters:{expansions:!d,allTextSearch:!d,search:!0,owned:!d,rarity:!d},filtersDialog:{expansions:!0,pack:!0,search:!0,owned:!0,sortBy:!0,rarity:!0,cardType:!0,amount:!0,deckBuildingMode:!0,allTextSearch:!0},batchUpdate:!!s,share:!0,children:e.jsx("div",{children:s&&e.jsxs(ue,{className:"mb-4 border-1 border-neutral-700 shadow-none",children:[e.jsx(Ve,{className:"h-4 w-4"}),e.jsx(Re,{children:l("publicCollectionTitle",{username:s?.username})}),e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center",children:[l("publicCollectionDescription"),e.jsx(S,{className:"mb-4",onClick:()=>{t(`/trade/${s?.friend_id}`)},children:l("showPossibleTrades")})]})})]})})}),e.jsxs("div",{children:[b&&!N&&e.jsx(He,{cards:b,resetScrollTrigger:C,showStats:!p.deckbuildingMode,extraOffset:24,editable:!p.deckbuildingMode}),u&&e.jsx(Pe,{cardId:u,onClose:()=>o("")})]}),e.jsx("div",{children:N&&e.jsx(rt,{missions:N,resetScrollTrigger:C})}),N&&e.jsx(lt,{missionCardOptions:g,onClose:()=>_([])})]})}export{gt as default};
