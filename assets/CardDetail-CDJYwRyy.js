import{r as d,ag as _,ad as K,ae as H,j as e,l as k,ah as z,m as j,an as N,ai as Q,aj as y,ak as W,b4 as X,b5 as Y,f as I,u as J,N as Z,E as ee,n as ae,S as se,Q as te,T as re,U as oe,v as w,s as b,D as ne,z as ie,A as ce,y as de,V as le}from"./index-DPF2N-F-.js";import{C as ue}from"./Card-Cwy5lh-a.js";import"./FancyCard-BfiSmuud.js";var C="Radio",[pe,S]=k(C),[me,xe]=pe(C),E=d.forwardRef((o,n)=>{const{__scopeRadio:a,name:i,checked:r=!1,required:s,disabled:c,value:m="on",onCheck:x,form:u,...p}=o,[l,h]=d.useState(null),t=N(n,v=>h(v)),f=d.useRef(!1),g=l?u||!!l.closest("form"):!0;return e.jsxs(me,{scope:a,checked:r,disabled:c,children:[e.jsx(j.button,{type:"button",role:"radio","aria-checked":r,"data-state":G(r),"data-disabled":c?"":void 0,disabled:c,value:m,...p,ref:t,onClick:y(o.onClick,v=>{r||x?.(),g&&(f.current=v.isPropagationStopped(),f.current||v.stopPropagation())})}),g&&e.jsx(A,{control:l,bubbles:!f.current,name:i,value:m,checked:r,required:s,disabled:c,form:u,style:{transform:"translateX(-100%)"}})]})});E.displayName=C;var D="RadioIndicator",P=d.forwardRef((o,n)=>{const{__scopeRadio:a,forceMount:i,...r}=o,s=xe(D,a);return e.jsx(W,{present:i||s.checked,children:e.jsx(j.span,{"data-state":G(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:n})})});P.displayName=D;var fe="RadioBubbleInput",A=d.forwardRef(({__scopeRadio:o,control:n,checked:a,bubbles:i=!0,...r},s)=>{const c=d.useRef(null),m=N(c,s),x=X(a),u=Y(n);return d.useEffect(()=>{const p=c.current;if(!p)return;const l=window.HTMLInputElement.prototype,t=Object.getOwnPropertyDescriptor(l,"checked").set;if(x!==a&&t){const f=new Event("click",{bubbles:i});t.call(p,a),p.dispatchEvent(f)}},[x,a,i]),e.jsx(j.input,{type:"radio","aria-hidden":!0,defaultChecked:a,...r,tabIndex:-1,ref:m,style:{...r.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});A.displayName=fe;function G(o){return o?"checked":"unchecked"}var he=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],R="RadioGroup",[ge,_e]=k(R,[_,S]),T=_(),O=S(),[ve,je]=ge(R),F=d.forwardRef((o,n)=>{const{__scopeRadioGroup:a,name:i,defaultValue:r,value:s,required:c=!1,disabled:m=!1,orientation:x,dir:u,loop:p=!0,onValueChange:l,...h}=o,t=T(a),f=K(u),[g,v]=H({prop:s,defaultProp:r??null,onChange:l,caller:R});return e.jsx(ve,{scope:a,name:i,required:c,disabled:m,value:g,onValueChange:v,children:e.jsx(z,{asChild:!0,...t,orientation:x,dir:f,loop:p,children:e.jsx(j.div,{role:"radiogroup","aria-required":c,"aria-orientation":x,"data-disabled":m?"":void 0,dir:f,...h,ref:n})})})});F.displayName=R;var B="RadioGroupItem",M=d.forwardRef((o,n)=>{const{__scopeRadioGroup:a,disabled:i,...r}=o,s=je(B,a),c=s.disabled||i,m=T(a),x=O(a),u=d.useRef(null),p=N(n,u),l=s.value===r.value,h=d.useRef(!1);return d.useEffect(()=>{const t=g=>{he.includes(g.key)&&(h.current=!0)},f=()=>h.current=!1;return document.addEventListener("keydown",t),document.addEventListener("keyup",f),()=>{document.removeEventListener("keydown",t),document.removeEventListener("keyup",f)}},[]),e.jsx(Q,{asChild:!0,...m,focusable:!c,active:l,children:e.jsx(E,{disabled:c,required:s.required,checked:l,...x,...r,name:s.name,ref:p,onCheck:()=>s.onValueChange(r.value),onKeyDown:y(t=>{t.key==="Enter"&&t.preventDefault()}),onFocus:y(r.onFocus,()=>{h.current&&u.current?.click()})})})});M.displayName=B;var Re="RadioGroupIndicator",L=d.forwardRef((o,n)=>{const{__scopeRadioGroup:a,...i}=o,r=O(a);return e.jsx(P,{...r,...i,ref:n})});L.displayName=Re;var ye=F,V=M,$=L;const Ne=ye,U=d.forwardRef(({className:o,...n},a)=>e.jsx(V,{ref:a,className:I("w-4 h-4 mr-2 rounded-full bg-neutral-700 hover:bg-neutral-500",o),...n}));U.displayName=V.displayName;const q=d.forwardRef(({className:o,...n},a)=>e.jsx($,{ref:a,className:I("w-2 h-2 mx-1 xm-auto my-auto rounded-full flex bg-neutral-300",o),...n}));q.displayName=$.displayName;function ke({cardId:o,onClose:n}){const{t:a}=J(["pages/card-detail","common/types","common/packs","common/sets"]),[i,r]=d.useState(o),s=Z(i)||{},c=ee(s.expansion),{data:m=[]}=ae(),[x,u]=d.useState(!1);if(!s)return null;const p=s.pack==="everypack"?c?.packs[0].name:s.pack,l=m.find(t=>t.card_id===i),h=t=>new Intl.DateTimeFormat(void 0,{dateStyle:"long",timeStyle:"long"}).format(new Date(t));return e.jsx(se,{open:!0,onOpenChange:t=>{t||n()},children:e.jsxs(te,{className:"transition-all duration-300 ease-in-out border-slate-600 overflow-y-auto",children:[e.jsx(re,{children:e.jsxs(oe,{children:[w(s,b.language)," ",s.rarity]})}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"px-10 py-4 w-full",children:e.jsx("div",{className:"cursor-pointer",children:e.jsx(ue,{className:"w-full",card:{...s,amount_owned:l?.amount_owned||0},onImageClick:()=>u(!0)},i)})}),e.jsxs(ne,{open:x,onOpenChange:u,children:[e.jsx(ie,{className:"hidden",children:e.jsx(ce,{children:"Card image dialog"})}),e.jsx(de,{className:"flex items-center justify-center p-0 max-w-3xl max-h-[90vh]",children:s.image&&e.jsx("img",{src:s.image,alt:w(s,b.language),className:"w-full h-full object-scale-down",onClick:()=>u(!1)})})]}),e.jsxs("div",{className:"p-4 w-full",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h2",{className:"text-xl font-semibold",children:a("text.alternateVersions")}),e.jsx(Ne,{value:i,onValueChange:r,children:s.alternate_versions?.map(t=>e.jsxs("label",{className:"flex items-center cursor-pointer",htmlFor:`radio-${t.card_id}`,children:[e.jsx(U,{id:`radio-${t.card_id}`,value:t.card_id,children:e.jsx(q,{})}),t.rarity," ",t.card_id]},t.card_id))})]}),e.jsxs("p",{className:"text-lg mt-1",children:[e.jsxs("strong",{children:[a("text.expansion"),":"]})," ",s.expansion]}),e.jsxs("p",{className:"text-lg",children:[e.jsxs("strong",{children:[a("text.pack"),":"]})," ",a(`${s.pack}`,{ns:"common/packs"})]}),e.jsxs("p",{className:"mt-1",children:[e.jsx("strong",{children:"Energy:"})," ",s.energy]}),e.jsxs("p",{children:[e.jsxs("strong",{children:[a("text.weakness"),":"]})," ",a(`${s.weakness}`,{ns:"common/types"})||"N/A"]}),e.jsxs("p",{children:[e.jsxs("strong",{children:[a("text.hp"),":"]})," ",s.hp]}),e.jsxs("p",{children:[e.jsxs("strong",{children:[a("text.retreat"),":"]})," ",s.retreat||"N/A"]}),e.jsxs("p",{className:"mt-1",children:[e.jsxs("strong",{children:[a("text.ability"),":"]})," ",s.ability?.name??e.jsx("i",{children:"None"})]}),s.ability&&e.jsxs("p",{children:[e.jsxs("strong",{children:[a("text.abilityEffect"),":"]})," ",s.ability.effect]}),e.jsxs("p",{className:"mt-1",children:[e.jsxs("strong",{children:[a("text.cardType"),":"]})," ",a(`cardType.${s.card_type}`)]}),e.jsxs("p",{children:[e.jsxs("strong",{children:[a("text.evolutionType"),":"]})," ",a(`evolutionType.${s.evolution_type}`)]}),c&&p&&e.jsx("p",{className:"mt-1",children:e.jsx("strong",{children:a("text.chanceToPull",{ns:"pages/card-detail",percent:le(c,p,s).toFixed(2)})})}),e.jsxs("p",{children:[e.jsxs("strong",{children:[a("text.craftingCost"),":"]})," ",s.crafting_cost]}),e.jsxs("p",{className:"mt-1",children:[e.jsxs("strong",{children:[a("text.artist"),":"]})," ",s.artist]}),e.jsxs("p",{className:"mt-4 text-neutral-400 text-sm",children:[e.jsxs("strong",{className:"font-semibold",children:[a("text.updated"),":"]})," ",l?.updated_at?h(l.updated_at):"N/A"]})]})]})]})})}export{ke as default};
