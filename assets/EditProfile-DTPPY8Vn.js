import{N as S,a8 as P,P as F,aC as w,E as C,a0 as A,u as I,ag as T,aj as y,aD as j,j as e,aE as k,aF as E,aG as B,aH as U,Z as u,D as h}from"./index-Bnu89jLk.js";import{u as O,a as $,F as H,b as t,c as l,e as o,d as c,f as d,h as f,S as L,g as M}from"./form-BSMG-Lch.js";import{A as R,a as G,b as Z}from"./alert-DWlFRNFN.js";import{S as q}from"./siren-Dp0U1VBk.js";import"./index-DvrFuVUP.js";import"./index-Te9o0rjq.js";const X=()=>{const b=S(),{data:x}=P(),{data:i}=F(),g=w(),{isProfileDialogOpen:v,setIsProfileDialogOpen:p}=C(),{toast:m}=A(),{t:s}=I("edit-profile"),D=T({username:j().min(2,{message:s("usernameTooShort")}),friend_id:j().regex(/^[0-9]{16}$/,{message:s("friendIdInvalid")}),is_public:y().optional()}),r=O({resolver:$(D),values:{username:i?.username||"",friend_id:i?.friend_id||"",is_public:i?.is_public||!1}}),_=async a=>{try{await g.mutateAsync({email:x?.user.email,username:a.username,friend_id:a.friend_id,is_public:a.is_public}),m({title:s("accountSaved"),variant:"default"})}catch(n){console.error("error saving account",n),m({title:s("accountSavingError"),variant:"destructive"})}},N=`https://tcgpocketcollectiontracker.com/#/collection/${i?.friend_id}`;return e.jsx(k,{open:v,onOpenChange:p,children:e.jsxs(E,{className:"border-1 border-neutral-700 shadow-none h-[90vh] content-start",children:[e.jsx(B,{children:e.jsx(U,{children:s("editProfile")})}),e.jsxs(R,{className:"mb-2 border-1 border-neutral-700 shadow-none",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx(G,{children:s("updateProfile.title")}),e.jsx(Z,{children:s("updateProfile.description")})]}),e.jsx(H,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(_),className:"space-y-8",children:[e.jsx(t,{name:"email",render:()=>e.jsxs(l,{children:[e.jsx(o,{children:s("email")}),e.jsx(c,{className:"mt-2",children:e.jsx(u,{placeholder:s("email"),disabled:!0,value:x?.user.email})}),e.jsx(d,{children:s("registeredEmail")})]})}),e.jsx(t,{control:r.control,name:"username",render:({field:a})=>e.jsxs(l,{children:[e.jsx(o,{children:s("username")}),e.jsx(c,{className:"mt-2",children:e.jsx(u,{placeholder:s("username"),...a})}),e.jsx(d,{children:s("usernameDescription")}),e.jsx(f,{})]})}),e.jsx(t,{control:r.control,name:"friend_id",render:({field:a})=>e.jsxs(l,{children:[e.jsx(o,{children:s("friendID")}),e.jsx(c,{className:"mt-2",children:e.jsx(u,{placeholder:s("friendID"),...a})}),e.jsx(d,{children:s("friendIDDescription")}),e.jsx(f,{})]})}),e.jsx(t,{control:r.control,name:"is_public",render:({field:a})=>e.jsxs(l,{className:"flex flex-col items-start",children:[e.jsx(c,{className:"mt-2",children:e.jsxs("div",{className:"flex items-center gap-x-2 w-full flex-wrap",children:[e.jsx(o,{children:s("isPublicToggle")}),e.jsx("div",{className:"grow-1",children:e.jsx(L,{checked:a.value,onCheckedChange:a.onChange})}),e.jsx(h,{disabled:!i?.is_public,onClick:async n=>{n.preventDefault(),m({title:"Copied public collection page URL to clipboard!",variant:"default",duration:3e3}),await navigator.clipboard.writeText(N)},children:s("isPublicButton")}),e.jsx(h,{disabled:!i?.is_public,onClick:async n=>{n.preventDefault(),p(!1),b(`/trade/${i?.friend_id}`)},children:s("isPublicTradeButton")})]})}),e.jsx(d,{children:s("isPublicDescription")})]})}),i?.is_public&&e.jsx(M,{}),e.jsx(h,{type:"submit",children:s("save")})]})})]})})};export{X as default};
