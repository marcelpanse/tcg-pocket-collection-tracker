import{M as v,aH as _,C as P,aI as F,A as I,a2 as A,f as C,ai as T,al as k,aJ as h,j as e,aK as E,aL as M,aM as O,aN as y,D as p,Z as m}from"./index-ClbyXLjL.js";import{u as z,a as B,F as H,b as n,c as l,e as o,d as t,g as c,h as f,S as L,f as U}from"./form-BdPUyTBm.js";import{A as w,a as J,b as K}from"./alert-B6eNStZn.js";import{S as R}from"./siren-CtTtuSdn.js";import"./index-cIQ_qWQ3.js";import"./index-B6TGjb7_.js";const W=()=>{const b=v(),{data:u}=_(),{data:i}=P(),d=F(),{isProfileDialogOpen:g,setIsProfileDialogOpen:x}=I(),{toast:j}=A(),{t:s}=C("edit-profile"),D=T({username:h().min(2,{message:s("usernameTooShort")}),friend_id:h().regex(/^\d{16}$/,{message:s("friendIdInvalid")}),is_public:k().optional()}),r=z({resolver:B(D),values:{username:i?.username??"",friend_id:i?.friend_id??"",is_public:i?.is_public??!1}}),N=a=>{d.mutate({email:u?.user.email,username:a.username,friend_id:a.friend_id,is_public:a.is_public},{onSuccess:()=>j({title:s("accountSaved"),variant:"default"}),onError:S=>{console.error("error saving account",S),j({title:s("accountSavingError"),variant:"destructive"})}})};return e.jsx(E,{open:g,onOpenChange:x,children:e.jsxs(M,{className:"border-1 border-neutral-700",children:[e.jsx(O,{children:e.jsx(y,{children:s("editProfile")})}),e.jsxs(w,{className:"mb-2",children:[e.jsx(R,{className:"size-4"}),e.jsx(J,{children:s("updateProfile.title")}),e.jsx(K,{children:s("updateProfile.description")})]}),e.jsx(p,{onClick:a=>{a.preventDefault(),x(!1),b("/trade/settings")},children:s("openTradingSettings")}),e.jsx(H,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(N),className:"space-y-8",children:[e.jsx(n,{name:"email",render:()=>e.jsxs(l,{children:[e.jsx(o,{children:s("email")}),e.jsx(t,{className:"mt-1",children:e.jsx(m,{placeholder:s("email"),disabled:!0,value:u?.user.email})}),e.jsx(c,{children:s("registeredEmail")})]})}),e.jsx(n,{control:r.control,name:"username",render:({field:a})=>e.jsxs(l,{children:[e.jsx(o,{children:s("username")}),e.jsx(t,{className:"mt-1",children:e.jsx(m,{placeholder:s("username"),...a})}),e.jsx(c,{children:s("usernameDescription")}),e.jsx(f,{})]})}),e.jsx(n,{control:r.control,name:"friend_id",render:({field:a})=>e.jsxs(l,{children:[e.jsx(o,{children:s("friendID")}),e.jsx(t,{className:"mt-1",children:e.jsx(m,{placeholder:s("friendID"),...a})}),e.jsx(c,{children:s("friendIDDescription")}),e.jsx(f,{})]})}),e.jsx(n,{control:r.control,name:"is_public",render:({field:a})=>e.jsxs(l,{className:"flex flex-col items-start",children:[e.jsx(t,{className:"mt-2",children:e.jsxs(o,{className:"flex items-center",children:[s("isPublicToggle"),e.jsx(L,{className:"ml-2",checked:a.value,onCheckedChange:a.onChange})]})}),e.jsx(c,{children:s("isPublicDescription")})]})}),e.jsxs(p,{type:"submit",className:"block ml-auto",disabled:d.isPending,children:[s("save"),d.isPending&&e.jsx("div",{className:"ml-2 inline-block animate-spin rounded-full size-4 border-2 border-black border-t-transparent"})]})]})}),i?.is_public&&e.jsx(U,{className:"mt-4"})]})})};export{W as default};
